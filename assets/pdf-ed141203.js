var ar=Object.defineProperty,or=Object.defineProperties;var lr=Object.getOwnPropertyDescriptors;var Cn=Object.getOwnPropertySymbols;var cr=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable;var $e=Math.pow,He=(g,r,t)=>r in g?ar(g,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):g[r]=t,oe=(g,r)=>{for(var t in r||(r={}))cr.call(r,t)&&He(g,t,r[t]);if(Cn)for(var t of Cn(r))hr.call(r,t)&&He(g,t,r[t]);return g},ue=(g,r)=>or(g,lr(r));var ne=(g,r,t)=>(He(g,typeof r!="symbol"?r+"":r,t),t),ze=(g,r,t)=>{if(!r.has(g))throw TypeError("Cannot "+t)};var s=(g,r,t)=>(ze(g,r,"read from private field"),t?t.call(g):r.get(g)),X=(g,r,t)=>{if(r.has(g))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(g):r.set(g,t)},at=(g,r,t,e)=>(ze(g,r,"write to private field"),e?e.call(g,t):r.set(g,t),t);var be=(g,r,t,e)=>({set _(n){at(g,r,n,t)},get _(){return s(g,r,e)}}),j=(g,r,t)=>(ze(g,r,"access private method"),t);var ee=(g,r,t)=>new Promise((e,n)=>{var l=T=>{try{P(t.next(T))}catch(m){n(m)}},v=T=>{try{P(t.throw(T))}catch(m){n(m)}},P=T=>T.done?e(T.value):Promise.resolve(T.value).then(l,v);P((t=t.apply(g,r)).next())});import{k as isString,l as inject,m as computed,q as watch,s as nextTick,x as getCurrentInstance,r as ref,y as isArray$1,z as isObject,A as toRaw,B as defineComponent,C as useSlots,o as openBlock,c as createBlock,w as withCtx,d as createBaseVNode,n as normalizeClass,g as unref,i as withDirectives,e as createElementBlock,D as isRef,E as withModifiers,G as vModelCheckbox,H as renderSlot,F as Fragment,h as createTextVNode,t as toDisplayString,I as createCommentVNode,J as resolveDynamicComponent,K as normalizeStyle,L as provide,M as toRefs}from"./index-4d3405a5.js";import{u as useSizeProp}from"./http-517bc54d.js";import{i as identity,b as isArguments,c as arrayPush,h as hasIn,U as UPDATE_MODEL_EVENT,u as useFormDisabled,d as useFormItem,e as debugWarn,f as isEqual,g as useFormSize,j as isNil,k as useFormItemInputId}from"./el-scrollbar-9e2dbc11.js";import{d as defineProperty,S as Symbol$1,i as isArray,b as baseGet,a as baseSet,c as castPath,e as isNumber,f as isBoolean,g as isUndefined,u as useNamespace,h as _export_sfc,j as buildProps,k as definePropType,w as withInstall,l as withNoopInstall}from"./_plugin-vue_export-helper-c0421d06.js";function apply(g,r,t){switch(t.length){case 0:return g.call(r);case 1:return g.call(r,t[0]);case 2:return g.call(r,t[0],t[1]);case 3:return g.call(r,t[0],t[1],t[2])}return g.apply(r,t)}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(g){var r=0,t=0;return function(){var e=nativeNow(),n=HOT_SPAN-(e-t);if(t=e,n>0){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return g.apply(void 0,arguments)}}function constant(g){return function(){return g}}var baseSetToString=defineProperty?function(g,r){return defineProperty(g,"toString",{configurable:!0,enumerable:!1,value:constant(r),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;var nativeMax=Math.max;function overRest(g,r,t){return r=nativeMax(r===void 0?g.length-1:r,0),function(){for(var e=arguments,n=-1,l=nativeMax(e.length-r,0),v=Array(l);++n<l;)v[n]=e[r+n];n=-1;for(var P=Array(r+1);++n<r;)P[n]=e[n];return P[r]=t(v),apply(g,this,P)}}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(g){return isArray(g)||isArguments(g)||!!(spreadableSymbol&&g&&g[spreadableSymbol])}function baseFlatten(g,r,t,e,n){var l=-1,v=g.length;for(t||(t=isFlattenable),n||(n=[]);++l<v;){var P=g[l];r>0&&t(P)?r>1?baseFlatten(P,r-1,t,e,n):arrayPush(n,P):e||(n[n.length]=P)}return n}function flatten(g){var r=g==null?0:g.length;return r?baseFlatten(g,1):[]}function flatRest(g){return setToString$1(overRest(g,void 0,flatten),g+"")}function basePickBy(g,r,t){for(var e=-1,n=r.length,l={};++e<n;){var v=r[e],P=baseGet(g,v);t(P,v)&&baseSet(l,castPath(v,g),P)}return l}function basePick(g,r){return basePickBy(g,r,function(t,e){return hasIn(g,e)})}var pick=flatRest(function(g,r){return g==null?{}:basePick(g,r)});const pick$1=pick;var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(g){if(g.__esModule)return g;var r=g.default;if(typeof r=="function"){var t=function e(){return this instanceof e?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(g).forEach(function(e){var n=Object.getOwnPropertyDescriptor(g,e);Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:function(){return g[e]}})}),t}const checkboxProps={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:useSizeProp,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},checkboxEmits={[UPDATE_MODEL_EVENT]:g=>isString(g)||isNumber(g)||isBoolean(g),change:g=>isString(g)||isNumber(g)||isBoolean(g)},checkboxGroupContextKey=Symbol("checkboxGroupContextKey"),useCheckboxDisabled=({model:g,isChecked:r})=>{const t=inject(checkboxGroupContextKey,void 0),e=computed(()=>{var l,v;const P=(l=t==null?void 0:t.max)==null?void 0:l.value,T=(v=t==null?void 0:t.min)==null?void 0:v.value;return!isUndefined(P)&&g.value.length>=P&&!r.value||!isUndefined(T)&&g.value.length<=T&&r.value});return{isDisabled:useFormDisabled(computed(()=>(t==null?void 0:t.disabled.value)||e.value)),isLimitDisabled:e}},useCheckboxEvent=(g,{model:r,isLimitExceeded:t,hasOwnLabel:e,isDisabled:n,isLabeledByFormItem:l})=>{const v=inject(checkboxGroupContextKey,void 0),{formItem:P}=useFormItem(),{emit:T}=getCurrentInstance();function m(c){var o,i;return c===g.trueLabel||c===!0?(o=g.trueLabel)!=null?o:!0:(i=g.falseLabel)!=null?i:!1}function p(c,o){T("change",m(c),o)}function w(c){if(t.value)return;const o=c.target;T("change",m(o.checked),c)}function k(c){return ee(this,null,function*(){t.value||!e.value&&!n.value&&l.value&&(c.composedPath().some(d=>d.tagName==="LABEL")||(r.value=m([!1,g.falseLabel].includes(r.value)),yield nextTick(),p(r.value,c)))})}const x=computed(()=>(v==null?void 0:v.validateEvent)||g.validateEvent);return watch(()=>g.modelValue,()=>{x.value&&(P==null||P.validate("change").catch(c=>debugWarn()))}),{handleChange:w,onClickRoot:k}},useCheckboxModel=g=>{const r=ref(!1),{emit:t}=getCurrentInstance(),e=inject(checkboxGroupContextKey,void 0),n=computed(()=>isUndefined(e)===!1),l=ref(!1);return{model:computed({get(){var P,T;return n.value?(P=e==null?void 0:e.modelValue)==null?void 0:P.value:(T=g.modelValue)!=null?T:r.value},set(P){var T,m;n.value&&isArray$1(P)?(l.value=((T=e==null?void 0:e.max)==null?void 0:T.value)!==void 0&&P.length>(e==null?void 0:e.max.value),l.value===!1&&((m=e==null?void 0:e.changeEvent)==null||m.call(e,P))):(t(UPDATE_MODEL_EVENT,P),r.value=P)}}),isGroup:n,isLimitExceeded:l}},useCheckboxStatus=(g,r,{model:t})=>{const e=inject(checkboxGroupContextKey,void 0),n=ref(!1),l=computed(()=>{const m=t.value;return isBoolean(m)?m:isArray$1(m)?isObject(g.label)?m.map(toRaw).some(p=>isEqual(p,g.label)):m.map(toRaw).includes(g.label):m!=null?m===g.trueLabel:!!m}),v=useFormSize(computed(()=>{var m;return(m=e==null?void 0:e.size)==null?void 0:m.value}),{prop:!0}),P=useFormSize(computed(()=>{var m;return(m=e==null?void 0:e.size)==null?void 0:m.value})),T=computed(()=>!!r.default||!isNil(g.label));return{checkboxButtonSize:v,isChecked:l,isFocused:n,checkboxSize:P,hasOwnLabel:T}},setStoreValue=(g,{model:r})=>{function t(){isArray$1(r.value)&&!r.value.includes(g.label)?r.value.push(g.label):r.value=g.trueLabel||!0}g.checked&&t()},useCheckbox=(g,r)=>{const{formItem:t}=useFormItem(),{model:e,isGroup:n,isLimitExceeded:l}=useCheckboxModel(g),{isFocused:v,isChecked:P,checkboxButtonSize:T,checkboxSize:m,hasOwnLabel:p}=useCheckboxStatus(g,r,{model:e}),{isDisabled:w}=useCheckboxDisabled({model:e,isChecked:P}),{inputId:k,isLabeledByFormItem:x}=useFormItemInputId(g,{formItemContext:t,disableIdGeneration:p,disableIdManagement:n}),{handleChange:c,onClickRoot:o}=useCheckboxEvent(g,{model:e,isLimitExceeded:l,hasOwnLabel:p,isDisabled:w,isLabeledByFormItem:x});return setStoreValue(g,{model:e}),{inputId:k,isLabeledByFormItem:x,isChecked:P,isDisabled:w,isFocused:v,checkboxButtonSize:T,checkboxSize:m,hasOwnLabel:p,model:e,handleChange:c,onClickRoot:o}},_hoisted_1$1=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],_hoisted_2$1=["id","indeterminate","disabled","value","name","tabindex"],__default__$2=defineComponent({name:"ElCheckbox"}),_sfc_main$2=defineComponent(ue(oe({},__default__$2),{props:checkboxProps,emits:checkboxEmits,setup(g){const r=g,t=useSlots(),{inputId:e,isLabeledByFormItem:n,isChecked:l,isDisabled:v,isFocused:P,checkboxSize:T,hasOwnLabel:m,model:p,handleChange:w,onClickRoot:k}=useCheckbox(r,t),x=useNamespace("checkbox"),c=computed(()=>[x.b(),x.m(T.value),x.is("disabled",v.value),x.is("bordered",r.border),x.is("checked",l.value)]),o=computed(()=>[x.e("input"),x.is("disabled",v.value),x.is("checked",l.value),x.is("indeterminate",r.indeterminate),x.is("focus",P.value)]);return(i,d)=>(openBlock(),createBlock(resolveDynamicComponent(!unref(m)&&unref(n)?"span":"label"),{class:normalizeClass(unref(c)),"aria-controls":i.indeterminate?i.controls:null,onClick:unref(k)},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(unref(o))},[i.trueLabel||i.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,id:unref(e),"onUpdate:modelValue":d[0]||(d[0]=C=>isRef(p)?p.value=C:null),class:normalizeClass(unref(x).e("original")),type:"checkbox",indeterminate:i.indeterminate,name:i.name,tabindex:i.tabindex,disabled:unref(v),"true-value":i.trueLabel,"false-value":i.falseLabel,onChange:d[1]||(d[1]=(...C)=>unref(w)&&unref(w)(...C)),onFocus:d[2]||(d[2]=C=>P.value=!0),onBlur:d[3]||(d[3]=C=>P.value=!1),onClick:d[4]||(d[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1$1)),[[vModelCheckbox,unref(p)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,id:unref(e),"onUpdate:modelValue":d[5]||(d[5]=C=>isRef(p)?p.value=C:null),class:normalizeClass(unref(x).e("original")),type:"checkbox",indeterminate:i.indeterminate,disabled:unref(v),value:i.label,name:i.name,tabindex:i.tabindex,onChange:d[6]||(d[6]=(...C)=>unref(w)&&unref(w)(...C)),onFocus:d[7]||(d[7]=C=>P.value=!0),onBlur:d[8]||(d[8]=C=>P.value=!1),onClick:d[9]||(d[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2$1)),[[vModelCheckbox,unref(p)]]),createBaseVNode("span",{class:normalizeClass(unref(x).e("inner"))},null,2)],2),unref(m)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(unref(x).e("label"))},[renderSlot(i.$slots,"default"),i.$slots.default?createCommentVNode("v-if",!0):(openBlock(),createElementBlock(Fragment,{key:0},[createTextVNode(toDisplayString(i.label),1)],64))],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}}));var Checkbox=_export_sfc(_sfc_main$2,[["__file","checkbox.vue"]]);const _hoisted_1=["name","tabindex","disabled","true-value","false-value"],_hoisted_2=["name","tabindex","disabled","value"],__default__$1=defineComponent({name:"ElCheckboxButton"}),_sfc_main$1=defineComponent(ue(oe({},__default__$1),{props:checkboxProps,emits:checkboxEmits,setup(g){const r=g,t=useSlots(),{isFocused:e,isChecked:n,isDisabled:l,checkboxButtonSize:v,model:P,handleChange:T}=useCheckbox(r,t),m=inject(checkboxGroupContextKey,void 0),p=useNamespace("checkbox"),w=computed(()=>{var x,c,o,i;const d=(c=(x=m==null?void 0:m.fill)==null?void 0:x.value)!=null?c:"";return{backgroundColor:d,borderColor:d,color:(i=(o=m==null?void 0:m.textColor)==null?void 0:o.value)!=null?i:"",boxShadow:d?`-1px 0 0 0 ${d}`:void 0}}),k=computed(()=>[p.b("button"),p.bm("button",v.value),p.is("disabled",l.value),p.is("checked",n.value),p.is("focus",e.value)]);return(x,c)=>(openBlock(),createElementBlock("label",{class:normalizeClass(unref(k))},[x.trueLabel||x.falseLabel?withDirectives((openBlock(),createElementBlock("input",{key:0,"onUpdate:modelValue":c[0]||(c[0]=o=>isRef(P)?P.value=o:null),class:normalizeClass(unref(p).be("button","original")),type:"checkbox",name:x.name,tabindex:x.tabindex,disabled:unref(l),"true-value":x.trueLabel,"false-value":x.falseLabel,onChange:c[1]||(c[1]=(...o)=>unref(T)&&unref(T)(...o)),onFocus:c[2]||(c[2]=o=>e.value=!0),onBlur:c[3]||(c[3]=o=>e.value=!1),onClick:c[4]||(c[4]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_1)),[[vModelCheckbox,unref(P)]]):withDirectives((openBlock(),createElementBlock("input",{key:1,"onUpdate:modelValue":c[5]||(c[5]=o=>isRef(P)?P.value=o:null),class:normalizeClass(unref(p).be("button","original")),type:"checkbox",name:x.name,tabindex:x.tabindex,disabled:unref(l),value:x.label,onChange:c[6]||(c[6]=(...o)=>unref(T)&&unref(T)(...o)),onFocus:c[7]||(c[7]=o=>e.value=!0),onBlur:c[8]||(c[8]=o=>e.value=!1),onClick:c[9]||(c[9]=withModifiers(()=>{},["stop"]))},null,42,_hoisted_2)),[[vModelCheckbox,unref(P)]]),x.$slots.default||x.label?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(unref(p).be("button","inner")),style:normalizeStyle(unref(n)?unref(w):void 0)},[renderSlot(x.$slots,"default",{},()=>[createTextVNode(toDisplayString(x.label),1)])],6)):createCommentVNode("v-if",!0)],2))}}));var CheckboxButton=_export_sfc(_sfc_main$1,[["__file","checkbox-button.vue"]]);const checkboxGroupProps=buildProps({modelValue:{type:definePropType(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:useSizeProp,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),checkboxGroupEmits={[UPDATE_MODEL_EVENT]:g=>isArray$1(g),change:g=>isArray$1(g)},__default__=defineComponent({name:"ElCheckboxGroup"}),_sfc_main=defineComponent(ue(oe({},__default__),{props:checkboxGroupProps,emits:checkboxGroupEmits,setup(g,{emit:r}){const t=g,e=useNamespace("checkbox"),{formItem:n}=useFormItem(),{inputId:l,isLabeledByFormItem:v}=useFormItemInputId(t,{formItemContext:n}),P=m=>ee(this,null,function*(){r(UPDATE_MODEL_EVENT,m),yield nextTick(),r("change",m)}),T=computed({get(){return t.modelValue},set(m){P(m)}});return provide(checkboxGroupContextKey,ue(oe({},pick$1(toRefs(t),["size","min","max","disabled","validateEvent","fill","textColor"])),{modelValue:T,changeEvent:P})),watch(()=>t.modelValue,()=>{t.validateEvent&&(n==null||n.validate("change").catch(m=>debugWarn()))}),(m,p)=>{var w;return openBlock(),createBlock(resolveDynamicComponent(m.tag),{id:unref(l),class:normalizeClass(unref(e).b("group")),role:"group","aria-label":unref(v)?void 0:m.label||"checkbox-group","aria-labelledby":unref(v)?(w=unref(n))==null?void 0:w.labelId:void 0},{default:withCtx(()=>[renderSlot(m.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}}));var CheckboxGroup=_export_sfc(_sfc_main,[["__file","checkbox-group.vue"]]);const ElCheckbox=withInstall(Checkbox,{CheckboxButton,CheckboxGroup});withNoopInstall(CheckboxButton);withNoopInstall(CheckboxGroup);const elCheckbox="";function commonjsRequire(g){throw new Error('Could not dynamically require "'+g+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(__viteBrowserExternal$1);var path2dPolyfill_esm={},hasRequiredPath2dPolyfill_esm;function requirePath2dPolyfill_esm(){if(hasRequiredPath2dPolyfill_esm)return path2dPolyfill_esm;hasRequiredPath2dPolyfill_esm=1;function g(c,o,i){if(i||arguments.length===2)for(var d=0,C=o.length,O;d<C;d++)(O||!(d in o))&&(O||(O=Array.prototype.slice.call(o,0,d)),O[d]=o[d]);return c.concat(O||Array.prototype.slice.call(o))}var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,e=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function n(c){var o=c.match(e);return o?o.map(Number):[]}function l(c){var o=[],i=String(c).trim();return i[0]!=="M"&&i[0]!=="m"||i.replace(t,function(d,C,O){var M=n(O),f=C.toLowerCase(),A=C;if(f==="m"&&M.length>2&&(o.push(g([A],M.splice(0,2),!0)),f="l",A=A==="m"?"l":"L"),M.length<r[f])return"";for(o.push(g([A],M.splice(0,r[f]),!0));M.length>=r[f]&&M.length&&r[f];)o.push(g([A],M.splice(0,r[f]),!0));return""}),o}function v(c,o){var i=c.x*Math.cos(o)-c.y*Math.sin(o),d=c.y*Math.cos(o)+c.x*Math.sin(o);c.x=i,c.y=d}function P(c,o,i){c.x+=o,c.y+=i}function T(c,o){c.x*=o,c.y*=o}var m=function(){function c(o){var i;this.commands=[],o&&o instanceof c?(i=this.commands).push.apply(i,o.commands):o&&(this.commands=l(o))}return c.prototype.addPath=function(o){var i;o&&o instanceof c&&(i=this.commands).push.apply(i,o.commands)},c.prototype.moveTo=function(o,i){this.commands.push(["M",o,i])},c.prototype.lineTo=function(o,i){this.commands.push(["L",o,i])},c.prototype.arc=function(o,i,d,C,O,M){this.commands.push(["AC",o,i,d,C,O,!!M])},c.prototype.arcTo=function(o,i,d,C,O){this.commands.push(["AT",o,i,d,C,O])},c.prototype.ellipse=function(o,i,d,C,O,M,f,A){this.commands.push(["E",o,i,d,C,O,M,f,!!A])},c.prototype.closePath=function(){this.commands.push(["Z"])},c.prototype.bezierCurveTo=function(o,i,d,C,O,M){this.commands.push(["C",o,i,d,C,O,M])},c.prototype.quadraticCurveTo=function(o,i,d,C){this.commands.push(["Q",o,i,d,C])},c.prototype.rect=function(o,i,d,C){this.commands.push(["R",o,i,d,C])},c.prototype.roundRect=function(o,i,d,C,O){typeof O=="undefined"?this.commands.push(["RR",o,i,d,C,0]):this.commands.push(["RR",o,i,d,C,O])},c}();function p(c,o){var i=0,d=0,C,O,M,f,A,L,F,S,N,D,G,K,U,_,et,rt,Y,st,gt,At,wt,W=null,u=null,y=null,a=null,b=null,E=null;c.beginPath();for(var I=0;I<o.length;++I){st=o[I][0],st!=="S"&&st!=="s"&&st!=="C"&&st!=="c"&&(W=null,u=null),st!=="T"&&st!=="t"&&st!=="Q"&&st!=="q"&&(y=null,a=null);var R=void 0;switch(st){case"m":case"M":R=o[I],st==="m"?(i+=R[1],d+=R[2]):(i=R[1],d=R[2]),(st==="M"||!b)&&(b={x:i,y:d}),c.moveTo(i,d);break;case"l":R=o[I],i+=R[1],d+=R[2],c.lineTo(i,d);break;case"L":R=o[I],i=R[1],d=R[2],c.lineTo(i,d);break;case"H":R=o[I],i=R[1],c.lineTo(i,d);break;case"h":R=o[I],i+=R[1],c.lineTo(i,d);break;case"V":R=o[I],d=R[1],c.lineTo(i,d);break;case"v":R=o[I],d+=R[1],c.lineTo(i,d);break;case"a":case"A":if(R=o[I],E===null)throw new Error("This should never happen");st==="a"?(i+=R[6],d+=R[7]):(i=R[6],d=R[7]),_=R[1],et=R[2],F=R[3]*Math.PI/180,M=!!R[4],f=!!R[5],A={x:i,y:d},L={x:(E.x-A.x)/2,y:(E.y-A.y)/2},v(L,-F),S=L.x*L.x/(_*_)+L.y*L.y/(et*et),S>1&&(S=Math.sqrt(S),_*=S,et*=S),gt={x:_*L.y/et,y:-(et*L.x)/_},N=_*_*et*et,D=_*_*L.y*L.y+et*et*L.x*L.x,f!==M?T(gt,Math.sqrt((N-D)/D)||0):T(gt,-Math.sqrt((N-D)/D)||0),O=Math.atan2((L.y-gt.y)/et,(L.x-gt.x)/_),C=Math.atan2(-(L.y+gt.y)/et,-(L.x+gt.x)/_),v(gt,F),P(gt,(A.x+E.x)/2,(A.y+E.y)/2),c.save(),c.translate(gt.x,gt.y),c.rotate(F),c.scale(_,et),c.arc(0,0,1,O,C,!f),c.restore();break;case"C":R=o[I],W=R[3],u=R[4],i=R[5],d=R[6],c.bezierCurveTo(R[1],R[2],W,u,i,d);break;case"c":R=o[I],c.bezierCurveTo(R[1]+i,R[2]+d,R[3]+i,R[4]+d,R[5]+i,R[6]+d),W=R[3]+i,u=R[4]+d,i+=R[5],d+=R[6];break;case"S":R=o[I],(W===null||u===null)&&(W=i,u=d),c.bezierCurveTo(2*i-W,2*d-u,R[1],R[2],R[3],R[4]),W=R[1],u=R[2],i=R[3],d=R[4];break;case"s":R=o[I],(W===null||u===null)&&(W=i,u=d),c.bezierCurveTo(2*i-W,2*d-u,R[1]+i,R[2]+d,R[3]+i,R[4]+d),W=R[1]+i,u=R[2]+d,i+=R[3],d+=R[4];break;case"Q":R=o[I],y=R[1],a=R[2],i=R[3],d=R[4],c.quadraticCurveTo(y,a,i,d);break;case"q":R=o[I],y=R[1]+i,a=R[2]+d,i+=R[3],d+=R[4],c.quadraticCurveTo(y,a,i,d);break;case"T":R=o[I],(y===null||a===null)&&(y=i,a=d),y=2*i-y,a=2*d-a,i=R[1],d=R[2],c.quadraticCurveTo(y,a,i,d);break;case"t":R=o[I],(y===null||a===null)&&(y=i,a=d),y=2*i-y,a=2*d-a,i+=R[1],d+=R[2],c.quadraticCurveTo(y,a,i,d);break;case"z":case"Z":b&&(i=b.x,d=b.y),b=null,c.closePath();break;case"AC":R=o[I],i=R[1],d=R[2],U=R[3],O=R[4],C=R[5],At=R[6],c.arc(i,d,U,O,C,At);break;case"AT":R=o[I],G=R[1],K=R[2],i=R[3],d=R[4],U=R[5],c.arcTo(G,K,i,d,U);break;case"E":R=o[I],i=R[1],d=R[2],_=R[3],et=R[4],F=R[5],O=R[6],C=R[7],At=R[8],c.save(),c.translate(i,d),c.rotate(F),c.scale(_,et),c.arc(0,0,1,O,C,At),c.restore();break;case"R":R=o[I],i=R[1],d=R[2],rt=R[3],Y=R[4],b={x:i,y:d},c.rect(i,d,rt,Y);break;case"RR":R=o[I],i=R[1],d=R[2],rt=R[3],Y=R[4],wt=R[5],b={x:i,y:d},c.roundRect(i,d,rt,Y,wt);break}E?(E.x=i,E.y=d):E={x:i,y:d}}}function w(c){if(!(!c||!c.CanvasRenderingContext2D||c.Path2D)){var o=c.CanvasRenderingContext2D,i=o.prototype.fill,d=o.prototype.stroke,C=o.prototype.isPointInPath;o.prototype.fill=function(){for(var M=[],f=0;f<arguments.length;f++)M[f]=arguments[f];if(M[0]instanceof m){var A=M[0],L=M[1]||"nonzero";p(this,A.commands),i.apply(this,[L])}else{var L=M[0]||"nonzero";return i.apply(this,[L])}},o.prototype.stroke=function(M){M&&p(this,M.commands),d.apply(this)},o.prototype.isPointInPath=function(){for(var M=[],f=0;f<arguments.length;f++)M[f]=arguments[f];if(M[0]instanceof m){var A=M[0],L=M[1],F=M[2],S=M[3]||"nonzero";return p(this,A.commands),C.apply(this,[L,F,S])}else return C.apply(this,M)},c.Path2D=m}}function k(c,o,i,d,C){var O=this;if(C===void 0&&(C=0),typeof C=="number"&&(C=[C]),Array.isArray(C)){if(C.length===0||C.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(C.length," radii provided. Between one and four radii are necessary."));C.forEach(function(S){if(S<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(O.constructor.name,"': Radius value ").concat(S," is negative."))})}else return;if(C.length===1&&C[0]===0)return this.rect(c,o,i,d);var M=Math.min(i,d)/2,f,A,L,F=f=A=L=Math.min(M,C[0]);C.length===2&&(f=L=Math.min(M,C[1])),C.length===3&&(f=L=Math.min(M,C[1]),A=Math.min(M,C[2])),C.length===4&&(f=Math.min(M,C[1]),A=Math.min(M,C[2]),L=Math.min(M,C[3])),this.moveTo(c,o+d-L),this.arcTo(c,o,c+F,o,F),this.arcTo(c+i,o,c+i,o+f,f),this.arcTo(c+i,o+d,c+i-A,o+d,A),this.arcTo(c,o+d,c,o+d-L,L),this.moveTo(c,o)}function x(c){if(!(!c||!c.CanvasRenderingContext2D)){var o=c.CanvasRenderingContext2D,i=c.Path2D;o&&!o.prototype.roundRect&&(o.prototype.roundRect=k),i&&!i.prototype.roundRect&&(i.prototype.roundRect=k)}}return w(window),x(window),path2dPolyfill_esm}(function(module,exports){(function(r,t){module.exports=r.pdfjsLib=t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(g,r,t)=>{var Gt;Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.RenderingIntentFlag=r.PromiseCapability=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.MAX_IMAGE_SIZE_TO_CACHE=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.BASELINE_FACTOR=r.AnnotationType=r.AnnotationReplyType=r.AnnotationPrefix=r.AnnotationMode=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.assert=gt,r.bytesToString=tt,r.createValidAbsoluteUrl=wt,r.getModificationDate=Ht,r.getUuid=Jt,r.getVerbosityLevel=et,r.info=rt,r.isArrayBuffer=It,r.isArrayEqual=Rt,r.isNodeJS=void 0,r.normalizeUnicode=Kt,r.objectFromMap=Et,r.objectSize=ut,r.setVerbosityLevel=_,r.shadow=W,r.string32=ct,r.stringToBytes=q,r.stringToPDFString=ht,r.stringToUTF8String=it,r.unreachable=st,r.utf8StringToString=dt,r.warn=Y,t(2),t(84),t(86),t(87),t(89),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);const e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");r.isNodeJS=e;const n=[1,0,0,1,0,0];r.IDENTITY_MATRIX=n;const l=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=l;const v=1e7;r.MAX_IMAGE_SIZE_TO_CACHE=v;const P=1.35;r.LINE_FACTOR=P;const T=.35;r.LINE_DESCENT_FACTOR=T;const m=T/P;r.BASELINE_FACTOR=m;const p={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.RenderingIntentFlag=p;const w={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationMode=w;const k="pdfjs_internal_editor_";r.AnnotationEditorPrefix=k;const x={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};r.AnnotationEditorType=x;const c={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};r.AnnotationEditorParamsType=c;const o={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=o;const i={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=i;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=d;const C={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=C;const O={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=O;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=M;const f={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=f;const A={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=A;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.AnnotationActionEventType=L;const F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.DocumentActionEventType=F;const S={O:"PageOpen",C:"PageClose"};r.PageActionEventType=S;const N={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=N;const D={NONE:0,BINARY:1};r.CMapCompressionType=D;const G={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=G;const K={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=K;let U=N.WARNINGS;function _(bt){Number.isInteger(bt)&&(U=bt)}function et(){return U}function rt(bt){U>=N.INFOS&&console.log(`Info: ${bt}`)}function Y(bt){U>=N.WARNINGS&&console.log(`Warning: ${bt}`)}function st(bt){throw new Error(bt)}function gt(bt,Z){bt||st(Z)}function At(bt){switch(bt==null?void 0:bt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wt(bt){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!bt)return null;try{if(J&&typeof bt=="string"){if(J.addDefaultProtocol&&bt.startsWith("www.")){const jt=bt.match(/\./g);(jt==null?void 0:jt.length)>=2&&(bt=`http://${bt}`)}if(J.tryConvertEncoding)try{bt=it(bt)}catch(jt){}}const ft=Z?new URL(bt,Z):new URL(bt);if(At(ft))return ft}catch(ft){}return null}function W(bt,Z,J){let ft=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Object.defineProperty(bt,Z,{value:J,enumerable:!ft,configurable:!0,writable:!1}),J}const u=function(){function Z(J,ft){this.constructor===Z&&st("Cannot initialize BaseException."),this.message=J,this.name=ft}return Z.prototype=new Error,Z.constructor=Z,Z}();r.BaseException=u;class y extends u{constructor(Z,J){super(Z,"PasswordException"),this.code=J}}r.PasswordException=y;class a extends u{constructor(Z,J){super(Z,"UnknownErrorException"),this.details=J}}r.UnknownErrorException=a;class b extends u{constructor(Z){super(Z,"InvalidPDFException")}}r.InvalidPDFException=b;class E extends u{constructor(Z){super(Z,"MissingPDFException")}}r.MissingPDFException=E;class I extends u{constructor(Z,J){super(Z,"UnexpectedResponseException"),this.status=J}}r.UnexpectedResponseException=I;class R extends u{constructor(Z){super(Z,"FormatError")}}r.FormatError=R;class H extends u{constructor(Z){super(Z,"AbortException")}}r.AbortException=H;function tt(bt){(typeof bt!="object"||(bt==null?void 0:bt.length)===void 0)&&st("Invalid argument for bytesToString");const Z=bt.length,J=8192;if(Z<J)return String.fromCharCode.apply(null,bt);const ft=[];for(let jt=0;jt<Z;jt+=J){const ot=Math.min(jt+J,Z),$=bt.subarray(jt,ot);ft.push(String.fromCharCode.apply(null,$))}return ft.join("")}function q(bt){typeof bt!="string"&&st("Invalid argument for stringToBytes");const Z=bt.length,J=new Uint8Array(Z);for(let ft=0;ft<Z;++ft)J[ft]=bt.charCodeAt(ft)&255;return J}function ct(bt){return String.fromCharCode(bt>>24&255,bt>>16&255,bt>>8&255,bt&255)}function ut(bt){return Object.keys(bt).length}function Et(bt){const Z=Object.create(null);for(const[J,ft]of bt)Z[J]=ft;return Z}function mt(){const bt=new Uint8Array(4);return bt[0]=1,new Uint32Array(bt.buffer,0,1)[0]===1}function Ot(){try{return new Function(""),!0}catch(bt){return!1}}class Wt{static get isLittleEndian(){return W(this,"isLittleEndian",mt())}static get isEvalSupported(){return W(this,"isEvalSupported",Ot())}static get isOffscreenCanvasSupported(){return W(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}static get platform(){return typeof navigator=="undefined"?W(this,"platform",{isWin:!1,isMac:!1}):W(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Z,J;return W(this,"isCSSRoundSupported",(J=(Z=globalThis.CSS)==null?void 0:Z.supports)==null?void 0:J.call(Z,"width: round(1.5px, 1px)"))}}r.FeatureTest=Wt;const Pt=[...Array(256).keys()].map(bt=>bt.toString(16).padStart(2,"0"));class Nt{static makeHexColor(Z,J,ft){return`#${Pt[Z]}${Pt[J]}${Pt[ft]}`}static scaleMinMax(Z,J){let ft;Z[0]?(Z[0]<0&&(ft=J[0],J[0]=J[1],J[1]=ft),J[0]*=Z[0],J[1]*=Z[0],Z[3]<0&&(ft=J[2],J[2]=J[3],J[3]=ft),J[2]*=Z[3],J[3]*=Z[3]):(ft=J[0],J[0]=J[2],J[2]=ft,ft=J[1],J[1]=J[3],J[3]=ft,Z[1]<0&&(ft=J[2],J[2]=J[3],J[3]=ft),J[2]*=Z[1],J[3]*=Z[1],Z[2]<0&&(ft=J[0],J[0]=J[1],J[1]=ft),J[0]*=Z[2],J[1]*=Z[2]),J[0]+=Z[4],J[1]+=Z[4],J[2]+=Z[5],J[3]+=Z[5]}static transform(Z,J){return[Z[0]*J[0]+Z[2]*J[1],Z[1]*J[0]+Z[3]*J[1],Z[0]*J[2]+Z[2]*J[3],Z[1]*J[2]+Z[3]*J[3],Z[0]*J[4]+Z[2]*J[5]+Z[4],Z[1]*J[4]+Z[3]*J[5]+Z[5]]}static applyTransform(Z,J){const ft=Z[0]*J[0]+Z[1]*J[2]+J[4],jt=Z[0]*J[1]+Z[1]*J[3]+J[5];return[ft,jt]}static applyInverseTransform(Z,J){const ft=J[0]*J[3]-J[1]*J[2],jt=(Z[0]*J[3]-Z[1]*J[2]+J[2]*J[5]-J[4]*J[3])/ft,ot=(-Z[0]*J[1]+Z[1]*J[0]+J[4]*J[1]-J[5]*J[0])/ft;return[jt,ot]}static getAxialAlignedBoundingBox(Z,J){const ft=this.applyTransform(Z,J),jt=this.applyTransform(Z.slice(2,4),J),ot=this.applyTransform([Z[0],Z[3]],J),$=this.applyTransform([Z[2],Z[1]],J);return[Math.min(ft[0],jt[0],ot[0],$[0]),Math.min(ft[1],jt[1],ot[1],$[1]),Math.max(ft[0],jt[0],ot[0],$[0]),Math.max(ft[1],jt[1],ot[1],$[1])]}static inverseTransform(Z){const J=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/J,-Z[1]/J,-Z[2]/J,Z[0]/J,(Z[2]*Z[5]-Z[4]*Z[3])/J,(Z[4]*Z[1]-Z[5]*Z[0])/J]}static singularValueDecompose2dScale(Z){const J=[Z[0],Z[2],Z[1],Z[3]],ft=Z[0]*J[0]+Z[1]*J[2],jt=Z[0]*J[1]+Z[1]*J[3],ot=Z[2]*J[0]+Z[3]*J[2],$=Z[2]*J[1]+Z[3]*J[3],pt=(ft+$)/2,xt=Math.sqrt($e(ft+$,2)-4*(ft*$-ot*jt))/2,St=pt+xt||1,kt=pt-xt||1;return[Math.sqrt(St),Math.sqrt(kt)]}static normalizeRect(Z){const J=Z.slice(0);return Z[0]>Z[2]&&(J[0]=Z[2],J[2]=Z[0]),Z[1]>Z[3]&&(J[1]=Z[3],J[3]=Z[1]),J}static intersect(Z,J){const ft=Math.max(Math.min(Z[0],Z[2]),Math.min(J[0],J[2])),jt=Math.min(Math.max(Z[0],Z[2]),Math.max(J[0],J[2]));if(ft>jt)return null;const ot=Math.max(Math.min(Z[1],Z[3]),Math.min(J[1],J[3])),$=Math.min(Math.max(Z[1],Z[3]),Math.max(J[1],J[3]));return ot>$?null:[ft,ot,jt,$]}static bezierBoundingBox(Z,J,ft,jt,ot,$,pt,xt){const St=[],kt=[[],[]];let vt,$t,Tt,Lt,Dt,z,h,B;for(let lt=0;lt<2;++lt){if(lt===0?($t=6*Z-12*ft+6*ot,vt=-3*Z+9*ft-9*ot+3*pt,Tt=3*ft-3*Z):($t=6*J-12*jt+6*$,vt=-3*J+9*jt-9*$+3*xt,Tt=3*jt-3*J),Math.abs(vt)<1e-12){if(Math.abs($t)<1e-12)continue;Lt=-Tt/$t,0<Lt&&Lt<1&&St.push(Lt);continue}h=$t*$t-4*Tt*vt,B=Math.sqrt(h),!(h<0)&&(Dt=(-$t+B)/(2*vt),0<Dt&&Dt<1&&St.push(Dt),z=(-$t-B)/(2*vt),0<z&&z<1&&St.push(z))}let V=St.length,Q;const nt=V;for(;V--;)Lt=St[V],Q=1-Lt,kt[0][V]=Q*Q*Q*Z+3*Q*Q*Lt*ft+3*Q*Lt*Lt*ot+Lt*Lt*Lt*pt,kt[1][V]=Q*Q*Q*J+3*Q*Q*Lt*jt+3*Q*Lt*Lt*$+Lt*Lt*Lt*xt;return kt[0][nt]=Z,kt[1][nt]=J,kt[0][nt+1]=pt,kt[1][nt+1]=xt,kt[0].length=kt[1].length=nt+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}r.Util=Nt;const yt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ht(bt){if(bt[0]>="ï"){let J;if(bt[0]==="þ"&&bt[1]==="ÿ"?J="utf-16be":bt[0]==="ÿ"&&bt[1]==="þ"?J="utf-16le":bt[0]==="ï"&&bt[1]==="»"&&bt[2]==="¿"&&(J="utf-8"),J)try{const ft=new TextDecoder(J,{fatal:!0}),jt=q(bt);return ft.decode(jt)}catch(ft){Y(`stringToPDFString: "${ft}".`)}}const Z=[];for(let J=0,ft=bt.length;J<ft;J++){const jt=yt[bt.charCodeAt(J)];Z.push(jt?String.fromCharCode(jt):bt.charAt(J))}return Z.join("")}function it(bt){return decodeURIComponent(escape(bt))}function dt(bt){return unescape(encodeURIComponent(bt))}function It(bt){return typeof bt=="object"&&(bt==null?void 0:bt.byteLength)!==void 0}function Rt(bt,Z){if(bt.length!==Z.length)return!1;for(let J=0,ft=bt.length;J<ft;J++)if(bt[J]!==Z[J])return!1;return!0}function Ht(){let bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[bt.getUTCFullYear().toString(),(bt.getUTCMonth()+1).toString().padStart(2,"0"),bt.getUTCDate().toString().padStart(2,"0"),bt.getUTCHours().toString().padStart(2,"0"),bt.getUTCMinutes().toString().padStart(2,"0"),bt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Xt{constructor(){X(this,Gt,!1);this.promise=new Promise((Z,J)=>{this.resolve=ft=>{at(this,Gt,!0),Z(ft)},this.reject=ft=>{at(this,Gt,!0),J(ft)}})}get settled(){return s(this,Gt)}}Gt=new WeakMap,r.PromiseCapability=Xt;let zt=null,Vt=null;function Kt(bt){return zt||(zt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vt=new Map([["ﬅ","ſt"]])),bt.replaceAll(zt,(Z,J,ft)=>J?J.normalize("NFKC"):Vt.get(ft))}function Jt(){if(typeof crypto!="undefined"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const bt=new Uint8Array(32);if(typeof crypto!="undefined"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(bt);else for(let Z=0;Z<32;Z++)bt[Z]=Math.floor(Math.random()*255);return tt(bt)}const Zt="pdfjs_internal_id_";r.AnnotationPrefix=Zt},(g,r,t)=>{var e=t(3),n=t(4),l=t(69),v=t(70),P="WebAssembly",T=n[P],m=Error("e",{cause:7}).cause!==7,p=function(k,x){var c={};c[k]=v(k,x,m),e({global:!0,constructor:!0,arity:1,forced:m},c)},w=function(k,x){if(T&&T[k]){var c={};c[k]=v(P+"."+k,x,m),e({target:P,stat:!0,constructor:!0,arity:1,forced:m},c)}};p("Error",function(k){return function(c){return l(k,this,arguments)}}),p("EvalError",function(k){return function(c){return l(k,this,arguments)}}),p("RangeError",function(k){return function(c){return l(k,this,arguments)}}),p("ReferenceError",function(k){return function(c){return l(k,this,arguments)}}),p("SyntaxError",function(k){return function(c){return l(k,this,arguments)}}),p("TypeError",function(k){return function(c){return l(k,this,arguments)}}),p("URIError",function(k){return function(c){return l(k,this,arguments)}}),w("CompileError",function(k){return function(c){return l(k,this,arguments)}}),w("LinkError",function(k){return function(c){return l(k,this,arguments)}}),w("RuntimeError",function(k){return function(c){return l(k,this,arguments)}})},(g,r,t)=>{var e=t(4),n=t(5).f,l=t(44),v=t(48),P=t(38),T=t(56),m=t(68);g.exports=function(p,w){var k=p.target,x=p.global,c=p.stat,o,i,d,C,O,M;if(x?i=e:c?i=e[k]||P(k,{}):i=(e[k]||{}).prototype,i)for(d in w){if(O=w[d],p.dontCallGetSet?(M=n(i,d),C=M&&M.value):C=i[d],o=m(x?d:k+(c?".":"#")+d,p.forced),!o&&C!==void 0){if(typeof O==typeof C)continue;T(O,C)}(p.sham||C&&C.sham)&&l(O,"sham",!0),v(i,d,O,p)}}},function(g){var r=function(t){return t&&t.Math===Math&&t};g.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||this||Function("return this")()},(g,r,t)=>{var e=t(6),n=t(8),l=t(10),v=t(11),P=t(12),T=t(18),m=t(39),p=t(42),w=Object.getOwnPropertyDescriptor;r.f=e?w:function(x,c){if(x=P(x),c=T(c),p)try{return w(x,c)}catch(o){}if(m(x,c))return v(!n(l.f,x,c),x[c])}},(g,r,t)=>{var e=t(7);g.exports=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},g=>{g.exports=function(r){try{return!!r()}catch(t){return!0}}},(g,r,t)=>{var e=t(9),n=Function.prototype.call;g.exports=e?n.bind(n):function(){return n.apply(n,arguments)}},(g,r,t)=>{var e=t(7);g.exports=!e(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")})},(g,r)=>{var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);r.f=n?function(v){var P=e(this,v);return!!P&&P.enumerable}:t},g=>{g.exports=function(r,t){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:t}}},(g,r,t)=>{var e=t(13),n=t(16);g.exports=function(l){return e(n(l))}},(g,r,t)=>{var e=t(14),n=t(7),l=t(15),v=Object,P=e("".split);g.exports=n(function(){return!v("z").propertyIsEnumerable(0)})?function(T){return l(T)==="String"?P(T,""):v(T)}:v},(g,r,t)=>{var e=t(9),n=Function.prototype,l=n.call,v=e&&n.bind.bind(l,l);g.exports=e?v:function(P){return function(){return l.apply(P,arguments)}}},(g,r,t)=>{var e=t(14),n=e({}.toString),l=e("".slice);g.exports=function(v){return l(n(v),8,-1)}},(g,r,t)=>{var e=t(17),n=TypeError;g.exports=function(l){if(e(l))throw n("Can't call method on "+l);return l}},g=>{g.exports=function(r){return r==null}},(g,r,t)=>{var e=t(19),n=t(23);g.exports=function(l){var v=e(l,"string");return n(v)?v:v+""}},(g,r,t)=>{var e=t(8),n=t(20),l=t(23),v=t(30),P=t(33),T=t(34),m=TypeError,p=T("toPrimitive");g.exports=function(w,k){if(!n(w)||l(w))return w;var x=v(w,p),c;if(x){if(k===void 0&&(k="default"),c=e(x,w,k),!n(c)||l(c))return c;throw m("Can't convert object to primitive value")}return k===void 0&&(k="number"),P(w,k)}},(g,r,t)=>{var e=t(21),n=t(22),l=n.all;g.exports=n.IS_HTMLDDA?function(v){return typeof v=="object"?v!==null:e(v)||v===l}:function(v){return typeof v=="object"?v!==null:e(v)}},(g,r,t)=>{var e=t(22),n=e.all;g.exports=e.IS_HTMLDDA?function(l){return typeof l=="function"||l===n}:function(l){return typeof l=="function"}},g=>{var r=typeof document=="object"&&document.all,t=typeof r=="undefined"&&r!==void 0;g.exports={all:r,IS_HTMLDDA:t}},(g,r,t)=>{var e=t(24),n=t(21),l=t(25),v=t(26),P=Object;g.exports=v?function(T){return typeof T=="symbol"}:function(T){var m=e("Symbol");return n(m)&&l(m.prototype,P(T))}},(g,r,t)=>{var e=t(4),n=t(21),l=function(v){return n(v)?v:void 0};g.exports=function(v,P){return arguments.length<2?l(e[v]):e[v]&&e[v][P]}},(g,r,t)=>{var e=t(14);g.exports=e({}.isPrototypeOf)},(g,r,t)=>{var e=t(27);g.exports=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(g,r,t)=>{var e=t(28),n=t(7),l=t(4),v=l.String;g.exports=!!Object.getOwnPropertySymbols&&!n(function(){var P=Symbol("symbol detection");return!v(P)||!(Object(P)instanceof Symbol)||!Symbol.sham&&e&&e<41})},(g,r,t)=>{var e=t(4),n=t(29),l=e.process,v=e.Deno,P=l&&l.versions||v&&v.version,T=P&&P.v8,m,p;T&&(m=T.split("."),p=m[0]>0&&m[0]<4?1:+(m[0]+m[1])),!p&&n&&(m=n.match(/Edge\/(\d+)/),(!m||m[1]>=74)&&(m=n.match(/Chrome\/(\d+)/),m&&(p=+m[1]))),g.exports=p},g=>{g.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""},(g,r,t)=>{var e=t(31),n=t(17);g.exports=function(l,v){var P=l[v];return n(P)?void 0:e(P)}},(g,r,t)=>{var e=t(21),n=t(32),l=TypeError;g.exports=function(v){if(e(v))return v;throw l(n(v)+" is not a function")}},g=>{var r=String;g.exports=function(t){try{return r(t)}catch(e){return"Object"}}},(g,r,t)=>{var e=t(8),n=t(21),l=t(20),v=TypeError;g.exports=function(P,T){var m,p;if(T==="string"&&n(m=P.toString)&&!l(p=e(m,P))||n(m=P.valueOf)&&!l(p=e(m,P))||T!=="string"&&n(m=P.toString)&&!l(p=e(m,P)))return p;throw v("Can't convert object to primitive value")}},(g,r,t)=>{var e=t(4),n=t(35),l=t(39),v=t(41),P=t(27),T=t(26),m=e.Symbol,p=n("wks"),w=T?m.for||m:m&&m.withoutSetter||v;g.exports=function(k){return l(p,k)||(p[k]=P&&l(m,k)?m[k]:w("Symbol."+k)),p[k]}},(g,r,t)=>{var e=t(36),n=t(37);(g.exports=function(l,v){return n[l]||(n[l]=v!==void 0?v:{})})("versions",[]).push({version:"3.32.2",mode:e?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},g=>{g.exports=!1},(g,r,t)=>{var e=t(4),n=t(38),l="__core-js_shared__",v=e[l]||n(l,{});g.exports=v},(g,r,t)=>{var e=t(4),n=Object.defineProperty;g.exports=function(l,v){try{n(e,l,{value:v,configurable:!0,writable:!0})}catch(P){e[l]=v}return v}},(g,r,t)=>{var e=t(14),n=t(40),l=e({}.hasOwnProperty);g.exports=Object.hasOwn||function(P,T){return l(n(P),T)}},(g,r,t)=>{var e=t(16),n=Object;g.exports=function(l){return n(e(l))}},(g,r,t)=>{var e=t(14),n=0,l=Math.random(),v=e(1 .toString);g.exports=function(P){return"Symbol("+(P===void 0?"":P)+")_"+v(++n+l,36)}},(g,r,t)=>{var e=t(6),n=t(7),l=t(43);g.exports=!e&&!n(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!==7})},(g,r,t)=>{var e=t(4),n=t(20),l=e.document,v=n(l)&&n(l.createElement);g.exports=function(P){return v?l.createElement(P):{}}},(g,r,t)=>{var e=t(6),n=t(45),l=t(11);g.exports=e?function(v,P,T){return n.f(v,P,l(1,T))}:function(v,P,T){return v[P]=T,v}},(g,r,t)=>{var e=t(6),n=t(42),l=t(46),v=t(47),P=t(18),T=TypeError,m=Object.defineProperty,p=Object.getOwnPropertyDescriptor,w="enumerable",k="configurable",x="writable";r.f=e?l?function(o,i,d){if(v(o),i=P(i),v(d),typeof o=="function"&&i==="prototype"&&"value"in d&&x in d&&!d[x]){var C=p(o,i);C&&C[x]&&(o[i]=d.value,d={configurable:k in d?d[k]:C[k],enumerable:w in d?d[w]:C[w],writable:!1})}return m(o,i,d)}:m:function(o,i,d){if(v(o),i=P(i),v(d),n)try{return m(o,i,d)}catch(C){}if("get"in d||"set"in d)throw T("Accessors not supported");return"value"in d&&(o[i]=d.value),o}},(g,r,t)=>{var e=t(6),n=t(7);g.exports=e&&n(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},(g,r,t)=>{var e=t(20),n=String,l=TypeError;g.exports=function(v){if(e(v))return v;throw l(n(v)+" is not an object")}},(g,r,t)=>{var e=t(21),n=t(45),l=t(49),v=t(38);g.exports=function(P,T,m,p){p||(p={});var w=p.enumerable,k=p.name!==void 0?p.name:T;if(e(m)&&l(m,k,p),p.global)w?P[T]=m:v(T,m);else{try{p.unsafe?P[T]&&(w=!0):delete P[T]}catch(x){}w?P[T]=m:n.f(P,T,{value:m,enumerable:!1,configurable:!p.nonConfigurable,writable:!p.nonWritable})}return P}},(g,r,t)=>{var e=t(14),n=t(7),l=t(21),v=t(39),P=t(6),T=t(50).CONFIGURABLE,m=t(51),p=t(52),w=p.enforce,k=p.get,x=String,c=Object.defineProperty,o=e("".slice),i=e("".replace),d=e([].join),C=P&&!n(function(){return c(function(){},"length",{value:8}).length!==8}),O=String(String).split("String"),M=g.exports=function(f,A,L){o(x(A),0,7)==="Symbol("&&(A="["+i(x(A),/^Symbol\(([^)]*)\)/,"$1")+"]"),L&&L.getter&&(A="get "+A),L&&L.setter&&(A="set "+A),(!v(f,"name")||T&&f.name!==A)&&(P?c(f,"name",{value:A,configurable:!0}):f.name=A),C&&L&&v(L,"arity")&&f.length!==L.arity&&c(f,"length",{value:L.arity});try{L&&v(L,"constructor")&&L.constructor?P&&c(f,"prototype",{writable:!1}):f.prototype&&(f.prototype=void 0)}catch(S){}var F=w(f);return v(F,"source")||(F.source=d(O,typeof A=="string"?A:"")),f};Function.prototype.toString=M(function(){return l(this)&&k(this).source||m(this)},"toString")},(g,r,t)=>{var e=t(6),n=t(39),l=Function.prototype,v=e&&Object.getOwnPropertyDescriptor,P=n(l,"name"),T=P&&function(){}.name==="something",m=P&&(!e||e&&v(l,"name").configurable);g.exports={EXISTS:P,PROPER:T,CONFIGURABLE:m}},(g,r,t)=>{var e=t(14),n=t(21),l=t(37),v=e(Function.toString);n(l.inspectSource)||(l.inspectSource=function(P){return v(P)}),g.exports=l.inspectSource},(g,r,t)=>{var e=t(53),n=t(4),l=t(20),v=t(44),P=t(39),T=t(37),m=t(54),p=t(55),w="Object already initialized",k=n.TypeError,x=n.WeakMap,c,o,i,d=function(f){return i(f)?o(f):c(f,{})},C=function(f){return function(A){var L;if(!l(A)||(L=o(A)).type!==f)throw k("Incompatible receiver, "+f+" required");return L}};if(e||T.state){var O=T.state||(T.state=new x);O.get=O.get,O.has=O.has,O.set=O.set,c=function(f,A){if(O.has(f))throw k(w);return A.facade=f,O.set(f,A),A},o=function(f){return O.get(f)||{}},i=function(f){return O.has(f)}}else{var M=m("state");p[M]=!0,c=function(f,A){if(P(f,M))throw k(w);return A.facade=f,v(f,M,A),A},o=function(f){return P(f,M)?f[M]:{}},i=function(f){return P(f,M)}}g.exports={set:c,get:o,has:i,enforce:d,getterFor:C}},(g,r,t)=>{var e=t(4),n=t(21),l=e.WeakMap;g.exports=n(l)&&/native code/.test(String(l))},(g,r,t)=>{var e=t(35),n=t(41),l=e("keys");g.exports=function(v){return l[v]||(l[v]=n(v))}},g=>{g.exports={}},(g,r,t)=>{var e=t(39),n=t(57),l=t(5),v=t(45);g.exports=function(P,T,m){for(var p=n(T),w=v.f,k=l.f,x=0;x<p.length;x++){var c=p[x];!e(P,c)&&!(m&&e(m,c))&&w(P,c,k(T,c))}}},(g,r,t)=>{var e=t(24),n=t(14),l=t(58),v=t(67),P=t(47),T=n([].concat);g.exports=e("Reflect","ownKeys")||function(p){var w=l.f(P(p)),k=v.f;return k?T(w,k(p)):w}},(g,r,t)=>{var e=t(59),n=t(66),l=n.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(P){return e(P,l)}},(g,r,t)=>{var e=t(14),n=t(39),l=t(12),v=t(60).indexOf,P=t(55),T=e([].push);g.exports=function(m,p){var w=l(m),k=0,x=[],c;for(c in w)!n(P,c)&&n(w,c)&&T(x,c);for(;p.length>k;)n(w,c=p[k++])&&(~v(x,c)||T(x,c));return x}},(g,r,t)=>{var e=t(12),n=t(61),l=t(64),v=function(P){return function(T,m,p){var w=e(T),k=l(w),x=n(p,k),c;if(P&&m!==m){for(;k>x;)if(c=w[x++],c!==c)return!0}else for(;k>x;x++)if((P||x in w)&&w[x]===m)return P||x||0;return!P&&-1}};g.exports={includes:v(!0),indexOf:v(!1)}},(g,r,t)=>{var e=t(62),n=Math.max,l=Math.min;g.exports=function(v,P){var T=e(v);return T<0?n(T+P,0):l(T,P)}},(g,r,t)=>{var e=t(63);g.exports=function(n){var l=+n;return l!==l||l===0?0:e(l)}},g=>{var r=Math.ceil,t=Math.floor;g.exports=Math.trunc||function(n){var l=+n;return(l>0?t:r)(l)}},(g,r,t)=>{var e=t(65);g.exports=function(n){return e(n.length)}},(g,r,t)=>{var e=t(62),n=Math.min;g.exports=function(l){return l>0?n(e(l),9007199254740991):0}},g=>{g.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(g,r)=>{r.f=Object.getOwnPropertySymbols},(g,r,t)=>{var e=t(7),n=t(21),l=/#|\.prototype\./,v=function(w,k){var x=T[P(w)];return x===p?!0:x===m?!1:n(k)?e(k):!!k},P=v.normalize=function(w){return String(w).replace(l,".").toLowerCase()},T=v.data={},m=v.NATIVE="N",p=v.POLYFILL="P";g.exports=v},(g,r,t)=>{var e=t(9),n=Function.prototype,l=n.apply,v=n.call;g.exports=typeof Reflect=="object"&&Reflect.apply||(e?v.bind(l):function(){return v.apply(l,arguments)})},(g,r,t)=>{var e=t(24),n=t(39),l=t(44),v=t(25),P=t(71),T=t(56),m=t(74),p=t(75),w=t(76),k=t(80),x=t(81),c=t(6),o=t(36);g.exports=function(i,d,C,O){var M="stackTraceLimit",f=O?2:1,A=i.split("."),L=A[A.length-1],F=e.apply(null,A);if(F){var S=F.prototype;if(!o&&n(S,"cause")&&delete S.cause,!C)return F;var N=e("Error"),D=d(function(G,K){var U=w(O?K:G,void 0),_=O?new F(G):new F;return U!==void 0&&l(_,"message",U),x(_,D,_.stack,2),this&&v(S,this)&&p(_,this,D),arguments.length>f&&k(_,arguments[f]),_});if(D.prototype=S,L!=="Error"?P?P(D,N):T(D,N,{name:!0}):c&&M in F&&(m(D,F,M),m(D,F,"prepareStackTrace")),T(D,F),!o)try{S.name!==L&&l(S,"name",L),S.constructor=D}catch(G){}return D}}},(g,r,t)=>{var e=t(72),n=t(47),l=t(73);g.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var v=!1,P={},T;try{T=e(Object.prototype,"__proto__","set"),T(P,[]),v=P instanceof Array}catch(m){}return function(p,w){return n(p),l(w),v?T(p,w):p.__proto__=w,p}}():void 0)},(g,r,t)=>{var e=t(14),n=t(31);g.exports=function(l,v,P){try{return e(n(Object.getOwnPropertyDescriptor(l,v)[P]))}catch(T){}}},(g,r,t)=>{var e=t(21),n=String,l=TypeError;g.exports=function(v){if(typeof v=="object"||e(v))return v;throw l("Can't set "+n(v)+" as a prototype")}},(g,r,t)=>{var e=t(45).f;g.exports=function(n,l,v){v in n||e(n,v,{configurable:!0,get:function(){return l[v]},set:function(P){l[v]=P}})}},(g,r,t)=>{var e=t(21),n=t(20),l=t(71);g.exports=function(v,P,T){var m,p;return l&&e(m=P.constructor)&&m!==T&&n(p=m.prototype)&&p!==T.prototype&&l(v,p),v}},(g,r,t)=>{var e=t(77);g.exports=function(n,l){return n===void 0?arguments.length<2?"":l:e(n)}},(g,r,t)=>{var e=t(78),n=String;g.exports=function(l){if(e(l)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return n(l)}},(g,r,t)=>{var e=t(79),n=t(21),l=t(15),v=t(34),P=v("toStringTag"),T=Object,m=l(function(){return arguments}())==="Arguments",p=function(w,k){try{return w[k]}catch(x){}};g.exports=e?l:function(w){var k,x,c;return w===void 0?"Undefined":w===null?"Null":typeof(x=p(k=T(w),P))=="string"?x:m?l(k):(c=l(k))==="Object"&&n(k.callee)?"Arguments":c}},(g,r,t)=>{var e=t(34),n=e("toStringTag"),l={};l[n]="z",g.exports=String(l)==="[object z]"},(g,r,t)=>{var e=t(20),n=t(44);g.exports=function(l,v){e(v)&&"cause"in v&&n(l,"cause",v.cause)}},(g,r,t)=>{var e=t(44),n=t(82),l=t(83),v=Error.captureStackTrace;g.exports=function(P,T,m,p){l&&(v?v(P,T):e(P,"stack",n(m,p)))}},(g,r,t)=>{var e=t(14),n=Error,l=e("".replace),v=function(m){return String(n(m).stack)}("zxcasd"),P=/\n\s*at [^:]*:[^\n]*/,T=P.test(v);g.exports=function(m,p){if(T&&typeof m=="string"&&!n.prepareStackTrace)for(;p--;)m=l(m,P,"");return m}},(g,r,t)=>{var e=t(7),n=t(11);g.exports=!e(function(){var l=Error("a");return"stack"in l?(Object.defineProperty(l,"stack",n(1,7)),l.stack!==7):!0})},(g,r,t)=>{var e=t(48),n=t(14),l=t(77),v=t(85),P=URLSearchParams,T=P.prototype,m=n(T.append),p=n(T.delete),w=n(T.forEach),k=n([].push),x=new P("a=1&a=2&b=3");x.delete("a",1),x.delete("b",void 0),x+""!="a=2"&&e(T,"delete",function(c){var o=arguments.length,i=o<2?void 0:arguments[1];if(o&&i===void 0)return p(this,c);var d=[];w(this,function(S,N){k(d,{key:N,value:S})}),v(o,1);for(var C=l(c),O=l(i),M=0,f=0,A=!1,L=d.length,F;M<L;)F=d[M++],A||F.key===C?(A=!0,p(this,F.key)):f++;for(;f<L;)F=d[f++],F.key===C&&F.value===O||m(this,F.key,F.value)},{enumerable:!0,unsafe:!0})},g=>{var r=TypeError;g.exports=function(t,e){if(t<e)throw r("Not enough arguments");return t}},(g,r,t)=>{var e=t(48),n=t(14),l=t(77),v=t(85),P=URLSearchParams,T=P.prototype,m=n(T.getAll),p=n(T.has),w=new P("a=1");(w.has("a",2)||!w.has("a",void 0))&&e(T,"has",function(x){var c=arguments.length,o=c<2?void 0:arguments[1];if(c&&o===void 0)return p(this,x);var i=m(this,x);v(c,1);for(var d=l(o),C=0;C<i.length;)if(i[C++]===d)return!0;return!1},{enumerable:!0,unsafe:!0})},(g,r,t)=>{var e=t(6),n=t(14),l=t(88),v=URLSearchParams.prototype,P=n(v.forEach);e&&!("size"in v)&&l(v,"size",{get:function(){var m=0;return P(this,function(){m++}),m},configurable:!0,enumerable:!0})},(g,r,t)=>{var e=t(49),n=t(45);g.exports=function(l,v,P){return P.get&&e(P.get,v,{getter:!0}),P.set&&e(P.set,v,{setter:!0}),n.f(l,v,P)}},(g,r,t)=>{var e=t(3),n=t(40),l=t(64),v=t(90),P=t(92),T=t(7),m=T(function(){return[].push.call({length:4294967296},1)!==4294967297}),p=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(k){return k instanceof TypeError}},w=m||!p();e({target:"Array",proto:!0,arity:1,forced:w},{push:function(x){var c=n(this),o=l(c),i=arguments.length;P(o+i);for(var d=0;d<i;d++)c[o]=arguments[d],o++;return v(c,o),o}})},(g,r,t)=>{var e=t(6),n=t(91),l=TypeError,v=Object.getOwnPropertyDescriptor,P=e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(T){return T instanceof TypeError}}();g.exports=P?function(T,m){if(n(T)&&!v(T,"length").writable)throw l("Cannot set read only .length");return T.length=m}:function(T,m){return T.length=m}},(g,r,t)=>{var e=t(15);g.exports=Array.isArray||function(l){return e(l)==="Array"}},g=>{var r=TypeError,t=9007199254740991;g.exports=function(e){if(e>t)throw r("Maximum allowed index exceeded");return e}},(g,r,t)=>{var e=t(94),n=t(98).findLast,l=e.aTypedArray,v=e.exportTypedArrayMethod;v("findLast",function(T){return n(l(this),T,arguments.length>1?arguments[1]:void 0)})},(g,r,t)=>{var e=t(95),n=t(6),l=t(4),v=t(21),P=t(20),T=t(39),m=t(78),p=t(32),w=t(44),k=t(48),x=t(88),c=t(25),o=t(96),i=t(71),d=t(34),C=t(41),O=t(52),M=O.enforce,f=O.get,A=l.Int8Array,L=A&&A.prototype,F=l.Uint8ClampedArray,S=F&&F.prototype,N=A&&o(A),D=L&&o(L),G=Object.prototype,K=l.TypeError,U=d("toStringTag"),_=C("TYPED_ARRAY_TAG"),et="TypedArrayConstructor",rt=e&&!!i&&m(l.opera)!=="Opera",Y=!1,st,gt,At,wt={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},W={BigInt64Array:8,BigUint64Array:8},u=function(tt){if(!P(tt))return!1;var q=m(tt);return q==="DataView"||T(wt,q)||T(W,q)},y=function(H){var tt=o(H);if(P(tt)){var q=f(tt);return q&&T(q,et)?q[et]:y(tt)}},a=function(H){if(!P(H))return!1;var tt=m(H);return T(wt,tt)||T(W,tt)},b=function(H){if(a(H))return H;throw K("Target is not a typed array")},E=function(H){if(v(H)&&(!i||c(N,H)))return H;throw K(p(H)+" is not a typed array constructor")},I=function(H,tt,q,ct){if(n){if(q)for(var ut in wt){var Et=l[ut];if(Et&&T(Et.prototype,H))try{delete Et.prototype[H]}catch(mt){try{Et.prototype[H]=tt}catch(Ot){}}}(!D[H]||q)&&k(D,H,q?tt:rt&&L[H]||tt,ct)}},R=function(H,tt,q){var ct,ut;if(n){if(i){if(q){for(ct in wt)if(ut=l[ct],ut&&T(ut,H))try{delete ut[H]}catch(Et){}}if(!N[H]||q)try{return k(N,H,q?tt:rt&&N[H]||tt)}catch(Et){}else return}for(ct in wt)ut=l[ct],ut&&(!ut[H]||q)&&k(ut,H,tt)}};for(st in wt)gt=l[st],At=gt&&gt.prototype,At?M(At)[et]=gt:rt=!1;for(st in W)gt=l[st],At=gt&&gt.prototype,At&&(M(At)[et]=gt);if((!rt||!v(N)||N===Function.prototype)&&(N=function(){throw K("Incorrect invocation")},rt))for(st in wt)l[st]&&i(l[st],N);if((!rt||!D||D===G)&&(D=N.prototype,rt))for(st in wt)l[st]&&i(l[st].prototype,D);if(rt&&o(S)!==D&&i(S,D),n&&!T(D,U)){Y=!0,x(D,U,{configurable:!0,get:function(){return P(this)?this[_]:void 0}});for(st in wt)l[st]&&w(l[st],_,st)}g.exports={NATIVE_ARRAY_BUFFER_VIEWS:rt,TYPED_ARRAY_TAG:Y&&_,aTypedArray:b,aTypedArrayConstructor:E,exportTypedArrayMethod:I,exportTypedArrayStaticMethod:R,getTypedArrayConstructor:y,isView:u,isTypedArray:a,TypedArray:N,TypedArrayPrototype:D}},g=>{g.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"},(g,r,t)=>{var e=t(39),n=t(21),l=t(40),v=t(54),P=t(97),T=v("IE_PROTO"),m=Object,p=m.prototype;g.exports=P?m.getPrototypeOf:function(w){var k=l(w);if(e(k,T))return k[T];var x=k.constructor;return n(x)&&k instanceof x?x.prototype:k instanceof m?p:null}},(g,r,t)=>{var e=t(7);g.exports=!e(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},(g,r,t)=>{var e=t(99),n=t(13),l=t(40),v=t(64),P=function(T){var m=T===1;return function(p,w,k){for(var x=l(p),c=n(x),o=e(w,k),i=v(c),d,C;i-- >0;)if(d=c[i],C=o(d,i,x),C)switch(T){case 0:return d;case 1:return i}return m?-1:void 0}};g.exports={findLast:P(0),findLastIndex:P(1)}},(g,r,t)=>{var e=t(100),n=t(31),l=t(9),v=e(e.bind);g.exports=function(P,T){return n(P),T===void 0?P:l?v(P,T):function(){return P.apply(T,arguments)}}},(g,r,t)=>{var e=t(15),n=t(14);g.exports=function(l){if(e(l)==="Function")return n(l)}},(g,r,t)=>{var e=t(94),n=t(98).findLastIndex,l=e.aTypedArray,v=e.exportTypedArrayMethod;v("findLastIndex",function(T){return n(l(this),T,arguments.length>1?arguments[1]:void 0)})},(g,r,t)=>{var e=t(4),n=t(8),l=t(94),v=t(64),P=t(103),T=t(40),m=t(7),p=e.RangeError,w=e.Int8Array,k=w&&w.prototype,x=k&&k.set,c=l.aTypedArray,o=l.exportTypedArrayMethod,i=!m(function(){var C=new Uint8ClampedArray(2);return n(x,C,{length:1,0:3},1),C[1]!==3}),d=i&&l.NATIVE_ARRAY_BUFFER_VIEWS&&m(function(){var C=new w(2);return C.set(1),C.set("2",1),C[0]!==0||C[1]!==2});o("set",function(O){c(this);var M=P(arguments.length>1?arguments[1]:void 0,1),f=T(O);if(i)return n(x,this,f,M);var A=this.length,L=v(f),F=0;if(L+M>A)throw p("Wrong length");for(;F<L;)this[M+F]=f[F++]},!i||d)},(g,r,t)=>{var e=t(104),n=RangeError;g.exports=function(l,v){var P=e(l);if(P%v)throw n("Wrong offset");return P}},(g,r,t)=>{var e=t(62),n=RangeError;g.exports=function(l){var v=e(l);if(v<0)throw n("The argument can't be less than 0");return v}},(g,r,t)=>{var e=t(106),n=t(94),l=n.aTypedArray,v=n.exportTypedArrayMethod,P=n.getTypedArrayConstructor;v("toReversed",function(){return e(l(this),P(this))})},(g,r,t)=>{var e=t(64);g.exports=function(n,l){for(var v=e(n),P=new l(v),T=0;T<v;T++)P[T]=n[v-T-1];return P}},(g,r,t)=>{var e=t(94),n=t(14),l=t(31),v=t(108),P=e.aTypedArray,T=e.getTypedArrayConstructor,m=e.exportTypedArrayMethod,p=n(e.TypedArrayPrototype.sort);m("toSorted",function(k){k!==void 0&&l(k);var x=P(this),c=v(T(x),x);return p(c,k)})},(g,r,t)=>{var e=t(64);g.exports=function(n,l){for(var v=0,P=e(l),T=new n(P);P>v;)T[v]=l[v++];return T}},(g,r,t)=>{var e=t(110),n=t(94),l=t(111),v=t(62),P=t(112),T=n.aTypedArray,m=n.getTypedArrayConstructor,p=n.exportTypedArrayMethod,w=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(k){return k===8}}();p("with",function(k,x){var c=T(this),o=v(k),i=l(c)?P(x):+x;return e(c,m(c),o,i)},!w)},(g,r,t)=>{var e=t(64),n=t(62),l=RangeError;g.exports=function(v,P,T,m){var p=e(v),w=n(T),k=w<0?p+w:w;if(k>=p||k<0)throw l("Incorrect index");for(var x=new P(p),c=0;c<p;c++)x[c]=c===k?m:v[c];return x}},(g,r,t)=>{var e=t(78);g.exports=function(n){var l=e(n);return l==="BigInt64Array"||l==="BigUint64Array"}},(g,r,t)=>{var e=t(19),n=TypeError;g.exports=function(l){var v=e(l,"number");if(typeof v=="number")throw n("Can't convert number to bigint");return BigInt(v)}},(g,r,t)=>{var e=t(6),n=t(88),l=t(114),v=ArrayBuffer.prototype;e&&!("detached"in v)&&n(v,"detached",{configurable:!0,get:function(){return l(this)}})},(g,r,t)=>{var e=t(14),n=t(115),l=e(ArrayBuffer.prototype.slice);g.exports=function(v){if(n(v)!==0)return!1;try{return l(v,0,0),!1}catch(P){return!0}}},(g,r,t)=>{var e=t(72),n=t(15),l=TypeError;g.exports=e(ArrayBuffer.prototype,"byteLength","get")||function(v){if(n(v)!=="ArrayBuffer")throw l("ArrayBuffer expected");return v.byteLength}},(g,r,t)=>{var e=t(3),n=t(117);n&&e({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},(g,r,t)=>{var e=t(4),n=t(14),l=t(72),v=t(118),P=t(114),T=t(115),m=t(119),p=e.TypeError,w=e.structuredClone,k=e.ArrayBuffer,x=e.DataView,c=Math.min,o=k.prototype,i=x.prototype,d=n(o.slice),C=l(o,"resizable","get"),O=l(o,"maxByteLength","get"),M=n(i.getInt8),f=n(i.setInt8);g.exports=m&&function(A,L,F){var S=T(A),N=L===void 0?S:v(L),D=!C||!C(A);if(P(A))throw p("ArrayBuffer is detached");var G=w(A,{transfer:[A]});if(S===N&&(F||D))return G;if(S>=N&&(!F||D))return d(G,0,N);for(var K=F&&!D&&O?{maxByteLength:O(G)}:void 0,U=new k(N,K),_=new x(G),et=new x(U),rt=c(N,S),Y=0;Y<rt;Y++)f(et,Y,M(_,Y));return U}},(g,r,t)=>{var e=t(62),n=t(65),l=RangeError;g.exports=function(v){if(v===void 0)return 0;var P=e(v),T=n(P);if(P!==T)throw l("Wrong length or index");return T}},(g,r,t)=>{var e=t(4),n=t(7),l=t(28),v=t(120),P=t(121),T=t(122),m=e.structuredClone;g.exports=!!m&&!n(function(){if(P&&l>92||T&&l>94||v&&l>97)return!1;var p=new ArrayBuffer(8),w=m(p,{transfer:[p]});return p.byteLength!==0||w.byteLength!==8})},(g,r,t)=>{var e=t(121),n=t(122);g.exports=!e&&!n&&typeof window=="object"&&typeof document=="object"},g=>{g.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(g,r,t)=>{var e=t(4),n=t(15);g.exports=n(e.process)==="process"},(g,r,t)=>{var e=t(3),n=t(117);n&&e({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var g,t,e,n,fe,v,ke,T,m,p,w,k,x,c,o,i,Pe,C,O,Ge,f,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0,__w_pdfjs_require__(84),__w_pdfjs_require__(86),__w_pdfjs_require__(87),__w_pdfjs_require__(2),__w_pdfjs_require__(93),__w_pdfjs_require__(101),__w_pdfjs_require__(102),__w_pdfjs_require__(105),__w_pdfjs_require__(107),__w_pdfjs_require__(109),__w_pdfjs_require__(113),__w_pdfjs_require__(116),__w_pdfjs_require__(123),__w_pdfjs_require__(89),__w_pdfjs_require__(125),__w_pdfjs_require__(136),__w_pdfjs_require__(138),__w_pdfjs_require__(141),__w_pdfjs_require__(143),__w_pdfjs_require__(145),__w_pdfjs_require__(147),__w_pdfjs_require__(149),__w_pdfjs_require__(152);var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(163),_display_utils=__w_pdfjs_require__(168),_font_loader=__w_pdfjs_require__(171),_displayNode_utils=__w_pdfjs_require__(172),_canvas=__w_pdfjs_require__(173),_worker_options=__w_pdfjs_require__(176),_message_handler=__w_pdfjs_require__(177),_metadata=__w_pdfjs_require__(178),_optional_content_config=__w_pdfjs_require__(179),_transport_stream=__w_pdfjs_require__(180),_displayFetch_stream=__w_pdfjs_require__(181),_displayNetwork=__w_pdfjs_require__(184),_displayNode_stream=__w_pdfjs_require__(185),_displaySvg=__w_pdfjs_require__(186),_xfa_text=__w_pdfjs_require__(194);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(F){var Ht,Xt;if(typeof F=="string"||F instanceof URL?F={url:F}:(0,_util.isArrayBuffer)(F)&&(F={data:F}),typeof F!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!F.url&&!F.data&&!F.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const S=new PDFDocumentLoadingTask,{docId:N}=S,D=F.url?getUrlProp(F.url):null,G=F.data?getDataProp(F.data):null,K=F.httpHeaders||null,U=F.withCredentials===!0,_=(Ht=F.password)!=null?Ht:null,et=F.range instanceof PDFDataRangeTransport?F.range:null,rt=Number.isInteger(F.rangeChunkSize)&&F.rangeChunkSize>0?F.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Y=F.worker instanceof PDFWorker?F.worker:null;const st=F.verbosity,gt=typeof F.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(F.docBaseUrl)?F.docBaseUrl:null,At=typeof F.cMapUrl=="string"?F.cMapUrl:null,wt=F.cMapPacked!==!1,W=F.CMapReaderFactory||DefaultCMapReaderFactory,u=typeof F.standardFontDataUrl=="string"?F.standardFontDataUrl:null,y=F.StandardFontDataFactory||DefaultStandardFontDataFactory,a=F.stopAtErrors!==!0,b=Number.isInteger(F.maxImageSize)&&F.maxImageSize>-1?F.maxImageSize:-1,E=F.isEvalSupported!==!1,I=typeof F.isOffscreenCanvasSupported=="boolean"?F.isOffscreenCanvasSupported:!_util.isNodeJS,R=Number.isInteger(F.canvasMaxAreaInBytes)?F.canvasMaxAreaInBytes:-1,H=typeof F.disableFontFace=="boolean"?F.disableFontFace:_util.isNodeJS,tt=F.fontExtraProperties===!0,q=F.enableXfa===!0,ct=F.ownerDocument||globalThis.document,ut=F.disableRange===!0,Et=F.disableStream===!0,mt=F.disableAutoFetch===!0,Ot=F.pdfBug===!0,Wt=et?et.length:(Xt=F.length)!=null?Xt:NaN,Pt=typeof F.useSystemFonts=="boolean"?F.useSystemFonts:!_util.isNodeJS&&!H,Nt=typeof F.useWorkerFetch=="boolean"?F.useWorkerFetch:W===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&At&&u&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(u,document.baseURI),yt=F.canvasFactory||new DefaultCanvasFactory({ownerDocument:ct}),ht=F.filterFactory||new DefaultFilterFactory({docId:N,ownerDocument:ct}),it=null;(0,_util.setVerbosityLevel)(st);const dt={canvasFactory:yt,filterFactory:ht};if(Nt||(dt.cMapReaderFactory=new W({baseUrl:At,isCompressed:wt}),dt.standardFontDataFactory=new y({baseUrl:u})),!Y){const zt={verbosity:st,port:_worker_options.GlobalWorkerOptions.workerPort};Y=zt.port?PDFWorker.fromPort(zt):new PDFWorker(zt),S._worker=Y}const It={docId:N,apiVersion:"3.11.174",data:G,password:_,disableAutoFetch:mt,rangeChunkSize:rt,length:Wt,docBaseUrl:gt,enableXfa:q,evaluatorOptions:{maxImageSize:b,disableFontFace:H,ignoreErrors:a,isEvalSupported:E,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:R,fontExtraProperties:tt,useSystemFonts:Pt,cMapUrl:Nt?At:null,standardFontDataUrl:Nt?u:null}},Rt={ignoreErrors:a,isEvalSupported:E,disableFontFace:H,fontExtraProperties:tt,enableXfa:q,ownerDocument:ct,disableAutoFetch:mt,pdfBug:Ot,styleElement:it};return Y.promise.then(function(){if(S.destroyed)throw new Error("Loading aborted");const zt=_fetchDocument(Y,It),Vt=new Promise(function(Kt){let Jt;et?Jt=new _transport_stream.PDFDataTransportStream({length:Wt,initialData:et.initialData,progressiveDone:et.progressiveDone,contentDispositionFilename:et.contentDispositionFilename,disableRange:ut,disableStream:Et},et):G||(Jt=(Gt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Gt):(0,_display_utils.isValidFetchUrl)(Gt.url)?new _displayFetch_stream.PDFFetchStream(Gt):new _displayNetwork.PDFNetworkStream(Gt))({url:D,length:Wt,httpHeaders:K,withCredentials:U,rangeChunkSize:rt,disableRange:ut,disableStream:Et})),Kt(Jt)});return Promise.all([zt,Vt]).then(function(Kt){let[Jt,Zt]=Kt;if(S.destroyed)throw new Error("Loading aborted");const Gt=new _message_handler.MessageHandler(N,Jt,Y.port),bt=new WorkerTransport(Gt,S,Zt,Rt,dt);S._transport=bt,Gt.send("Ready",null)})}).catch(S._capability.reject),S}function _fetchDocument(F,S){return ee(this,null,function*(){if(F.destroyed)throw new Error("Worker was destroyed");const N=yield F.messageHandler.sendWithPromise("GetDocRequest",S,S.data?[S.data.buffer]:null);if(F.destroyed)throw new Error("Worker was destroyed");return N})}function getUrlProp(F){if(F instanceof URL)return F.href;try{return new URL(F,window.location).href}catch(S){if(_util.isNodeJS&&typeof F=="string")return F}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(F){if(_util.isNodeJS&&typeof Buffer!="undefined"&&F instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(F instanceof Uint8Array&&F.byteLength===F.buffer.byteLength)return F;if(typeof F=="string")return(0,_util.stringToBytes)(F);if(typeof F=="object"&&!isNaN(F==null?void 0:F.length)||(0,_util.isArrayBuffer)(F))return new Uint8Array(F);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const r=class r{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${be(r,g)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return ee(this,null,function*(){var S,N,D;this.destroyed=!0;try{(S=this._worker)!=null&&S.port&&(this._worker._pendingDestroy=!0),yield(N=this._transport)==null?void 0:N.destroy()}catch(G){throw(D=this._worker)!=null&&D.port&&delete this._worker._pendingDestroy,G}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}};g=new WeakMap,X(r,g,0);let PDFDocumentLoadingTask=r;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(S,N){let D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=S,this.initialData=N,this.progressiveDone=D,this.contentDispositionFilename=G,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(S){this._rangeListeners.push(S)}addProgressListener(S){this._progressListeners.push(S)}addProgressiveReadListener(S){this._progressiveReadListeners.push(S)}addProgressiveDoneListener(S){this._progressiveDoneListeners.push(S)}onDataRange(S,N){for(const D of this._rangeListeners)D(S,N)}onDataProgress(S,N){this._readyCapability.promise.then(()=>{for(const D of this._progressListeners)D(S,N)})}onDataProgressiveRead(S){this._readyCapability.promise.then(()=>{for(const N of this._progressiveReadListeners)N(S)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const S of this._progressiveDoneListeners)S()})}transportReady(){this._readyCapability.resolve()}requestDataRange(S,N){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(S,N){this._pdfInfo=S,this._transport=N,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(D=>{if(!D)return D;const G=[];for(const K in D)G.push(...D[K]);return G}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(S){return this._transport.getPage(S)}getPageIndex(S){return this._transport.getPageIndex(S)}getDestinations(){return this._transport.getDestinations()}getDestination(S){return this._transport.getDestination(S)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(S||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(S,N,D){X(this,n);X(this,v);X(this,t,null);X(this,e,!1);let G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this._pageIndex=S,this._pageInfo=N,this._transport=D,this._stats=G?new _display_utils.StatTimer:null,this._pdfBug=G,this.commonObjs=D.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:S,rotation:N=this.rotate,offsetX:D=0,offsetY:G=0,dontFlip:K=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:S,rotation:N,offsetX:D,offsetY:G,dontFlip:K})}getAnnotations(){let{intent:S="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const N=this._transport.getRenderingIntent(S);return this._transport.getAnnotations(this._pageIndex,N.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return ee(this,null,function*(){var S;return((S=this._transport._htmlForXfa)==null?void 0:S.children[this._pageIndex])||null})}render(S){var a,b;let{canvasContext:N,viewport:D,intent:G="display",annotationMode:K=_util.AnnotationMode.ENABLE,transform:U=null,background:_=null,optionalContentConfigPromise:et=null,annotationCanvasMap:rt=null,pageColors:Y=null,printAnnotationStorage:st=null}=S;(a=this._stats)==null||a.time("Overall");const gt=this._transport.getRenderingIntent(G,K,st);at(this,e,!1),j(this,v,ke).call(this),et||(et=this._transport.getOptionalContentConfig());let At=this._intentStates.get(gt.cacheKey);At||(At=Object.create(null),this._intentStates.set(gt.cacheKey,At)),At.streamReaderCancelTimeout&&(clearTimeout(At.streamReaderCancelTimeout),At.streamReaderCancelTimeout=null);const wt=!!(gt.renderingIntent&_util.RenderingIntentFlag.PRINT);At.displayReadyCapability||(At.displayReadyCapability=new _util.PromiseCapability,At.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(b=this._stats)==null||b.time("Page Request"),this._pumpOperatorList(gt));const W=E=>{var I,R;At.renderTasks.delete(u),(this._maybeCleanupAfterRender||wt)&&at(this,e,!0),j(this,n,fe).call(this,!wt),E?(u.capability.reject(E),this._abortOperatorList({intentState:At,reason:E instanceof Error?E:new Error(E)})):u.capability.resolve(),(I=this._stats)==null||I.timeEnd("Rendering"),(R=this._stats)==null||R.timeEnd("Overall")},u=new InternalRenderTask({callback:W,params:{canvasContext:N,viewport:D,transform:U,background:_},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rt,operatorList:At.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!wt,pdfBug:this._pdfBug,pageColors:Y});(At.renderTasks||(At.renderTasks=new Set)).add(u);const y=u.task;return Promise.all([At.displayReadyCapability.promise,et]).then(E=>{var H;let[I,R]=E;if(this.destroyed){W();return}(H=this._stats)==null||H.time("Rendering"),u.initializeGraphics({transparency:I,optionalContentConfig:R}),u.operatorListChanged()}).catch(W),y}getOperatorList(){var et;let{intent:S="display",annotationMode:N=_util.AnnotationMode.ENABLE,printAnnotationStorage:D=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function G(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(_))}const K=this._transport.getRenderingIntent(S,N,D,!0);let U=this._intentStates.get(K.cacheKey);U||(U=Object.create(null),this._intentStates.set(K.cacheKey,U));let _;return U.opListReadCapability||(_=Object.create(null),_.operatorListChanged=G,U.opListReadCapability=new _util.PromiseCapability,(U.renderTasks||(U.renderTasks=new Set)).add(_),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(et=this._stats)==null||et.time("Page Request"),this._pumpOperatorList(K)),U.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:S=!1,disableNormalization:N=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const D=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:S===!0,disableNormalization:N===!0},{highWaterMark:D,size(G){return G.items.length}})}getTextContent(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(D=>_xfa_text.XfaText.textContent(D));const N=this.streamTextContent(S);return new Promise(function(D,G){function K(){U.read().then(function(et){let{value:rt,done:Y}=et;if(Y){D(_);return}Object.assign(_.styles,rt.styles),_.items.push(...rt.items),K()},G)}const U=N.getReader(),_={items:[],styles:Object.create(null)};K()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const S=[];for(const N of this._intentStates.values())if(this._abortOperatorList({intentState:N,reason:new Error("Page was destroyed."),force:!0}),!N.opListReadCapability)for(const D of N.renderTasks)S.push(D.completed),D.cancel();return this.objs.clear(),at(this,e,!1),j(this,v,ke).call(this),Promise.all(S)}cleanup(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;at(this,e,!0);const N=j(this,n,fe).call(this,!1);return S&&N&&this._stats&&(this._stats=new _display_utils.StatTimer),N}_startRenderPage(S,N){var G,K;const D=this._intentStates.get(N);D&&((G=this._stats)==null||G.timeEnd("Page Request"),(K=D.displayReadyCapability)==null||K.resolve(S))}_renderPageChunk(S,N){for(let D=0,G=S.length;D<G;D++)N.operatorList.fnArray.push(S.fnArray[D]),N.operatorList.argsArray.push(S.argsArray[D]);N.operatorList.lastChunk=S.lastChunk,N.operatorList.separateAnnots=S.separateAnnots;for(const D of N.renderTasks)D.operatorListChanged();S.lastChunk&&j(this,n,fe).call(this,!0)}_pumpOperatorList(S){let{renderingIntent:N,cacheKey:D,annotationStorageSerializable:G}=S;const{map:K,transfers:U}=G,et=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:N,cacheKey:D,annotationStorage:K},U).getReader(),rt=this._intentStates.get(D);rt.streamReader=et;const Y=()=>{et.read().then(st=>{let{value:gt,done:At}=st;if(At){rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(gt,rt),Y())},st=>{if(rt.streamReader=null,!this._transport.destroyed){if(rt.operatorList){rt.operatorList.lastChunk=!0;for(const gt of rt.renderTasks)gt.operatorListChanged();j(this,n,fe).call(this,!0)}if(rt.displayReadyCapability)rt.displayReadyCapability.reject(st);else if(rt.opListReadCapability)rt.opListReadCapability.reject(st);else throw st}})};Y()}_abortOperatorList(S){let{intentState:N,reason:D,force:G=!1}=S;if(N.streamReader){if(N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null),!G){if(N.renderTasks.size>0)return;if(D instanceof _display_utils.RenderingCancelledException){let K=RENDERING_CANCELLED_TIMEOUT;D.extraDelay>0&&D.extraDelay<1e3&&(K+=D.extraDelay),N.streamReaderCancelTimeout=setTimeout(()=>{N.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:N,reason:D,force:!0})},K);return}}if(N.streamReader.cancel(new _util.AbortException(D.message)).catch(()=>{}),N.streamReader=null,!this._transport.destroyed){for(const[K,U]of this._intentStates)if(U===N){this._intentStates.delete(K);break}this.cleanup()}}}get stats(){return this._stats}}t=new WeakMap,e=new WeakMap,n=new WeakSet,fe=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(j(this,v,ke).call(this),!s(this,e)||this.destroyed)return!1;if(S)return at(this,t,setTimeout(()=>{at(this,t,null),j(this,n,fe).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:N,operatorList:D}of this._intentStates.values())if(N.size>0||!D.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),at(this,e,!1),!0},v=new WeakSet,ke=function(){s(this,t)&&(clearTimeout(s(this,t)),at(this,t,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){X(this,T,new Set);X(this,m,Promise.resolve())}postMessage(S,N){const D={data:structuredClone(S,null)};s(this,m).then(()=>{for(const G of s(this,T))G.call(this,D)})}addEventListener(S,N){s(this,T).add(N)}removeEventListener(S,N){s(this,T).delete(N)}terminate(){s(this,T).clear()}}T=new WeakMap,m=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const F=(p=document==null?void 0:document.currentScript)==null?void 0:p.src;F&&(PDFWorkerUtil.fallbackWorkerSrc=F.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(F,S){let N;try{if(N=new URL(F),!N.origin||N.origin==="null")return!1}catch(G){return!1}const D=new URL(S,N);return N.origin===D.origin},PDFWorkerUtil.createCDNWrapper=function(F){const S=`importScripts("${F}");`;return URL.createObjectURL(new Blob([S]))}}const _PDFWorker=class _PDFWorker{constructor(){var D;let{name:F=null,port:S=null,verbosity:N=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.name=F,this.destroyed=!1,this.verbosity=N,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,S){if((D=s(_PDFWorker,w))!=null&&D.has(S))throw new Error("Cannot use more than one PDFWorker per port.");(s(_PDFWorker,w)||at(_PDFWorker,w,new WeakMap)).set(S,this),this._initializeFromPort(S);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(F){this._port=F,this._messageHandler=new _message_handler.MessageHandler("main","worker",F),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:F}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,F)||(F=PDFWorkerUtil.createCDNWrapper(new URL(F,window.location).href));const S=new Worker(F),N=new _message_handler.MessageHandler("main","worker",S),D=()=>{S.removeEventListener("error",G),N.destroy(),S.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},G=()=>{this._webWorker||D()};S.addEventListener("error",G),N.on("test",U=>{if(S.removeEventListener("error",G),this.destroyed){D();return}U?(this._messageHandler=N,this._port=S,this._webWorker=S,this._readyCapability.resolve(),N.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),N.destroy(),S.terminate())}),N.on("ready",U=>{if(S.removeEventListener("error",G),this.destroyed){D();return}try{K()}catch(_){this._setupFakeWorker()}});const K=()=>{const U=new Uint8Array;N.send("test",U,[U.buffer])};K();return}catch(S){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(F=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const S=new LoopbackPort;this._port=S;const N=`fake${PDFWorkerUtil.fakeWorkerId++}`,D=new _message_handler.MessageHandler(N+"_worker",N,S);F.setup(D,S);const G=new _message_handler.MessageHandler(N,N+"_worker",S);this._messageHandler=G,this._readyCapability.resolve(),G.send("configure",{verbosity:this.verbosity})}).catch(F=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${F.message}".`))})}destroy(){var F;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(F=s(_PDFWorker,w))==null||F.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(F){var N;if(!(F!=null&&F.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const S=(N=s(this,w))==null?void 0:N.get(F.port);if(S){if(S._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return S}return new _PDFWorker(F)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var F;try{return((F=globalThis.pdfjsWorker)==null?void 0:F.WorkerMessageHandler)||null}catch(S){return null}}static get _setupFakeWorkerGlobal(){const loader=()=>ee(this,null,function*(){const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};w=new WeakMap,X(_PDFWorker,w,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(S,N,D,G,K){X(this,i);X(this,k,new Map);X(this,x,new Map);X(this,c,new Map);X(this,o,null);this.messageHandler=S,this.loadingTask=N,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:G.ownerDocument,styleElement:G.styleElement}),this._params=G,this.canvasFactory=K.canvasFactory,this.filterFactory=K.filterFactory,this.cMapReaderFactory=K.cMapReaderFactory,this.standardFontDataFactory=K.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=D,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(S){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,K=_util.RenderingIntentFlag.DISPLAY,U=_annotation_storage.SerializableEmpty;switch(S){case"any":K=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":K=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${S}`)}switch(N){case _util.AnnotationMode.DISABLE:K+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:K+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:K+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=(K&_util.RenderingIntentFlag.PRINT&&D instanceof _annotation_storage.PrintAnnotationStorage?D:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${N}`)}return G&&(K+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:K,cacheKey:`${K}_${U.hash}`,annotationStorageSerializable:U}}destroy(){var D;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(D=s(this,o))==null||D.reject(new Error("Worker was destroyed during onPassword callback"));const S=[];for(const G of s(this,x).values())S.push(G._destroy());s(this,x).clear(),s(this,c).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const N=this.messageHandler.sendWithPromise("Terminate",null);return S.push(N),Promise.all(S).then(()=>{var G;this.commonObjs.clear(),this.fontLoader.clear(),s(this,k).clear(),this.filterFactory.destroy(),(G=this._networkStream)==null||G.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:S,loadingTask:N}=this;S.on("GetReader",(D,G)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=K=>{this._lastProgress={loaded:K.loaded,total:K.total}},G.onPull=()=>{this._fullReader.read().then(function(K){let{value:U,done:_}=K;if(_){G.close();return}(0,_util.assert)(U instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(U),1,[U])}).catch(K=>{G.error(K)})},G.onCancel=K=>{this._fullReader.cancel(K),G.ready.catch(U=>{if(!this.destroyed)throw U})}}),S.on("ReaderHeadersReady",D=>{const G=new _util.PromiseCapability,K=this._fullReader;return K.headersReady.then(()=>{var U;(!K.isStreamingSupported||!K.isRangeSupported)&&(this._lastProgress&&((U=N.onProgress)==null||U.call(N,this._lastProgress)),K.onProgress=_=>{var et;(et=N.onProgress)==null||et.call(N,{loaded:_.loaded,total:_.total})}),G.resolve({isStreamingSupported:K.isStreamingSupported,isRangeSupported:K.isRangeSupported,contentLength:K.contentLength})},G.reject),G.promise}),S.on("GetRangeReader",(D,G)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const K=this._networkStream.getRangeReader(D.begin,D.end);if(!K){G.close();return}G.onPull=()=>{K.read().then(function(U){let{value:_,done:et}=U;if(et){G.close();return}(0,_util.assert)(_ instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),G.enqueue(new Uint8Array(_),1,[_])}).catch(U=>{G.error(U)})},G.onCancel=U=>{K.cancel(U),G.ready.catch(_=>{if(!this.destroyed)throw _})}}),S.on("GetDoc",D=>{let{pdfInfo:G}=D;this._numPages=G.numPages,this._htmlForXfa=G.htmlForXfa,delete G.htmlForXfa,N._capability.resolve(new PDFDocumentProxy(G,this))}),S.on("DocException",function(D){let G;switch(D.name){case"PasswordException":G=new _util.PasswordException(D.message,D.code);break;case"InvalidPDFException":G=new _util.InvalidPDFException(D.message);break;case"MissingPDFException":G=new _util.MissingPDFException(D.message);break;case"UnexpectedResponseException":G=new _util.UnexpectedResponseException(D.message,D.status);break;case"UnknownErrorException":G=new _util.UnknownErrorException(D.message,D.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}N._capability.reject(G)}),S.on("PasswordRequest",D=>{if(at(this,o,new _util.PromiseCapability),N.onPassword){const G=K=>{K instanceof Error?s(this,o).reject(K):s(this,o).resolve({password:K})};try{N.onPassword(G,D.code)}catch(K){s(this,o).reject(K)}}else s(this,o).reject(new _util.PasswordException(D.message,D.code));return s(this,o).promise}),S.on("DataLoaded",D=>{var G;(G=N.onProgress)==null||G.call(N,{loaded:D.length,total:D.length}),this.downloadInfoCapability.resolve(D)}),S.on("StartRenderPage",D=>{if(this.destroyed)return;s(this,x).get(D.pageIndex)._startRenderPage(D.transparency,D.cacheKey)}),S.on("commonobj",D=>{var _;let[G,K,U]=D;if(!this.destroyed&&!this.commonObjs.has(G))switch(K){case"Font":const et=this._params;if("error"in U){const st=U.error;(0,_util.warn)(`Error during font loading: ${st}`),this.commonObjs.resolve(G,st);break}const rt=et.pdfBug&&((_=globalThis.FontInspector)!=null&&_.enabled)?(st,gt)=>globalThis.FontInspector.fontAdded(st,gt):null,Y=new _font_loader.FontFaceObject(U,{isEvalSupported:et.isEvalSupported,disableFontFace:et.disableFontFace,ignoreErrors:et.ignoreErrors,inspectFont:rt});this.fontLoader.bind(Y).catch(st=>S.sendWithPromise("FontFallback",{id:G})).finally(()=>{!et.fontExtraProperties&&Y.data&&(Y.data=null),this.commonObjs.resolve(G,Y)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(G,U);break;default:throw new Error(`Got unknown common object type ${K}`)}}),S.on("obj",D=>{var rt;let[G,K,U,_]=D;if(this.destroyed)return;const et=s(this,x).get(K);if(!et.objs.has(G))switch(U){case"Image":if(et.objs.resolve(G,_),_){let Y;if(_.bitmap){const{width:st,height:gt}=_;Y=st*gt*4}else Y=((rt=_.data)==null?void 0:rt.length)||0;Y>_util.MAX_IMAGE_SIZE_TO_CACHE&&(et._maybeCleanupAfterRender=!0)}break;case"Pattern":et.objs.resolve(G,_);break;default:throw new Error(`Got unknown object type ${U}`)}}),S.on("DocProgress",D=>{var G;this.destroyed||(G=N.onProgress)==null||G.call(N,{loaded:D.loaded,total:D.total})}),S.on("FetchBuiltInCMap",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(D):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),S.on("FetchStandardFontData",D=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(D):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var D,G;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:S,transfers:N}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:S,filename:(G=(D=this._fullReader)==null?void 0:D.filename)!=null?G:null},N).finally(()=>{this.annotationStorage.resetModified()})}getPage(S){if(!Number.isInteger(S)||S<=0||S>this._numPages)return Promise.reject(new Error("Invalid page request."));const N=S-1,D=s(this,c).get(N);if(D)return D;const G=this.messageHandler.sendWithPromise("GetPage",{pageIndex:N}).then(K=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(N,K,this,this._params.pdfBug);return s(this,x).set(N,U),U});return s(this,c).set(N,G),G}getPageIndex(S){return typeof S!="object"||S===null||!Number.isInteger(S.num)||S.num<0||!Number.isInteger(S.gen)||S.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:S.num,gen:S.gen})}getAnnotations(S,N){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:S,intent:N})}getFieldObjects(){return j(this,i,Pe).call(this,"GetFieldObjects")}hasJSActions(){return j(this,i,Pe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(S){return typeof S!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:S})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return j(this,i,Pe).call(this,"GetDocJSActions")}getPageJSActions(S){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:S})}getStructTree(S){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:S})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(S=>new _optional_content_config.OptionalContentConfig(S))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const S="GetMetadata",N=s(this,k).get(S);if(N)return N;const D=this.messageHandler.sendWithPromise(S,null).then(G=>{var K,U,_,et;return{info:G[0],metadata:G[1]?new _metadata.Metadata(G[1]):null,contentDispositionFilename:(U=(K=this._fullReader)==null?void 0:K.filename)!=null?U:null,contentLength:(et=(_=this._fullReader)==null?void 0:_.contentLength)!=null?et:null}});return s(this,k).set(S,D),D}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(){return ee(this,arguments,function*(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(const N of s(this,x).values())if(!N.cleanup())throw new Error(`startCleanup: Page ${N.pageNumber} is currently rendering.`);this.commonObjs.clear(),S||this.fontLoader.clear(),s(this,k).clear(),this.filterFactory.destroy(!0)}})}get loadingParams(){const{disableAutoFetch:S,enableXfa:N}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:S,enableXfa:N})}}k=new WeakMap,x=new WeakMap,c=new WeakMap,o=new WeakMap,i=new WeakSet,Pe=function(S){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const D=s(this,k).get(S);if(D)return D;const G=this.messageHandler.sendWithPromise(S,N);return s(this,k).set(S,G),G};class PDFObjects{constructor(){X(this,O);X(this,C,Object.create(null))}get(S){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(N){const G=j(this,O,Ge).call(this,S);return G.capability.promise.then(()=>N(G.data)),null}const D=s(this,C)[S];if(!(D!=null&&D.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${S}.`);return D.data}has(S){const N=s(this,C)[S];return(N==null?void 0:N.capability.settled)||!1}resolve(S){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const D=j(this,O,Ge).call(this,S);D.data=N,D.capability.resolve()}clear(){var S;for(const N in s(this,C)){const{data:D}=s(this,C)[N];(S=D==null?void 0:D.bitmap)==null||S.close()}at(this,C,Object.create(null))}}C=new WeakMap,O=new WeakSet,Ge=function(S){var N;return(N=s(this,C))[S]||(N[S]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(S){X(this,f,null);at(this,f,S),this.onContinue=null}get promise(){return s(this,f).capability.promise}cancel(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;s(this,f).cancel(null,S)}get separateAnnots(){const{separateAnnots:S}=s(this,f).operatorList;if(!S)return!1;const{annotationCanvasMap:N}=s(this,f);return S.form||S.canvas&&(N==null?void 0:N.size)>0}}f=new WeakMap,exports.RenderTask=RenderTask;const L=class L{constructor(S){let{callback:N,params:D,objs:G,commonObjs:K,annotationCanvasMap:U,operatorList:_,pageIndex:et,canvasFactory:rt,filterFactory:Y,useRequestAnimationFrame:st=!1,pdfBug:gt=!1,pageColors:At=null}=S;this.callback=N,this.params=D,this.objs=G,this.commonObjs=K,this.annotationCanvasMap=U,this.operatorListIdx=null,this.operatorList=_,this._pageIndex=et,this.canvasFactory=rt,this.filterFactory=Y,this._pdfBug=gt,this.pageColors=At,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=st===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=D.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(S){var et,rt;let{transparency:N=!1,optionalContentConfig:D}=S;if(this.cancelled)return;if(this._canvas){if(s(L,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");s(L,A).add(this._canvas)}this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:G,viewport:K,transform:U,background:_}=this.params;this.gfx=new _canvas.CanvasGraphics(G,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:D},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:U,viewport:K,transparency:N,background:_}),this.operatorListIdx=0,this.graphicsReady=!0,(rt=this.graphicsReadyCallback)==null||rt.call(this)}cancel(){var D;let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(D=this.gfx)==null||D.endDrawing(),s(L,A).delete(this._canvas),this.callback(S||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,N))}operatorListChanged(){var S;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(S=this.stepper)==null||S.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return ee(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),s(L,A).delete(this._canvas),this.callback())))})}};A=new WeakMap,X(L,A,new WeakSet);let InternalRenderTask=L;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(g,r,t)=>{var e=t(3),n=t(126),l=t(135);e({target:"Set",proto:!0,real:!0,forced:!l("difference")},{difference:n})},(g,r,t)=>{var e=t(127),n=t(128),l=t(129),v=t(132),P=t(133),T=t(130),m=t(131),p=n.has,w=n.remove;g.exports=function(x){var c=e(this),o=P(x),i=l(c);return v(c)<=o.size?T(c,function(d){o.includes(d)&&w(i,d)}):m(o.getIterator(),function(d){p(c,d)&&w(i,d)}),i}},(g,r,t)=>{var e=t(128).has;g.exports=function(n){return e(n),n}},(g,r,t)=>{var e=t(14),n=Set.prototype;g.exports={Set,add:e(n.add),has:e(n.has),remove:e(n.delete),proto:n}},(g,r,t)=>{var e=t(128),n=t(130),l=e.Set,v=e.add;g.exports=function(P){var T=new l;return n(P,function(m){v(T,m)}),T}},(g,r,t)=>{var e=t(14),n=t(131),l=t(128),v=l.Set,P=l.proto,T=e(P.forEach),m=e(P.keys),p=m(new v).next;g.exports=function(w,k,x){return x?n({iterator:m(w),next:p},k):T(w,k)}},(g,r,t)=>{var e=t(8);g.exports=function(n,l,v){for(var P=v?n:n.iterator,T=n.next,m,p;!(m=e(T,P)).done;)if(p=l(m.value),p!==void 0)return p}},(g,r,t)=>{var e=t(72),n=t(128);g.exports=e(n.proto,"size","get")||function(l){return l.size}},(g,r,t)=>{var e=t(31),n=t(47),l=t(8),v=t(62),P=t(134),T="Invalid size",m=RangeError,p=TypeError,w=Math.max,k=function(x,c,o,i){this.set=x,this.size=c,this.has=o,this.keys=i};k.prototype={getIterator:function(){return P(n(l(this.keys,this.set)))},includes:function(x){return l(this.has,this.set,x)}},g.exports=function(x){n(x);var c=+x.size;if(c!==c)throw p(T);var o=v(c);if(o<0)throw m(T);return new k(x,w(o,0),e(x.has),e(x.keys))}},g=>{g.exports=function(r){return{iterator:r,next:r.next,done:!1}}},(g,r,t)=>{var e=t(24),n=function(l){return{size:l,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};g.exports=function(l){var v=e("Set");try{new v()[l](n(0));try{return new v()[l](n(-1)),!1}catch(P){return!0}}catch(P){return!1}}},(g,r,t)=>{var e=t(3),n=t(7),l=t(137),v=t(135),P=!v("intersection")||n(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});e({target:"Set",proto:!0,real:!0,forced:P},{intersection:l})},(g,r,t)=>{var e=t(127),n=t(128),l=t(132),v=t(133),P=t(130),T=t(131),m=n.Set,p=n.add,w=n.has;g.exports=function(x){var c=e(this),o=v(x),i=new m;return l(c)>o.size?T(o.getIterator(),function(d){w(c,d)&&p(i,d)}):P(c,function(d){o.includes(d)&&p(i,d)}),i}},(g,r,t)=>{var e=t(3),n=t(139),l=t(135);e({target:"Set",proto:!0,real:!0,forced:!l("isDisjointFrom")},{isDisjointFrom:n})},(g,r,t)=>{var e=t(127),n=t(128).has,l=t(132),v=t(133),P=t(130),T=t(131),m=t(140);g.exports=function(w){var k=e(this),x=v(w);if(l(k)<=x.size)return P(k,function(o){if(x.includes(o))return!1},!0)!==!1;var c=x.getIterator();return T(c,function(o){if(n(k,o))return m(c,"normal",!1)})!==!1}},(g,r,t)=>{var e=t(8),n=t(47),l=t(30);g.exports=function(v,P,T){var m,p;n(v);try{if(m=l(v,"return"),!m){if(P==="throw")throw T;return T}m=e(m,v)}catch(w){p=!0,m=w}if(P==="throw")throw T;if(p)throw m;return n(m),T}},(g,r,t)=>{var e=t(3),n=t(142),l=t(135);e({target:"Set",proto:!0,real:!0,forced:!l("isSubsetOf")},{isSubsetOf:n})},(g,r,t)=>{var e=t(127),n=t(132),l=t(130),v=t(133);g.exports=function(T){var m=e(this),p=v(T);return n(m)>p.size?!1:l(m,function(w){if(!p.includes(w))return!1},!0)!==!1}},(g,r,t)=>{var e=t(3),n=t(144),l=t(135);e({target:"Set",proto:!0,real:!0,forced:!l("isSupersetOf")},{isSupersetOf:n})},(g,r,t)=>{var e=t(127),n=t(128).has,l=t(132),v=t(133),P=t(131),T=t(140);g.exports=function(p){var w=e(this),k=v(p);if(l(w)<k.size)return!1;var x=k.getIterator();return P(x,function(c){if(!n(w,c))return T(x,"normal",!1)})!==!1}},(g,r,t)=>{var e=t(3),n=t(146),l=t(135);e({target:"Set",proto:!0,real:!0,forced:!l("symmetricDifference")},{symmetricDifference:n})},(g,r,t)=>{var e=t(127),n=t(128),l=t(129),v=t(133),P=t(131),T=n.add,m=n.has,p=n.remove;g.exports=function(k){var x=e(this),c=v(k).getIterator(),o=l(x);return P(c,function(i){m(x,i)?p(o,i):T(o,i)}),o}},(g,r,t)=>{var e=t(3),n=t(148),l=t(135);e({target:"Set",proto:!0,real:!0,forced:!l("union")},{union:n})},(g,r,t)=>{var e=t(127),n=t(128).add,l=t(129),v=t(133),P=t(131);g.exports=function(m){var p=e(this),w=v(m).getIterator(),k=l(p);return P(w,function(x){n(k,x)}),k}},(g,r,t)=>{var e=t(3),n=t(4),l=t(24),v=t(11),P=t(45).f,T=t(39),m=t(150),p=t(75),w=t(76),k=t(151),x=t(82),c=t(6),o=t(36),i="DOMException",d=l("Error"),C=l(i),O=function(){m(this,M);var et=arguments.length,rt=w(et<1?void 0:arguments[0]),Y=w(et<2?void 0:arguments[1],"Error"),st=new C(rt,Y),gt=d(rt);return gt.name=i,P(st,"stack",v(1,x(gt.stack,1))),p(st,this,O),st},M=O.prototype=C.prototype,f="stack"in d(i),A="stack"in new C(1,2),L=C&&c&&Object.getOwnPropertyDescriptor(n,i),F=!!L&&!(L.writable&&L.configurable),S=f&&!F&&!A;e({global:!0,constructor:!0,forced:o||S},{DOMException:S?O:C});var N=l(i),D=N.prototype;if(D.constructor!==N){o||P(D,"constructor",v(1,N));for(var G in k)if(T(k,G)){var K=k[G],U=K.s;T(N,U)||P(N,U,v(6,K.c))}}},(g,r,t)=>{var e=t(25),n=TypeError;g.exports=function(l,v){if(e(v,l))return l;throw n("Incorrect invocation")}},g=>{g.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},(g,r,t)=>{var e=t(36),n=t(3),l=t(4),v=t(24),P=t(14),T=t(7),m=t(41),p=t(21),w=t(153),k=t(17),x=t(20),c=t(23),o=t(154),i=t(47),d=t(78),C=t(39),O=t(159),M=t(44),f=t(64),A=t(85),L=t(160),F=t(162),S=t(128),N=t(83),D=t(119),G=l.Object,K=l.Array,U=l.Date,_=l.Error,et=l.EvalError,rt=l.RangeError,Y=l.ReferenceError,st=l.SyntaxError,gt=l.TypeError,At=l.URIError,wt=l.PerformanceMark,W=l.WebAssembly,u=W&&W.CompileError||_,y=W&&W.LinkError||_,a=W&&W.RuntimeError||_,b=v("DOMException"),E=F.Map,I=F.has,R=F.get,H=F.set,tt=S.Set,q=S.add,ct=v("Object","keys"),ut=P([].push),Et=P((!0).valueOf),mt=P(1 .valueOf),Ot=P("".valueOf),Wt=P(U.prototype.getTime),Pt=m("structuredClone"),Nt="DataCloneError",yt="Transferring",ht=function(ot){return!T(function(){var $=new l.Set([7]),pt=ot($),xt=ot(G(7));return pt===$||!pt.has(7)||typeof xt!="object"||+xt!=7})&&ot},it=function(ot,$){return!T(function(){var pt=new $,xt=ot({a:pt,b:pt});return!(xt&&xt.a===xt.b&&xt.a instanceof $&&xt.a.stack===pt.stack)})},dt=function(ot){return!T(function(){var $=ot(new l.AggregateError([1],Pt,{cause:3}));return $.name!=="AggregateError"||$.errors[0]!==1||$.message!==Pt||$.cause!==3})},It=l.structuredClone,Rt=e||!it(It,_)||!it(It,b)||!dt(It),Ht=!It&&ht(function(ot){return new wt(Pt,{detail:ot}).detail}),Xt=ht(It)||Ht,zt=function(ot){throw new b("Uncloneable type: "+ot,Nt)},Vt=function(ot,$){throw new b(($||"Cloning")+" of "+ot+" cannot be properly polyfilled in this engine",Nt)},Kt=function(ot,$){return Xt||Vt($),Xt(ot)},Jt=function(){var ot;try{ot=new l.DataTransfer}catch($){try{ot=new l.ClipboardEvent("").clipboardData}catch(pt){}}return ot&&ot.items&&ot.files?ot:null},Zt=function(ot,$,pt){if(I($,ot))return R($,ot);var xt=pt||d(ot),St,kt,vt,$t,Tt,Lt;if(xt==="SharedArrayBuffer")Xt?St=Xt(ot):St=ot;else{var Dt=l.DataView;!Dt&&typeof ot.slice!="function"&&Vt("ArrayBuffer");try{if(typeof ot.slice=="function"&&!ot.resizable)St=ot.slice(0);else for(kt=ot.byteLength,vt=("maxByteLength"in ot)?{maxByteLength:ot.maxByteLength}:void 0,St=new ArrayBuffer(kt,vt),$t=new Dt(ot),Tt=new Dt(St),Lt=0;Lt<kt;Lt++)Tt.setUint8(Lt,$t.getUint8(Lt))}catch(z){throw new b("ArrayBuffer is detached",Nt)}}return H($,ot,St),St},Gt=function(ot,$,pt,xt,St){var kt=l[$];return x(kt)||Vt($),new kt(Zt(ot.buffer,St),pt,xt)},bt=function(ot,$,pt){this.object=ot,this.type=$,this.metadata=pt},Z=function(ot,$,pt){if(c(ot)&&zt("Symbol"),!x(ot))return ot;if($){if(I($,ot))return R($,ot)}else $=new E;var xt=d(ot),St,kt,vt,$t,Tt,Lt,Dt,z;switch(xt){case"Array":vt=K(f(ot));break;case"Object":vt={};break;case"Map":vt=new E;break;case"Set":vt=new tt;break;case"RegExp":vt=new RegExp(ot.source,L(ot));break;case"Error":switch(kt=ot.name,kt){case"AggregateError":vt=v("AggregateError")([]);break;case"EvalError":vt=et();break;case"RangeError":vt=rt();break;case"ReferenceError":vt=Y();break;case"SyntaxError":vt=st();break;case"TypeError":vt=gt();break;case"URIError":vt=At();break;case"CompileError":vt=u();break;case"LinkError":vt=y();break;case"RuntimeError":vt=a();break;default:vt=_()}break;case"DOMException":vt=new b(ot.message,ot.name);break;case"ArrayBuffer":case"SharedArrayBuffer":vt=pt?new bt(ot,xt):Zt(ot,$,xt);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Lt=xt==="DataView"?ot.byteLength:ot.length,vt=pt?new bt(ot,xt,{offset:ot.byteOffset,length:Lt}):Gt(ot,xt,ot.byteOffset,Lt,$);break;case"DOMQuad":try{vt=new DOMQuad(Z(ot.p1,$,pt),Z(ot.p2,$,pt),Z(ot.p3,$,pt),Z(ot.p4,$,pt))}catch(h){vt=Kt(ot,xt)}break;case"File":if(Xt)try{vt=Xt(ot),d(vt)!==xt&&(vt=void 0)}catch(h){}if(!vt)try{vt=new File([ot],ot.name,ot)}catch(h){}vt||Vt(xt);break;case"FileList":if($t=Jt(),$t){for(Tt=0,Lt=f(ot);Tt<Lt;Tt++)$t.items.add(Z(ot[Tt],$,pt));vt=$t.files}else vt=Kt(ot,xt);break;case"ImageData":try{vt=new ImageData(Z(ot.data,$,pt),ot.width,ot.height,{colorSpace:ot.colorSpace})}catch(h){vt=Kt(ot,xt)}break;default:if(Xt)vt=Xt(ot);else switch(xt){case"BigInt":vt=G(ot.valueOf());break;case"Boolean":vt=G(Et(ot));break;case"Number":vt=G(mt(ot));break;case"String":vt=G(Ot(ot));break;case"Date":vt=new U(Wt(ot));break;case"Blob":try{vt=ot.slice(0,ot.size,ot.type)}catch(h){Vt(xt)}break;case"DOMPoint":case"DOMPointReadOnly":St=l[xt];try{vt=St.fromPoint?St.fromPoint(ot):new St(ot.x,ot.y,ot.z,ot.w)}catch(h){Vt(xt)}break;case"DOMRect":case"DOMRectReadOnly":St=l[xt];try{vt=St.fromRect?St.fromRect(ot):new St(ot.x,ot.y,ot.width,ot.height)}catch(h){Vt(xt)}break;case"DOMMatrix":case"DOMMatrixReadOnly":St=l[xt];try{vt=St.fromMatrix?St.fromMatrix(ot):new St(ot)}catch(h){Vt(xt)}break;case"AudioData":case"VideoFrame":p(ot.clone)||Vt(xt);try{vt=ot.clone()}catch(h){zt(xt)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Vt(xt);default:zt(xt)}}switch(H($,ot,vt),xt){case"Array":case"Object":for(Dt=ct(ot),Tt=0,Lt=f(Dt);Tt<Lt;Tt++)z=Dt[Tt],O(vt,z,Z(ot[z],$,pt));break;case"Map":ot.forEach(function(h,B){H(vt,Z(B,$,pt),Z(h,$,pt))});break;case"Set":ot.forEach(function(h){q(vt,Z(h,$,pt))});break;case"Error":M(vt,"message",Z(ot.message,$,pt)),C(ot,"cause")&&M(vt,"cause",Z(ot.cause,$,pt)),kt==="AggregateError"&&(vt.errors=Z(ot.errors,$,pt));case"DOMException":N&&M(vt,"stack",Z(ot.stack,$,pt))}return vt},J=function(ot,$){if(!x(ot))return ot;if(I($,ot))return R($,ot);var pt,xt,St,kt,vt,$t,Tt,Lt;if(ot instanceof bt)switch(pt=ot.type,xt=ot.object,pt){case"ArrayBuffer":case"SharedArrayBuffer":Lt=Zt(xt,$,pt);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":St=ot.metadata,Lt=Gt(xt,pt,St.offset,St.length,$)}else switch(d(ot)){case"Array":case"Object":for($t=ct(ot),kt=0,vt=f($t);kt<vt;kt++)Tt=$t[kt],ot[Tt]=J(ot[Tt],$);break;case"Map":Lt=new E,ot.forEach(function(Dt,z){H(Lt,J(z,$),J(Dt,$))});break;case"Set":Lt=new tt,ot.forEach(function(Dt){q(Lt,J(Dt,$))});break;case"Error":ot.message=J(ot.message,$),C(ot,"cause")&&(ot.cause=J(ot.cause,$)),ot.name==="AggregateError"&&(ot.errors=J(ot.errors,$));case"DOMException":N&&(ot.stack=J(ot.stack,$))}return H($,ot,Lt||ot),Lt||ot},ft=function(ot,$){if(!x(ot))throw gt("Transfer option cannot be converted to a sequence");var pt=[];o(ot,function(h){ut(pt,i(h))});for(var xt=0,St=f(pt),kt=[],vt,$t,Tt,Lt,Dt,z;xt<St;){if(vt=pt[xt++],$t=d(vt),$t==="ArrayBuffer"){ut(kt,vt);continue}if(I($,vt))throw new b("Duplicate transferable",Nt);if(D)Lt=It(vt,{transfer:[vt]});else switch($t){case"ImageBitmap":Tt=l.OffscreenCanvas,w(Tt)||Vt($t,yt);try{Dt=new Tt(vt.width,vt.height),z=Dt.getContext("bitmaprenderer"),z.transferFromImageBitmap(vt),Lt=Dt.transferToImageBitmap()}catch(h){}break;case"AudioData":case"VideoFrame":(!p(vt.clone)||!p(vt.close))&&Vt($t,yt);try{Lt=vt.clone(),vt.close()}catch(h){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":Vt($t,yt)}if(Lt===void 0)throw new b("This object cannot be transferred: "+$t,Nt);H($,vt,Lt)}return kt},jt=function(ot,$){for(var pt=0,xt=f(ot),St,kt;pt<xt;){if(St=ot[pt++],I($,St))throw new b("Duplicate transferable",Nt);D?kt=It(St,{transfer:[St]}):(p(St.transfer)||Vt("ArrayBuffer",yt),kt=St.transfer()),H($,St,kt)}};n({global:!0,enumerable:!0,sham:!D,forced:Rt},{structuredClone:function($){var pt=A(arguments.length,1)>1&&!k(arguments[1])?i(arguments[1]):void 0,xt=pt?pt.transfer:void 0,St=!1,kt,vt;xt!==void 0&&(kt=new E,vt=ft(xt,kt),St=!!f(vt));var $t=Z($,kt,St);return St&&(kt=new E,jt(xt,kt),$t=J($t,kt)),$t}})},(g,r,t)=>{var e=t(14),n=t(7),l=t(21),v=t(78),P=t(24),T=t(51),m=function(){},p=[],w=P("Reflect","construct"),k=/^\s*(?:class|function)\b/,x=e(k.exec),c=!k.exec(m),o=function(C){if(!l(C))return!1;try{return w(m,p,C),!0}catch(O){return!1}},i=function(C){if(!l(C))return!1;switch(v(C)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return c||!!x(k,T(C))}catch(O){return!0}};i.sham=!0,g.exports=!w||n(function(){var d;return o(o.call)||!o(Object)||!o(function(){d=!0})||d})?i:o},(g,r,t)=>{var e=t(99),n=t(8),l=t(47),v=t(32),P=t(155),T=t(64),m=t(25),p=t(157),w=t(158),k=t(140),x=TypeError,c=function(i,d){this.stopped=i,this.result=d},o=c.prototype;g.exports=function(i,d,C){var O=C&&C.that,M=!!(C&&C.AS_ENTRIES),f=!!(C&&C.IS_RECORD),A=!!(C&&C.IS_ITERATOR),L=!!(C&&C.INTERRUPTED),F=e(d,O),S,N,D,G,K,U,_,et=function(Y){return S&&k(S,"normal",Y),new c(!0,Y)},rt=function(Y){return M?(l(Y),L?F(Y[0],Y[1],et):F(Y[0],Y[1])):L?F(Y,et):F(Y)};if(f)S=i.iterator;else if(A)S=i;else{if(N=w(i),!N)throw x(v(i)+" is not iterable");if(P(N)){for(D=0,G=T(i);G>D;D++)if(K=rt(i[D]),K&&m(o,K))return K;return new c(!1)}S=p(i,N)}for(U=f?i.next:S.next;!(_=n(U,S)).done;){try{K=rt(_.value)}catch(Y){k(S,"throw",Y)}if(typeof K=="object"&&K&&m(o,K))return K}return new c(!1)}},(g,r,t)=>{var e=t(34),n=t(156),l=e("iterator"),v=Array.prototype;g.exports=function(P){return P!==void 0&&(n.Array===P||v[l]===P)}},g=>{g.exports={}},(g,r,t)=>{var e=t(8),n=t(31),l=t(47),v=t(32),P=t(158),T=TypeError;g.exports=function(m,p){var w=arguments.length<2?P(m):p;if(n(w))return l(e(w,m));throw T(v(m)+" is not iterable")}},(g,r,t)=>{var e=t(78),n=t(30),l=t(17),v=t(156),P=t(34),T=P("iterator");g.exports=function(m){if(!l(m))return n(m,T)||n(m,"@@iterator")||v[e(m)]}},(g,r,t)=>{var e=t(18),n=t(45),l=t(11);g.exports=function(v,P,T){var m=e(P);m in v?n.f(v,m,l(0,T)):v[m]=T}},(g,r,t)=>{var e=t(8),n=t(39),l=t(25),v=t(161),P=RegExp.prototype;g.exports=function(T){var m=T.flags;return m===void 0&&!("flags"in P)&&!n(T,"flags")&&l(P,T)?e(v,T):m}},(g,r,t)=>{var e=t(47);g.exports=function(){var n=e(this),l="";return n.hasIndices&&(l+="d"),n.global&&(l+="g"),n.ignoreCase&&(l+="i"),n.multiline&&(l+="m"),n.dotAll&&(l+="s"),n.unicode&&(l+="u"),n.unicodeSets&&(l+="v"),n.sticky&&(l+="y"),l}},(g,r,t)=>{var e=t(14),n=Map.prototype;g.exports={Map,set:e(n.set),get:e(n.get),has:e(n.has),remove:e(n.delete),proto:n}},(g,r,t)=>{var m,p,w,kn,x;Object.defineProperty(r,"__esModule",{value:!0}),r.SerializableEmpty=r.PrintAnnotationStorage=r.AnnotationStorage=void 0,t(89),t(149),t(152);var e=t(1),n=t(164),l=t(170);const v=Object.freeze({map:null,hash:"",transfers:void 0});r.SerializableEmpty=v;class P{constructor(){X(this,w);X(this,m,!1);X(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(o,i){const d=s(this,p).get(o);return d===void 0?i:Object.assign(i,d)}getRawValue(o){return s(this,p).get(o)}remove(o){if(s(this,p).delete(o),s(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of s(this,p).values())if(i instanceof n.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(o,i){const d=s(this,p).get(o);let C=!1;if(d!==void 0)for(const[O,M]of Object.entries(i))d[O]!==M&&(C=!0,d[O]=M);else C=!0,s(this,p).set(o,i);C&&j(this,w,kn).call(this),i instanceof n.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(o){return s(this,p).has(o)}getAll(){return s(this,p).size>0?(0,e.objectFromMap)(s(this,p)):null}setAll(o){for(const[i,d]of Object.entries(o))this.setValue(i,d)}get size(){return s(this,p).size}resetModified(){s(this,m)&&(at(this,m,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(s(this,p).size===0)return v;const o=new Map,i=new l.MurmurHash3_64,d=[],C=Object.create(null);let O=!1;for(const[M,f]of s(this,p)){const A=f instanceof n.AnnotationEditor?f.serialize(!1,C):f;A&&(o.set(M,A),i.update(`${M}:${JSON.stringify(A)}`),O||(O=!!A.bitmap))}if(O)for(const M of o.values())M.bitmap&&d.push(M.bitmap);return o.size>0?{map:o,hash:i.hexdigest(),transfers:d}:v}}m=new WeakMap,p=new WeakMap,w=new WeakSet,kn=function(){s(this,m)||(at(this,m,!0),typeof this.onSetModified=="function"&&this.onSetModified())},r.AnnotationStorage=P;class T extends P{constructor(i){super();X(this,x,void 0);const{map:d,hash:C,transfers:O}=i.serializable,M=structuredClone(d,null);at(this,x,{map:M,hash:C,transfers:O})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return s(this,x)}}x=new WeakMap,r.PrintAnnotationStorage=T},(g,r,t)=>{var T,m,p,w,k,x,c,o,i,d,C,O,M,f,A,Ve,F,Xe,N,_e,G,Ye,U,Pn,et,Rn,Y,wn,gt,Ke,wt,Mn;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0,t(89),t(2);var e=t(165),n=t(1),l=t(168);const u=class u{constructor(a){X(this,A);X(this,F);X(this,G);X(this,U);X(this,et);X(this,Y);X(this,gt);X(this,wt);X(this,T,"");X(this,m,!1);X(this,p,null);X(this,w,null);X(this,k,null);X(this,x,!1);X(this,c,null);X(this,o,this.focusin.bind(this));X(this,i,this.focusout.bind(this));X(this,d,!1);X(this,C,!1);X(this,O,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);X(this,M,!1);X(this,f,u._zIndex++);this.constructor===u&&(0,n.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:b,rawDims:{pageWidth:E,pageHeight:I,pageX:R,pageY:H}}=this.parent.viewport;this.rotation=b,this.pageRotation=(360+b-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[E,I],this.pageTranslation=[R,H];const[tt,q]=this.parentDimensions;this.x=a.x/tt,this.y=a.y/q,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,n.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const b=new P({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});b.annotationElementId=a.annotationElementId,b.deleted=!0,b._uiManager.addToAnnotationStorage(b)}static initialize(a){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(u._l10nPromise||(u._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(I=>[I,a.get(I)]))),b!=null&&b.strings)for(const I of b.strings)u._l10nPromise.set(I,a.get(I));if(u._borderLineWidth!==-1)return;const E=getComputedStyle(document.documentElement);u._borderLineWidth=parseFloat(E.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,b){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,b){(0,n.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return s(this,M)}set _isDraggable(a){var b;at(this,M,a),(b=this.div)==null||b.classList.toggle("draggable",a)}center(){const[a,b]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*b/(a*2),this.y+=this.width*a/(b*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*b/(a*2),this.y-=this.width*a/(b*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=s(this,f)}setParent(a){a!==null&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(s(this,d)?at(this,d,!1):this.parent.setSelected(this))}focusout(a){var E;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const b=a.relatedTarget;b!=null&&b.closest(`#${this.id}`)||(a.preventDefault(),(E=this.parent)!=null&&E.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,b,E,I){const[R,H]=this.parentDimensions;[E,I]=this.screenToPageTranslation(E,I),this.x=(a+E)/R,this.y=(b+I)/H,this.fixAndSetPosition()}translate(a,b){j(this,A,Ve).call(this,this.parentDimensions,a,b)}translateInPage(a,b){j(this,A,Ve).call(this,this.pageDimensions,a,b),this.div.scrollIntoView({block:"nearest"})}drag(a,b){const[E,I]=this.parentDimensions;if(this.x+=a/E,this.y+=b/I,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ct,y:ut}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ct,ut)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:R,y:H}=this;const[tt,q]=j(this,F,Xe).call(this);R+=tt,H+=q,this.div.style.left=`${(100*R).toFixed(2)}%`,this.div.style.top=`${(100*H).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[a,b]=this.pageDimensions;let{x:E,y:I,width:R,height:H}=this;switch(R*=a,H*=b,E*=a,I*=b,this.rotation){case 0:E=Math.max(0,Math.min(a-R,E)),I=Math.max(0,Math.min(b-H,I));break;case 90:E=Math.max(0,Math.min(a-H,E)),I=Math.min(b,Math.max(R,I));break;case 180:E=Math.min(a,Math.max(R,E)),I=Math.min(b,Math.max(H,I));break;case 270:E=Math.min(a,Math.max(H,E)),I=Math.max(0,Math.min(b-R,I));break}this.x=E/=a,this.y=I/=b;const[tt,q]=j(this,F,Xe).call(this);E+=tt,I+=q;const{style:ct}=this.div;ct.left=`${(100*E).toFixed(2)}%`,ct.top=`${(100*I).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(a,b){var E;return j(E=u,N,_e).call(E,a,b,this.parentRotation)}pageTranslationToScreen(a,b){var E;return j(E=u,N,_e).call(E,a,b,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[b,E]}=this,I=b*a,R=E*a;return n.FeatureTest.isCSSRoundSupported?[Math.round(I),Math.round(R)]:[I,R]}setDims(a,b){var R;const[E,I]=this.parentDimensions;this.div.style.width=`${(100*a/E).toFixed(2)}%`,s(this,x)||(this.div.style.height=`${(100*b/I).toFixed(2)}%`),(R=s(this,p))==null||R.classList.toggle("small",a<u.SMALL_EDITOR_SIZE||b<u.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:b,width:E}=a,I=E.endsWith("%"),R=!s(this,x)&&b.endsWith("%");if(I&&R)return;const[H,tt]=this.parentDimensions;I||(a.width=`${(100*parseFloat(E)/H).toFixed(2)}%`),!s(this,x)&&!R&&(a.height=`${(100*parseFloat(b)/tt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}addAltTextButton(){return ee(this,null,function*(){if(s(this,p))return;const a=at(this,p,document.createElement("button"));a.className="altText";const b=yield u._l10nPromise.get("editor_alt_text_button_label");a.textContent=b,a.setAttribute("aria-label",b),a.tabIndex="0",a.addEventListener("contextmenu",l.noContextMenu),a.addEventListener("pointerdown",E=>E.stopPropagation()),a.addEventListener("click",E=>{E.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),a.addEventListener("keydown",E=>{E.target===a&&E.key==="Enter"&&(E.preventDefault(),this._uiManager.editAltText(this))}),j(this,gt,Ke).call(this),this.div.append(a),u.SMALL_EDITOR_SIZE||(u.SMALL_EDITOR_SIZE=Math.min(128,Math.round(a.getBoundingClientRect().width*1.4)))})}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:s(this,T),decorative:s(this,m)}}set altTextData(a){let{altText:b,decorative:E}=a;s(this,T)===b&&s(this,m)===E||(at(this,T,b),at(this,m,E),j(this,gt,Ke).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",s(this,o)),this.div.addEventListener("focusout",s(this,i));const[a,b]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*b/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/b).toFixed(2)}%`);const[E,I]=this.getInitialTranslation();return this.translate(E,I),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:b}=n.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&b){a.preventDefault();return}at(this,d,!0),j(this,wt,Mn).call(this,a)}moveInDOM(){var a;(a=this.parent)==null||a.moveEditorInDOM(this)}_setParentAndPosition(a,b,E){a.changeParent(this),this.x=b,this.y=E,this.fixAndSetPosition()}getRect(a,b){const E=this.parentScale,[I,R]=this.pageDimensions,[H,tt]=this.pageTranslation,q=a/E,ct=b/E,ut=this.x*I,Et=this.y*R,mt=this.width*I,Ot=this.height*R;switch(this.rotation){case 0:return[ut+q+H,R-Et-ct-Ot+tt,ut+q+mt+H,R-Et-ct+tt];case 90:return[ut+ct+H,R-Et+q+tt,ut+ct+Ot+H,R-Et+q+mt+tt];case 180:return[ut-q-mt+H,R-Et+ct+tt,ut-q+H,R-Et+ct+Ot+tt];case 270:return[ut-ct-Ot+H,R-Et-q-mt+tt,ut-ct+H,R-Et-q+tt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,b){const[E,I,R,H]=a,tt=R-E,q=H-I;switch(this.rotation){case 0:return[E,b-H,tt,q];case 90:return[E,b-I,q,tt];case 180:return[R,b-I,tt,q];case 270:return[R,b-H,q,tt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){at(this,O,!0)}disableEditMode(){at(this,O,!1)}isInEditMode(){return s(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a,b;(a=this.div)==null||a.addEventListener("focusin",s(this,o)),(b=this.div)==null||b.addEventListener("focusout",s(this,i))}serialize(){(0,n.unreachable)("An editor must be serializable")}static deserialize(a,b,E){const I=new this.prototype.constructor({parent:b,id:b.getNextId(),uiManager:E});I.rotation=a.rotation;const[R,H]=I.pageDimensions,[tt,q,ct,ut]=I.getRectInCurrentCoords(a.rect,H);return I.x=tt/R,I.y=q/H,I.width=ct/R,I.height=ut/H,I}remove(){var a;this.div.removeEventListener("focusin",s(this,o)),this.div.removeEventListener("focusout",s(this,i)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(a=s(this,p))==null||a.remove(),at(this,p,null),at(this,w,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(j(this,U,Pn).call(this),s(this,c).classList.remove("hidden"))}select(){var a;this.makeResizable(),(a=this.div)==null||a.classList.add("selectedEditor")}unselect(){var a,b,E;(a=s(this,c))==null||a.classList.add("hidden"),(b=this.div)==null||b.classList.remove("selectedEditor"),(E=this.div)!=null&&E.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,b){}disableEditing(){s(this,p)&&(s(this,p).hidden=!0)}enableEditing(){s(this,p)&&(s(this,p).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return s(this,C)}set isEditing(a){at(this,C,a),this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,b){at(this,x,!0);const E=a/b,{style:I}=this.div;I.aspectRatio=E,I.height="auto"}static get MIN_SIZE(){return 16}};T=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,c=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakMap,C=new WeakMap,O=new WeakMap,M=new WeakMap,f=new WeakMap,A=new WeakSet,Ve=function(a,b,E){let[I,R]=a;[b,E]=this.screenToPageTranslation(b,E),this.x+=b/I,this.y+=E/R,this.fixAndSetPosition()},F=new WeakSet,Xe=function(){const[a,b]=this.parentDimensions,{_borderLineWidth:E}=u,I=E/a,R=E/b;switch(this.rotation){case 90:return[-I,R];case 180:return[I,R];case 270:return[I,-R];default:return[-I,-R]}},N=new WeakSet,_e=function(a,b,E){switch(E){case 90:return[b,-a];case 180:return[-a,-b];case 270:return[-b,a];default:return[a,b]}},G=new WeakSet,Ye=function(a){switch(a){case 90:{const[b,E]=this.pageDimensions;return[0,-b/E,E/b,0]}case 180:return[-1,0,0,-1];case 270:{const[b,E]=this.pageDimensions;return[0,b/E,-E/b,0]}default:return[1,0,0,1]}},U=new WeakSet,Pn=function(){if(s(this,c))return;at(this,c,document.createElement("div")),s(this,c).classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const b of a){const E=document.createElement("div");s(this,c).append(E),E.classList.add("resizer",b),E.addEventListener("pointerdown",j(this,et,Rn).bind(this,b)),E.addEventListener("contextmenu",l.noContextMenu)}this.div.prepend(s(this,c))},et=new WeakSet,Rn=function(a,b){b.preventDefault();const{isMac:E}=n.FeatureTest.platform;if(b.button!==0||b.ctrlKey&&E)return;const I=j(this,Y,wn).bind(this,a),R=this._isDraggable;this._isDraggable=!1;const H={passive:!0,capture:!0};window.addEventListener("pointermove",I,H);const tt=this.x,q=this.y,ct=this.width,ut=this.height,Et=this.parent.div.style.cursor,mt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(b.target).cursor;const Ot=()=>{this._isDraggable=R,window.removeEventListener("pointerup",Ot),window.removeEventListener("blur",Ot),window.removeEventListener("pointermove",I,H),this.parent.div.style.cursor=Et,this.div.style.cursor=mt;const Wt=this.x,Pt=this.y,Nt=this.width,yt=this.height;Wt===tt&&Pt===q&&Nt===ct&&yt===ut||this.addCommands({cmd:()=>{this.width=Nt,this.height=yt,this.x=Wt,this.y=Pt;const[ht,it]=this.parentDimensions;this.setDims(ht*Nt,it*yt),this.fixAndSetPosition()},undo:()=>{this.width=ct,this.height=ut,this.x=tt,this.y=q;const[ht,it]=this.parentDimensions;this.setDims(ht*ct,it*ut),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ot),window.addEventListener("blur",Ot)},Y=new WeakSet,wn=function(a,b){const[E,I]=this.parentDimensions,R=this.x,H=this.y,tt=this.width,q=this.height,ct=u.MIN_SIZE/E,ut=u.MIN_SIZE/I,Et=J=>Math.round(J*1e4)/1e4,mt=j(this,G,Ye).call(this,this.rotation),Ot=(J,ft)=>[mt[0]*J+mt[2]*ft,mt[1]*J+mt[3]*ft],Wt=j(this,G,Ye).call(this,360-this.rotation),Pt=(J,ft)=>[Wt[0]*J+Wt[2]*ft,Wt[1]*J+Wt[3]*ft];let Nt,yt,ht=!1,it=!1;switch(a){case"topLeft":ht=!0,Nt=(J,ft)=>[0,0],yt=(J,ft)=>[J,ft];break;case"topMiddle":Nt=(J,ft)=>[J/2,0],yt=(J,ft)=>[J/2,ft];break;case"topRight":ht=!0,Nt=(J,ft)=>[J,0],yt=(J,ft)=>[0,ft];break;case"middleRight":it=!0,Nt=(J,ft)=>[J,ft/2],yt=(J,ft)=>[0,ft/2];break;case"bottomRight":ht=!0,Nt=(J,ft)=>[J,ft],yt=(J,ft)=>[0,0];break;case"bottomMiddle":Nt=(J,ft)=>[J/2,ft],yt=(J,ft)=>[J/2,0];break;case"bottomLeft":ht=!0,Nt=(J,ft)=>[0,ft],yt=(J,ft)=>[J,0];break;case"middleLeft":it=!0,Nt=(J,ft)=>[0,ft/2],yt=(J,ft)=>[J,ft/2];break}const dt=Nt(tt,q),It=yt(tt,q);let Rt=Ot(...It);const Ht=Et(R+Rt[0]),Xt=Et(H+Rt[1]);let zt=1,Vt=1,[Kt,Jt]=this.screenToPageTranslation(b.movementX,b.movementY);if([Kt,Jt]=Pt(Kt/E,Jt/I),ht){const J=Math.hypot(tt,q);zt=Vt=Math.max(Math.min(Math.hypot(It[0]-dt[0]-Kt,It[1]-dt[1]-Jt)/J,1/tt,1/q),ct/tt,ut/q)}else it?zt=Math.max(ct,Math.min(1,Math.abs(It[0]-dt[0]-Kt)))/tt:Vt=Math.max(ut,Math.min(1,Math.abs(It[1]-dt[1]-Jt)))/q;const Zt=Et(tt*zt),Gt=Et(q*Vt);Rt=Ot(...yt(Zt,Gt));const bt=Ht-Rt[0],Z=Xt-Rt[1];this.width=Zt,this.height=Gt,this.x=bt,this.y=Z,this.setDims(E*Zt,I*Gt),this.fixAndSetPosition()},gt=new WeakSet,Ke=function(){return ee(this,null,function*(){var E;const a=s(this,p);if(!a)return;if(!s(this,T)&&!s(this,m)){a.classList.remove("done"),(E=s(this,w))==null||E.remove();return}u._l10nPromise.get("editor_alt_text_edit_button_label").then(I=>{a.setAttribute("aria-label",I)});let b=s(this,w);if(!b){at(this,w,b=document.createElement("span")),b.className="tooltip",b.setAttribute("role","tooltip");const I=b.id=`alt-text-tooltip-${this.id}`;a.setAttribute("aria-describedby",I);const R=100;a.addEventListener("mouseenter",()=>{at(this,k,setTimeout(()=>{at(this,k,null),s(this,w).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},R))}),a.addEventListener("mouseleave",()=>{var H;clearTimeout(s(this,k)),at(this,k,null),(H=s(this,w))==null||H.classList.remove("show")})}a.classList.add("done"),b.innerText=s(this,m)?yield u._l10nPromise.get("editor_alt_text_decorative_tooltip"):s(this,T),b.parentNode||a.append(b)})},wt=new WeakSet,Mn=function(a){if(!this._isDraggable)return;const b=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let E,I;b&&(E={passive:!0,capture:!0},I=H=>{const[tt,q]=this.screenToPageTranslation(H.movementX,H.movementY);this._uiManager.dragSelectedEditors(tt,q)},window.addEventListener("pointermove",I,E));const R=()=>{if(window.removeEventListener("pointerup",R),window.removeEventListener("blur",R),b&&window.removeEventListener("pointermove",I,E),at(this,d,!1),!this._uiManager.endDragSession()){const{isMac:H}=n.FeatureTest.platform;a.ctrlKey&&!H||a.shiftKey||a.metaKey&&H?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",R),window.addEventListener("blur",R)},X(u,N),ne(u,"_borderLineWidth",-1),ne(u,"_colorManager",new e.ColorManager),ne(u,"_zIndex",1),ne(u,"SMALL_EDITOR_SIZE",0);let v=u;r.AnnotationEditor=v;class P extends v{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(g,r,t)=>{var x,c,o,i,d,Je,M,f,A,L,F,Fn,D,G,K,U,_,et,rt,Y,st,gt,At,wt,W,u,y,a,b,E,I,R,H,tt,q,ct,ut,Et,mt,Ot,Wt,Pt,Nt,yt,ht,it,dt,In,Rt,Qe,Xt,Ze,Vt,Re,Jt,je,Gt,qe,Z,ae,ft,ye,ot,On,pt,Dn,St,tn,vt,Ae,Tt,en;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=l,r.opacityToHex=v,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2),t(89),t(125),t(136),t(138),t(141),t(143),t(145),t(147),t(166);var e=t(1),n=t(168);function l(z,h,B){for(const V of B)h.addEventListener(V,z[V].bind(z))}function v(z){return Math.round(Math.min(255,Math.max(1,255*z))).toString(16).padStart(2,"0")}class P{constructor(){X(this,x,0)}getId(){return`${e.AnnotationEditorPrefix}${be(this,x)._++}`}}x=new WeakMap;const O=class O{constructor(){X(this,d);X(this,c,(0,e.getUuid)());X(this,o,0);X(this,i,null)}static get _isSVGFittingCanvas(){const h='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',V=new OffscreenCanvas(1,3).getContext("2d"),Q=new Image;Q.src=h;const nt=Q.decode().then(()=>(V.drawImage(Q,0,0,1,1,0,0,1,3),new Uint32Array(V.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",nt)}getFromFile(h){return ee(this,null,function*(){const{lastModified:B,name:V,size:Q,type:nt}=h;return j(this,d,Je).call(this,`${B}_${V}_${Q}_${nt}`,h)})}getFromUrl(h){return ee(this,null,function*(){return j(this,d,Je).call(this,h,h)})}getFromId(h){return ee(this,null,function*(){s(this,i)||at(this,i,new Map);const B=s(this,i).get(h);return B?B.bitmap?(B.refCounter+=1,B):B.file?this.getFromFile(B.file):this.getFromUrl(B.url):null})}getSvgUrl(h){const B=s(this,i).get(h);return B!=null&&B.isSvg?B.svgUrl:null}deleteId(h){s(this,i)||at(this,i,new Map);const B=s(this,i).get(h);B&&(B.refCounter-=1,B.refCounter===0&&(B.bitmap=null))}isValidId(h){return h.startsWith(`image_${s(this,c)}_`)}};c=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakSet,Je=function(h,B){return ee(this,null,function*(){s(this,i)||at(this,i,new Map);let V=s(this,i).get(h);if(V===null)return null;if(V!=null&&V.bitmap)return V.refCounter+=1,V;try{V||(V={bitmap:null,id:`image_${s(this,c)}_${be(this,o)._++}`,refCounter:0,isSvg:!1});let Q;if(typeof B=="string"){V.url=B;const nt=yield fetch(B);if(!nt.ok)throw new Error(nt.statusText);Q=yield nt.blob()}else Q=V.file=B;if(Q.type==="image/svg+xml"){const nt=O._isSVGFittingCanvas,lt=new FileReader,Ct=new Image,Ft=new Promise((Mt,Qt)=>{Ct.onload=()=>{V.bitmap=Ct,V.isSvg=!0,Mt()},lt.onload=()=>ee(this,null,function*(){const Ut=V.svgUrl=lt.result;Ct.src=(yield nt)?`${Ut}#svgView(preserveAspectRatio(none))`:Ut}),Ct.onerror=lt.onerror=Qt});lt.readAsDataURL(Q),yield Ft}else V.bitmap=yield createImageBitmap(Q);V.refCounter=1}catch(Q){console.error(Q),V=null}return s(this,i).set(h,V),V&&s(this,i).set(V.id,V),V})};let T=O;class m{constructor(){X(this,M,[]);X(this,f,!1);X(this,A,void 0);X(this,L,-1);let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;at(this,A,h)}add(h){let{cmd:B,undo:V,mustExec:Q,type:nt=NaN,overwriteIfSameType:lt=!1,keepUndo:Ct=!1}=h;if(Q&&B(),s(this,f))return;const Ft={cmd:B,undo:V,type:nt};if(s(this,L)===-1){s(this,M).length>0&&(s(this,M).length=0),at(this,L,0),s(this,M).push(Ft);return}if(lt&&s(this,M)[s(this,L)].type===nt){Ct&&(Ft.undo=s(this,M)[s(this,L)].undo),s(this,M)[s(this,L)]=Ft;return}const Mt=s(this,L)+1;Mt===s(this,A)?s(this,M).splice(0,1):(at(this,L,Mt),Mt<s(this,M).length&&s(this,M).splice(Mt)),s(this,M).push(Ft)}undo(){s(this,L)!==-1&&(at(this,f,!0),s(this,M)[s(this,L)].undo(),at(this,f,!1),at(this,L,s(this,L)-1))}redo(){s(this,L)<s(this,M).length-1&&(at(this,L,s(this,L)+1),at(this,f,!0),s(this,M)[s(this,L)].cmd(),at(this,f,!1))}hasSomethingToUndo(){return s(this,L)!==-1}hasSomethingToRedo(){return s(this,L)<s(this,M).length-1}destroy(){at(this,M,null)}}M=new WeakMap,f=new WeakMap,A=new WeakMap,L=new WeakMap,r.CommandManager=m;class p{constructor(h){X(this,F);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:B}=e.FeatureTest.platform;for(const[V,Q,nt={}]of h)for(const lt of V){const Ct=lt.startsWith("mac+");B&&Ct?(this.callbacks.set(lt.slice(4),{callback:Q,options:nt}),this.allKeys.add(lt.split("+").at(-1))):!B&&!Ct&&(this.callbacks.set(lt,{callback:Q,options:nt}),this.allKeys.add(lt.split("+").at(-1)))}}exec(h,B){if(!this.allKeys.has(B.key))return;const V=this.callbacks.get(j(this,F,Fn).call(this,B));if(!V)return;const{callback:Q,options:{bubbles:nt=!1,args:lt=[],checker:Ct=null}}=V;Ct&&!Ct(h,B)||(Q.bind(h,...lt)(),nt||(B.stopPropagation(),B.preventDefault()))}}F=new WeakSet,Fn=function(h){h.altKey&&this.buffer.push("alt"),h.ctrlKey&&this.buffer.push("ctrl"),h.metaKey&&this.buffer.push("meta"),h.shiftKey&&this.buffer.push("shift"),this.buffer.push(h.key);const B=this.buffer.join("+");return this.buffer.length=0,B},r.KeyboardManager=p;const N=class N{get _colors(){const h=new Map([["CanvasText",null],["Canvas",null]]);return(0,n.getColorValues)(h),(0,e.shadow)(this,"_colors",h)}convert(h){const B=(0,n.getRGB)(h);if(!window.matchMedia("(forced-colors: active)").matches)return B;for(const[V,Q]of this._colors)if(Q.every((nt,lt)=>nt===B[lt]))return N._colorsMapping.get(V);return B}getHexCode(h){const B=this._colors.get(h);return B?e.Util.makeHexColor(...B):h}};ne(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=N;r.ColorManager=w;const Dt=class Dt{constructor(h,B,V,Q,nt,lt){X(this,dt);X(this,Rt);X(this,Xt);X(this,Vt);X(this,Jt);X(this,Gt);X(this,Z);X(this,ft);X(this,ot);X(this,pt);X(this,St);X(this,vt);X(this,Tt);X(this,D,null);X(this,G,new Map);X(this,K,new Map);X(this,U,null);X(this,_,null);X(this,et,new m);X(this,rt,0);X(this,Y,new Set);X(this,st,null);X(this,gt,null);X(this,At,new Set);X(this,wt,null);X(this,W,new P);X(this,u,!1);X(this,y,!1);X(this,a,null);X(this,b,e.AnnotationEditorType.NONE);X(this,E,new Set);X(this,I,null);X(this,R,this.blur.bind(this));X(this,H,this.focus.bind(this));X(this,tt,this.copy.bind(this));X(this,q,this.cut.bind(this));X(this,ct,this.paste.bind(this));X(this,ut,this.keydown.bind(this));X(this,Et,this.onEditingAction.bind(this));X(this,mt,this.onPageChanging.bind(this));X(this,Ot,this.onScaleChanging.bind(this));X(this,Wt,this.onRotationChanging.bind(this));X(this,Pt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});X(this,Nt,[0,0]);X(this,yt,null);X(this,ht,null);X(this,it,null);at(this,ht,h),at(this,it,B),at(this,U,V),this._eventBus=Q,this._eventBus._on("editingaction",s(this,Et)),this._eventBus._on("pagechanging",s(this,mt)),this._eventBus._on("scalechanging",s(this,Ot)),this._eventBus._on("rotationchanging",s(this,Wt)),at(this,_,nt.annotationStorage),at(this,wt,nt.filterFactory),at(this,I,lt),this.viewParameters={realScale:n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const h=Dt.prototype,B=nt=>{const{activeElement:lt}=document;return lt&&s(nt,ht).contains(lt)&&nt.hasSomethingToControl()},V=this.TRANSLATE_SMALL,Q=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],h.selectAll],[["ctrl+z","mac+meta+z"],h.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],h.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],h.delete],[["Escape","mac+Escape"],h.unselectAll],[["ArrowLeft","mac+ArrowLeft"],h.translateSelectedEditors,{args:[-V,0],checker:B}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],h.translateSelectedEditors,{args:[-Q,0],checker:B}],[["ArrowRight","mac+ArrowRight"],h.translateSelectedEditors,{args:[V,0],checker:B}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],h.translateSelectedEditors,{args:[Q,0],checker:B}],[["ArrowUp","mac+ArrowUp"],h.translateSelectedEditors,{args:[0,-V],checker:B}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],h.translateSelectedEditors,{args:[0,-Q],checker:B}],[["ArrowDown","mac+ArrowDown"],h.translateSelectedEditors,{args:[0,V],checker:B}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],h.translateSelectedEditors,{args:[0,Q],checker:B}]]))}destroy(){j(this,Vt,Re).call(this),j(this,Rt,Qe).call(this),this._eventBus._off("editingaction",s(this,Et)),this._eventBus._off("pagechanging",s(this,mt)),this._eventBus._off("scalechanging",s(this,Ot)),this._eventBus._off("rotationchanging",s(this,Wt));for(const h of s(this,K).values())h.destroy();s(this,K).clear(),s(this,G).clear(),s(this,At).clear(),at(this,D,null),s(this,E).clear(),s(this,et).destroy(),s(this,U).destroy()}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",s(this,I)?s(this,wt).addHCMFilter(s(this,I).foreground,s(this,I).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(s(this,ht)).direction)}editAltText(h){var B;(B=s(this,U))==null||B.editAltText(this,h)}onPageChanging(h){let{pageNumber:B}=h;at(this,rt,B-1)}focusMainContainer(){s(this,ht).focus()}findParent(h,B){for(const V of s(this,K).values()){const{x:Q,y:nt,width:lt,height:Ct}=V.div.getBoundingClientRect();if(h>=Q&&h<=Q+lt&&B>=nt&&B<=nt+Ct)return V}return null}disableUserSelect(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;s(this,it).classList.toggle("noUserSelect",h)}addShouldRescale(h){s(this,At).add(h)}removeShouldRescale(h){s(this,At).delete(h)}onScaleChanging(h){let{scale:B}=h;this.commitOrRemove(),this.viewParameters.realScale=B*n.PixelsPerInch.PDF_TO_CSS_UNITS;for(const V of s(this,At))V.onScaleChanging()}onRotationChanging(h){let{pagesRotation:B}=h;this.commitOrRemove(),this.viewParameters.rotation=B}addToAnnotationStorage(h){!h.isEmpty()&&s(this,_)&&!s(this,_).has(h.id)&&s(this,_).setValue(h.id,h)}blur(){if(!this.hasSelection)return;const{activeElement:h}=document;for(const B of s(this,E))if(B.div.contains(h)){at(this,a,[B,h]),B._focusEventsAllowed=!1;break}}focus(){if(!s(this,a))return;const[h,B]=s(this,a);at(this,a,null),B.addEventListener("focusin",()=>{h._focusEventsAllowed=!0},{once:!0}),B.focus()}addEditListeners(){j(this,Xt,Ze).call(this),j(this,Jt,je).call(this)}removeEditListeners(){j(this,Vt,Re).call(this),j(this,Gt,qe).call(this)}copy(h){var V;if(h.preventDefault(),(V=s(this,D))==null||V.commitOrRemove(),!this.hasSelection)return;const B=[];for(const Q of s(this,E)){const nt=Q.serialize(!0);nt&&B.push(nt)}B.length!==0&&h.clipboardData.setData("application/pdfjs",JSON.stringify(B))}cut(h){this.copy(h),this.delete()}paste(h){h.preventDefault();const{clipboardData:B}=h;for(const nt of B.items)for(const lt of s(this,gt))if(lt.isHandlingMimeForPasting(nt.type)){lt.paste(nt,this.currentLayer);return}let V=B.getData("application/pdfjs");if(!V)return;try{V=JSON.parse(V)}catch(nt){(0,e.warn)(`paste: "${nt.message}".`);return}if(!Array.isArray(V))return;this.unselectAll();const Q=this.currentLayer;try{const nt=[];for(const Ft of V){const Mt=Q.deserialize(Ft);if(!Mt)return;nt.push(Mt)}const lt=()=>{for(const Ft of nt)j(this,St,tn).call(this,Ft);j(this,Tt,en).call(this,nt)},Ct=()=>{for(const Ft of nt)Ft.remove()};this.addCommands({cmd:lt,undo:Ct,mustExec:!0})}catch(nt){(0,e.warn)(`paste: "${nt.message}".`)}}keydown(h){var B;(B=this.getActive())!=null&&B.shouldGetKeyboardEvents()||Dt._keyboardManager.exec(this,h)}onEditingAction(h){["undo","redo","delete","selectAll"].includes(h.name)&&this[h.name]()}setEditingState(h){h?(j(this,dt,In).call(this),j(this,Xt,Ze).call(this),j(this,Jt,je).call(this),j(this,Z,ae).call(this,{isEditing:s(this,b)!==e.AnnotationEditorType.NONE,isEmpty:j(this,vt,Ae).call(this),hasSomethingToUndo:s(this,et).hasSomethingToUndo(),hasSomethingToRedo:s(this,et).hasSomethingToRedo(),hasSelectedEditor:!1})):(j(this,Rt,Qe).call(this),j(this,Vt,Re).call(this),j(this,Gt,qe).call(this),j(this,Z,ae).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(h){if(!s(this,gt)){at(this,gt,h);for(const B of s(this,gt))j(this,ft,ye).call(this,B.defaultPropertiesToUpdate)}}getId(){return s(this,W).getId()}get currentLayer(){return s(this,K).get(s(this,rt))}getLayer(h){return s(this,K).get(h)}get currentPageIndex(){return s(this,rt)}addLayer(h){s(this,K).set(h.pageIndex,h),s(this,u)?h.enable():h.disable()}removeLayer(h){s(this,K).delete(h.pageIndex)}updateMode(h){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(s(this,b)!==h){if(at(this,b,h),h===e.AnnotationEditorType.NONE){this.setEditingState(!1),j(this,pt,Dn).call(this);return}this.setEditingState(!0),j(this,ot,On).call(this),this.unselectAll();for(const V of s(this,K).values())V.updateMode(h);if(B){for(const V of s(this,G).values())if(V.annotationElementId===B){this.setSelected(V),V.enterInEditMode();break}}}}updateToolbar(h){h!==s(this,b)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:h})}updateParams(h,B){if(s(this,gt)){if(h===e.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(h);return}for(const V of s(this,E))V.updateParams(h,B);for(const V of s(this,gt))V.updateDefaultParams(h,B)}}enableWaiting(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(s(this,y)!==h){at(this,y,h);for(const B of s(this,K).values())h?B.disableClick():B.enableClick(),B.div.classList.toggle("waiting",h)}}getEditors(h){const B=[];for(const V of s(this,G).values())V.pageIndex===h&&B.push(V);return B}getEditor(h){return s(this,G).get(h)}addEditor(h){s(this,G).set(h.id,h)}removeEditor(h){var B;s(this,G).delete(h.id),this.unselect(h),(!h.annotationElementId||!s(this,Y).has(h.annotationElementId))&&((B=s(this,_))==null||B.remove(h.id))}addDeletedAnnotationElement(h){s(this,Y).add(h.annotationElementId),h.deleted=!0}isDeletedAnnotationElement(h){return s(this,Y).has(h)}removeDeletedAnnotationElement(h){s(this,Y).delete(h.annotationElementId),h.deleted=!1}setActiveEditor(h){s(this,D)!==h&&(at(this,D,h),h&&j(this,ft,ye).call(this,h.propertiesToUpdate))}toggleSelected(h){if(s(this,E).has(h)){s(this,E).delete(h),h.unselect(),j(this,Z,ae).call(this,{hasSelectedEditor:this.hasSelection});return}s(this,E).add(h),h.select(),j(this,ft,ye).call(this,h.propertiesToUpdate),j(this,Z,ae).call(this,{hasSelectedEditor:!0})}setSelected(h){for(const B of s(this,E))B!==h&&B.unselect();s(this,E).clear(),s(this,E).add(h),h.select(),j(this,ft,ye).call(this,h.propertiesToUpdate),j(this,Z,ae).call(this,{hasSelectedEditor:!0})}isSelected(h){return s(this,E).has(h)}unselect(h){h.unselect(),s(this,E).delete(h),j(this,Z,ae).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return s(this,E).size!==0}undo(){s(this,et).undo(),j(this,Z,ae).call(this,{hasSomethingToUndo:s(this,et).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:j(this,vt,Ae).call(this)})}redo(){s(this,et).redo(),j(this,Z,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:s(this,et).hasSomethingToRedo(),isEmpty:j(this,vt,Ae).call(this)})}addCommands(h){s(this,et).add(h),j(this,Z,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:j(this,vt,Ae).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const h=[...s(this,E)],B=()=>{for(const Q of h)Q.remove()},V=()=>{for(const Q of h)j(this,St,tn).call(this,Q)};this.addCommands({cmd:B,undo:V,mustExec:!0})}commitOrRemove(){var h;(h=s(this,D))==null||h.commitOrRemove()}hasSomethingToControl(){return s(this,D)||this.hasSelection}selectAll(){for(const h of s(this,E))h.commit();j(this,Tt,en).call(this,s(this,G).values())}unselectAll(){if(s(this,D)){s(this,D).commitOrRemove();return}if(this.hasSelection){for(const h of s(this,E))h.unselect();s(this,E).clear(),j(this,Z,ae).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(h,B){if((arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1)||this.commitOrRemove(),!this.hasSelection)return;s(this,Nt)[0]+=h,s(this,Nt)[1]+=B;const[Q,nt]=s(this,Nt),lt=[...s(this,E)],Ct=1e3;s(this,yt)&&clearTimeout(s(this,yt)),at(this,yt,setTimeout(()=>{at(this,yt,null),s(this,Nt)[0]=s(this,Nt)[1]=0,this.addCommands({cmd:()=>{for(const Ft of lt)s(this,G).has(Ft.id)&&Ft.translateInPage(Q,nt)},undo:()=>{for(const Ft of lt)s(this,G).has(Ft.id)&&Ft.translateInPage(-Q,-nt)},mustExec:!1})},Ct));for(const Ft of lt)Ft.translateInPage(h,B)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),at(this,st,new Map);for(const h of s(this,E))s(this,st).set(h,{savedX:h.x,savedY:h.y,savedPageIndex:h.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!s(this,st))return!1;this.disableUserSelect(!1);const h=s(this,st);at(this,st,null);let B=!1;for(const[{x:Q,y:nt,pageIndex:lt},Ct]of h)Ct.newX=Q,Ct.newY=nt,Ct.newPageIndex=lt,B||(B=Q!==Ct.savedX||nt!==Ct.savedY||lt!==Ct.savedPageIndex);if(!B)return!1;const V=(Q,nt,lt,Ct)=>{if(s(this,G).has(Q.id)){const Ft=s(this,K).get(Ct);Ft?Q._setParentAndPosition(Ft,nt,lt):(Q.pageIndex=Ct,Q.x=nt,Q.y=lt)}};return this.addCommands({cmd:()=>{for(const[Q,{newX:nt,newY:lt,newPageIndex:Ct}]of h)V(Q,nt,lt,Ct)},undo:()=>{for(const[Q,{savedX:nt,savedY:lt,savedPageIndex:Ct}]of h)V(Q,nt,lt,Ct)},mustExec:!0}),!0}dragSelectedEditors(h,B){if(s(this,st))for(const V of s(this,st).keys())V.drag(h,B)}rebuild(h){if(h.parent===null){const B=this.getLayer(h.pageIndex);B?(B.changeParent(h),B.addOrRebuild(h)):(this.addEditor(h),this.addToAnnotationStorage(h),h.rebuild())}else h.parent.addOrRebuild(h)}isActive(h){return s(this,D)===h}getActive(){return s(this,D)}getMode(){return s(this,b)}get imageManager(){return(0,e.shadow)(this,"imageManager",new T)}};D=new WeakMap,G=new WeakMap,K=new WeakMap,U=new WeakMap,_=new WeakMap,et=new WeakMap,rt=new WeakMap,Y=new WeakMap,st=new WeakMap,gt=new WeakMap,At=new WeakMap,wt=new WeakMap,W=new WeakMap,u=new WeakMap,y=new WeakMap,a=new WeakMap,b=new WeakMap,E=new WeakMap,I=new WeakMap,R=new WeakMap,H=new WeakMap,tt=new WeakMap,q=new WeakMap,ct=new WeakMap,ut=new WeakMap,Et=new WeakMap,mt=new WeakMap,Ot=new WeakMap,Wt=new WeakMap,Pt=new WeakMap,Nt=new WeakMap,yt=new WeakMap,ht=new WeakMap,it=new WeakMap,dt=new WeakSet,In=function(){window.addEventListener("focus",s(this,H)),window.addEventListener("blur",s(this,R))},Rt=new WeakSet,Qe=function(){window.removeEventListener("focus",s(this,H)),window.removeEventListener("blur",s(this,R))},Xt=new WeakSet,Ze=function(){window.addEventListener("keydown",s(this,ut),{capture:!0})},Vt=new WeakSet,Re=function(){window.removeEventListener("keydown",s(this,ut),{capture:!0})},Jt=new WeakSet,je=function(){document.addEventListener("copy",s(this,tt)),document.addEventListener("cut",s(this,q)),document.addEventListener("paste",s(this,ct))},Gt=new WeakSet,qe=function(){document.removeEventListener("copy",s(this,tt)),document.removeEventListener("cut",s(this,q)),document.removeEventListener("paste",s(this,ct))},Z=new WeakSet,ae=function(h){Object.entries(h).some(V=>{let[Q,nt]=V;return s(this,Pt)[Q]!==nt})&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(s(this,Pt),h)})},ft=new WeakSet,ye=function(h){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:h})},ot=new WeakSet,On=function(){if(!s(this,u)){at(this,u,!0);for(const h of s(this,K).values())h.enable()}},pt=new WeakSet,Dn=function(){if(this.unselectAll(),s(this,u)){at(this,u,!1);for(const h of s(this,K).values())h.disable()}},St=new WeakSet,tn=function(h){const B=s(this,K).get(h.pageIndex);B?B.addOrRebuild(h):this.addEditor(h)},vt=new WeakSet,Ae=function(){if(s(this,G).size===0)return!0;if(s(this,G).size===1)for(const h of s(this,G).values())return h.isEmpty();return!1},Tt=new WeakSet,en=function(h){s(this,E).clear();for(const B of h)B.isEmpty()||(s(this,E).add(B),B.select());j(this,Z,ae).call(this,{hasSelectedEditor:!0})},ne(Dt,"TRANSLATE_SMALL",1),ne(Dt,"TRANSLATE_BIG",10);let k=Dt;r.AnnotationEditorUIManager=k},(g,r,t)=>{var e=t(3),n=t(6),l=t(4),v=t(24),P=t(14),T=t(8),m=t(21),p=t(20),w=t(91),k=t(39),x=t(77),c=t(64),o=t(159),i=t(7),d=t(167),C=t(27),O=l.JSON,M=l.Number,f=l.SyntaxError,A=O&&O.parse,L=v("Object","keys"),F=Object.getOwnPropertyDescriptor,S=P("".charAt),N=P("".slice),D=P(/./.exec),G=P([].push),K=/^\d$/,U=/^[1-9]$/,_=/^(?:-|\d)$/,et=/^[\t\n\r ]$/,rt=0,Y=1,st=function(a,b){a=x(a);var E=new W(a,0),I=E.parse(),R=I.value,H=E.skip(et,I.end);if(H<a.length)throw f('Unexpected extra character: "'+S(a,H)+'" after the parsed data at: '+H);return m(b)?gt({"":R},"",b,I):R},gt=function(a,b,E,I){var R=a[b],H=I&&R===I.value,tt=H&&typeof I.source=="string"?{source:I.source}:{},q,ct,ut,Et,mt;if(p(R)){var Ot=w(R),Wt=H?I.nodes:Ot?[]:{};if(Ot)for(q=Wt.length,ut=c(R),Et=0;Et<ut;Et++)At(R,Et,gt(R,""+Et,E,Et<q?Wt[Et]:void 0));else for(ct=L(R),ut=c(ct),Et=0;Et<ut;Et++)mt=ct[Et],At(R,mt,gt(R,mt,E,k(Wt,mt)?Wt[mt]:void 0))}return T(E,a,b,R,tt)},At=function(a,b,E){if(n){var I=F(a,b);if(I&&!I.configurable)return}E===void 0?delete a[b]:o(a,b,E)},wt=function(a,b,E,I){this.value=a,this.end=b,this.source=E,this.nodes=I},W=function(a,b){this.source=a,this.index=b};W.prototype={fork:function(a){return new W(this.source,a)},parse:function(){var a=this.source,b=this.skip(et,this.index),E=this.fork(b),I=S(a,b);if(D(_,I))return E.number();switch(I){case"{":return E.object();case"[":return E.array();case'"':return E.string();case"t":return E.keyword(!0);case"f":return E.keyword(!1);case"n":return E.keyword(null)}throw f('Unexpected character: "'+I+'" at: '+b)},node:function(a,b,E,I,R){return new wt(b,I,a?null:N(this.source,E,I),R)},object:function(){for(var a=this.source,b=this.index+1,E=!1,I={},R={};b<a.length;){if(b=this.until(['"',"}"],b),S(a,b)==="}"&&!E){b++;break}var H=this.fork(b).string(),tt=H.value;b=H.end,b=this.until([":"],b)+1,b=this.skip(et,b),H=this.fork(b).parse(),o(R,tt,H),o(I,tt,H.value),b=this.until([",","}"],H.end);var q=S(a,b);if(q===",")E=!0,b++;else if(q==="}"){b++;break}}return this.node(Y,I,this.index,b,R)},array:function(){for(var a=this.source,b=this.index+1,E=!1,I=[],R=[];b<a.length;){if(b=this.skip(et,b),S(a,b)==="]"&&!E){b++;break}var H=this.fork(b).parse();if(G(R,H),G(I,H.value),b=this.until([",","]"],H.end),S(a,b)===",")E=!0,b++;else if(S(a,b)==="]"){b++;break}}return this.node(Y,I,this.index,b,R)},string:function(){var a=this.index,b=d(this.source,this.index+1);return this.node(rt,b.value,a,b.end)},number:function(){var a=this.source,b=this.index,E=b;if(S(a,E)==="-"&&E++,S(a,E)==="0")E++;else if(D(U,S(a,E)))E=this.skip(K,++E);else throw f("Failed to parse number at: "+E);if(S(a,E)==="."&&(E=this.skip(K,++E)),S(a,E)==="e"||S(a,E)==="E"){E++,(S(a,E)==="+"||S(a,E)==="-")&&E++;var I=E;if(E=this.skip(K,E),I===E)throw f("Failed to parse number's exponent value at: "+E)}return this.node(rt,M(N(a,b,E)),b,E)},keyword:function(a){var b=""+a,E=this.index,I=E+b.length;if(N(this.source,E,I)!==b)throw f("Failed to parse value at: "+E);return this.node(rt,a,E,I)},skip:function(a,b){for(var E=this.source;b<E.length&&D(a,S(E,b));b++);return b},until:function(a,b){b=this.skip(et,b);for(var E=S(this.source,b),I=0;I<a.length;I++)if(a[I]===E)return b;throw f('Unexpected character: "'+E+'" at: '+b)}};var u=i(function(){var a="9007199254740993",b;return A(a,function(E,I,R){b=R.source}),b!==a}),y=C&&!i(function(){return 1/A("-0 	")!==-1/0});e({target:"JSON",stat:!0,forced:u},{parse:function(b,E){return y&&!m(E)?A(b):st(b,E)}})},(g,r,t)=>{var e=t(14),n=t(39),l=SyntaxError,v=parseInt,P=String.fromCharCode,T=e("".charAt),m=e("".slice),p=e(/./.exec),w={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},k=/^[\da-f]{4}$/i,x=/^[\u0000-\u001F]$/;g.exports=function(c,o){for(var i=!0,d="";o<c.length;){var C=T(c,o);if(C==="\\"){var O=m(c,o,o+2);if(n(w,O))d+=w[O],o+=2;else if(O==="\\u"){o+=2;var M=m(c,o,o+4);if(!p(k,M))throw l("Bad Unicode escape at: "+o);d+=P(v(M,16)),o+=4}else throw l('Unknown escape sequence: "'+O+'"')}else if(C==='"'){i=!1,o++;break}else{if(p(x,C))throw l("Bad control character in string literal at: "+o);d+=C,o++}}if(i)throw l("Unterminated string at: "+o);return{value:d,end:o}}},(g,r,t)=>{var rt,Y,st,gt,At,wt,W,u,y,a,b,E,pe,R,ge,tt,nn,ct,we,Et,Me,Ot,Se,Pt,Ee;Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMFilterFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=void 0,r.deprecated=L,r.getColorValues=G,r.getCurrentTransform=K,r.getCurrentTransformInverse=U,r.getFilenameFromUrl=d,r.getPdfFilenameFromUrl=C,r.getRGB=D,r.getXfaPageViewport=N,r.isDataScheme=o,r.isPdfFile=i,r.isValidFetchUrl=M,r.loadScript=A,r.noContextMenu=f,r.setLayerDimensions=_,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89),t(84),t(86),t(87);var e=t(169),n=t(1);const l="http://www.w3.org/2000/svg",et=class et{};ne(et,"CSS",96),ne(et,"PDF",72),ne(et,"PDF_TO_CSS_UNITS",et.CSS/et.PDF);let v=et;r.PixelsPerInch=v;class P extends e.BaseFilterFactory{constructor(){let{docId:it,ownerDocument:dt=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();X(this,E);X(this,R);X(this,tt);X(this,ct);X(this,Et);X(this,Ot);X(this,Pt);X(this,rt,void 0);X(this,Y,void 0);X(this,st,void 0);X(this,gt,void 0);X(this,At,void 0);X(this,wt,void 0);X(this,W,void 0);X(this,u,void 0);X(this,y,void 0);X(this,a,void 0);X(this,b,0);at(this,st,it),at(this,gt,dt)}addFilter(it){if(!it)return"none";let dt=s(this,E,pe).get(it);if(dt)return dt;let It,Rt,Ht,Xt;if(it.length===1){const Jt=it[0],Zt=new Array(256);for(let Gt=0;Gt<256;Gt++)Zt[Gt]=Jt[Gt]/255;Xt=It=Rt=Ht=Zt.join(",")}else{const[Jt,Zt,Gt]=it,bt=new Array(256),Z=new Array(256),J=new Array(256);for(let ft=0;ft<256;ft++)bt[ft]=Jt[ft]/255,Z[ft]=Zt[ft]/255,J[ft]=Gt[ft]/255;It=bt.join(","),Rt=Z.join(","),Ht=J.join(","),Xt=`${It}${Rt}${Ht}`}if(dt=s(this,E,pe).get(Xt),dt)return s(this,E,pe).set(it,dt),dt;const zt=`g_${s(this,st)}_transfer_map_${be(this,b)._++}`,Vt=`url(#${zt})`;s(this,E,pe).set(it,Vt),s(this,E,pe).set(Xt,Vt);const Kt=j(this,ct,we).call(this,zt);return j(this,Ot,Se).call(this,It,Rt,Ht,Kt),Vt}addHCMFilter(it,dt){var Zt;const It=`${it}-${dt}`;if(s(this,wt)===It)return s(this,W);if(at(this,wt,It),at(this,W,"none"),(Zt=s(this,At))==null||Zt.remove(),!it||!dt)return s(this,W);const Rt=j(this,Pt,Ee).call(this,it);it=n.Util.makeHexColor(...Rt);const Ht=j(this,Pt,Ee).call(this,dt);if(dt=n.Util.makeHexColor(...Ht),s(this,R,ge).style.color="",it==="#000000"&&dt==="#ffffff"||it===dt)return s(this,W);const Xt=new Array(256);for(let Gt=0;Gt<=255;Gt++){const bt=Gt/255;Xt[Gt]=bt<=.03928?bt/12.92:$e((bt+.055)/1.055,2.4)}const zt=Xt.join(","),Vt=`g_${s(this,st)}_hcm_filter`,Kt=at(this,u,j(this,ct,we).call(this,Vt));j(this,Ot,Se).call(this,zt,zt,zt,Kt),j(this,tt,nn).call(this,Kt);const Jt=(Gt,bt)=>{const Z=Rt[Gt]/255,J=Ht[Gt]/255,ft=new Array(bt+1);for(let jt=0;jt<=bt;jt++)ft[jt]=Z+jt/bt*(J-Z);return ft.join(",")};return j(this,Ot,Se).call(this,Jt(0,5),Jt(1,5),Jt(2,5),Kt),at(this,W,`url(#${Vt})`),s(this,W)}addHighlightHCMFilter(it,dt,It,Rt){var J;const Ht=`${it}-${dt}-${It}-${Rt}`;if(s(this,y)===Ht)return s(this,a);if(at(this,y,Ht),at(this,a,"none"),(J=s(this,u))==null||J.remove(),!it||!dt)return s(this,a);const[Xt,zt]=[it,dt].map(j(this,Pt,Ee).bind(this));let Vt=Math.round(.2126*Xt[0]+.7152*Xt[1]+.0722*Xt[2]),Kt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),[Jt,Zt]=[It,Rt].map(j(this,Pt,Ee).bind(this));Kt<Vt&&([Vt,Kt,Jt,Zt]=[Kt,Vt,Zt,Jt]),s(this,R,ge).style.color="";const Gt=(ft,jt,ot)=>{const $=new Array(256),pt=(Kt-Vt)/ot,xt=ft/255,St=(jt-ft)/(255*ot);let kt=0;for(let vt=0;vt<=ot;vt++){const $t=Math.round(Vt+vt*pt),Tt=xt+vt*St;for(let Lt=kt;Lt<=$t;Lt++)$[Lt]=Tt;kt=$t+1}for(let vt=kt;vt<256;vt++)$[vt]=$[kt-1];return $.join(",")},bt=`g_${s(this,st)}_hcm_highlight_filter`,Z=at(this,u,j(this,ct,we).call(this,bt));return j(this,tt,nn).call(this,Z),j(this,Ot,Se).call(this,Gt(Jt[0],Zt[0],5),Gt(Jt[1],Zt[1],5),Gt(Jt[2],Zt[2],5),Z),at(this,a,`url(#${bt})`),s(this,a)}destroy(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(s(this,W)||s(this,a))||(s(this,Y)&&(s(this,Y).parentNode.parentNode.remove(),at(this,Y,null)),s(this,rt)&&(s(this,rt).clear(),at(this,rt,null)),at(this,b,0))}}rt=new WeakMap,Y=new WeakMap,st=new WeakMap,gt=new WeakMap,At=new WeakMap,wt=new WeakMap,W=new WeakMap,u=new WeakMap,y=new WeakMap,a=new WeakMap,b=new WeakMap,E=new WeakSet,pe=function(){return s(this,rt)||at(this,rt,new Map)},R=new WeakSet,ge=function(){if(!s(this,Y)){const it=s(this,gt).createElement("div"),{style:dt}=it;dt.visibility="hidden",dt.contain="strict",dt.width=dt.height=0,dt.position="absolute",dt.top=dt.left=0,dt.zIndex=-1;const It=s(this,gt).createElementNS(l,"svg");It.setAttribute("width",0),It.setAttribute("height",0),at(this,Y,s(this,gt).createElementNS(l,"defs")),it.append(It),It.append(s(this,Y)),s(this,gt).body.append(it)}return s(this,Y)},tt=new WeakSet,nn=function(it){const dt=s(this,gt).createElementNS(l,"feColorMatrix");dt.setAttribute("type","matrix"),dt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),it.append(dt)},ct=new WeakSet,we=function(it){const dt=s(this,gt).createElementNS(l,"filter");return dt.setAttribute("color-interpolation-filters","sRGB"),dt.setAttribute("id",it),s(this,R,ge).append(dt),dt},Et=new WeakSet,Me=function(it,dt,It){const Rt=s(this,gt).createElementNS(l,dt);Rt.setAttribute("type","discrete"),Rt.setAttribute("tableValues",It),it.append(Rt)},Ot=new WeakSet,Se=function(it,dt,It,Rt){const Ht=s(this,gt).createElementNS(l,"feComponentTransfer");Rt.append(Ht),j(this,Et,Me).call(this,Ht,"feFuncR",it),j(this,Et,Me).call(this,Ht,"feFuncG",dt),j(this,Et,Me).call(this,Ht,"feFuncB",It)},Pt=new WeakSet,Ee=function(it){return s(this,R,ge).style.color=it,D(getComputedStyle(s(this,R,ge)).getPropertyValue("color"))},r.DOMFilterFactory=P;class T extends e.BaseCanvasFactory{constructor(){let{ownerDocument:ht=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=ht}_createCanvas(ht,it){const dt=this._document.createElement("canvas");return dt.width=ht,dt.height=it,dt}}r.DOMCanvasFactory=T;function m(ht){return ee(this,arguments,function*(yt){let it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M(yt,document.baseURI)){const dt=yield fetch(yt);if(!dt.ok)throw new Error(dt.statusText);return it?new Uint8Array(yield dt.arrayBuffer()):(0,n.stringToBytes)(yield dt.text())}return new Promise((dt,It)=>{const Rt=new XMLHttpRequest;Rt.open("GET",yt,!0),it&&(Rt.responseType="arraybuffer"),Rt.onreadystatechange=()=>{if(Rt.readyState===XMLHttpRequest.DONE){if(Rt.status===200||Rt.status===0){let Ht;if(it&&Rt.response?Ht=new Uint8Array(Rt.response):!it&&Rt.responseText&&(Ht=(0,n.stringToBytes)(Rt.responseText)),Ht){dt(Ht);return}}It(new Error(Rt.statusText))}},Rt.send(null)})})}class p extends e.BaseCMapReaderFactory{_fetchData(ht,it){return m(ht,this.isCompressed).then(dt=>({cMapData:dt,compressionType:it}))}}r.DOMCMapReaderFactory=p;class w extends e.BaseStandardFontDataFactory{_fetchData(ht){return m(ht,!0)}}r.DOMStandardFontDataFactory=w;class k extends e.BaseSVGFactory{_createSVG(ht){return document.createElementNS(l,ht)}}r.DOMSVGFactory=k;class x{constructor(ht){let{viewBox:it,scale:dt,rotation:It,offsetX:Rt=0,offsetY:Ht=0,dontFlip:Xt=!1}=ht;this.viewBox=it,this.scale=dt,this.rotation=It,this.offsetX=Rt,this.offsetY=Ht;const zt=(it[2]+it[0])/2,Vt=(it[3]+it[1])/2;let Kt,Jt,Zt,Gt;switch(It%=360,It<0&&(It+=360),It){case 180:Kt=-1,Jt=0,Zt=0,Gt=1;break;case 90:Kt=0,Jt=1,Zt=1,Gt=0;break;case 270:Kt=0,Jt=-1,Zt=-1,Gt=0;break;case 0:Kt=1,Jt=0,Zt=0,Gt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Xt&&(Zt=-Zt,Gt=-Gt);let bt,Z,J,ft;Kt===0?(bt=Math.abs(Vt-it[1])*dt+Rt,Z=Math.abs(zt-it[0])*dt+Ht,J=(it[3]-it[1])*dt,ft=(it[2]-it[0])*dt):(bt=Math.abs(zt-it[0])*dt+Rt,Z=Math.abs(Vt-it[1])*dt+Ht,J=(it[2]-it[0])*dt,ft=(it[3]-it[1])*dt),this.transform=[Kt*dt,Jt*dt,Zt*dt,Gt*dt,bt-Kt*dt*zt-Zt*dt*Vt,Z-Jt*dt*zt-Gt*dt*Vt],this.width=J,this.height=ft}get rawDims(){const{viewBox:ht}=this;return(0,n.shadow)(this,"rawDims",{pageWidth:ht[2]-ht[0],pageHeight:ht[3]-ht[1],pageX:ht[0],pageY:ht[1]})}clone(){let{scale:ht=this.scale,rotation:it=this.rotation,offsetX:dt=this.offsetX,offsetY:It=this.offsetY,dontFlip:Rt=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new x({viewBox:this.viewBox.slice(),scale:ht,rotation:it,offsetX:dt,offsetY:It,dontFlip:Rt})}convertToViewportPoint(ht,it){return n.Util.applyTransform([ht,it],this.transform)}convertToViewportRectangle(ht){const it=n.Util.applyTransform([ht[0],ht[1]],this.transform),dt=n.Util.applyTransform([ht[2],ht[3]],this.transform);return[it[0],it[1],dt[0],dt[1]]}convertToPdfPoint(ht,it){return n.Util.applyInverseTransform([ht,it],this.transform)}}r.PageViewport=x;class c extends n.BaseException{constructor(ht){let it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;super(ht,"RenderingCancelledException"),this.extraDelay=it}}r.RenderingCancelledException=c;function o(yt){const ht=yt.length;let it=0;for(;it<ht&&yt[it].trim()==="";)it++;return yt.substring(it,it+5).toLowerCase()==="data:"}function i(yt){return typeof yt=="string"&&/\.pdf$/i.test(yt)}function d(yt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)||([yt]=yt.split(/[#?]/,1)),yt.substring(yt.lastIndexOf("/")+1)}function C(yt){let ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof yt!="string")return ht;if(o(yt))return(0,n.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ht;const it=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,dt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,It=it.exec(yt);let Rt=dt.exec(It[1])||dt.exec(It[2])||dt.exec(It[3]);if(Rt&&(Rt=Rt[0],Rt.includes("%")))try{Rt=dt.exec(decodeURIComponent(Rt))[0]}catch(Ht){}return Rt||ht}class O{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(ht){ht in this.started&&(0,n.warn)(`Timer is already running for ${ht}`),this.started[ht]=Date.now()}timeEnd(ht){ht in this.started||(0,n.warn)(`Timer has not been started for ${ht}`),this.times.push({name:ht,start:this.started[ht],end:Date.now()}),delete this.started[ht]}toString(){const ht=[];let it=0;for(const{name:dt}of this.times)it=Math.max(dt.length,it);for(const{name:dt,start:It,end:Rt}of this.times)ht.push(`${dt.padEnd(it)} ${Rt-It}ms
`);return ht.join("")}}r.StatTimer=O;function M(yt,ht){try{const{protocol:it}=ht?new URL(yt,ht):new URL(yt);return it==="http:"||it==="https:"}catch(it){return!1}}function f(yt){yt.preventDefault()}function A(yt){let ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((it,dt)=>{const It=document.createElement("script");It.src=yt,It.onload=function(Rt){ht&&It.remove(),it(Rt)},It.onerror=function(){dt(new Error(`Cannot load script at: ${It.src}`))},(document.head||document.documentElement).append(It)})}function L(yt){console.log("Deprecated API usage: "+yt)}let F;class S{static toDateObject(ht){if(!ht||typeof ht!="string")return null;F||(F=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const it=F.exec(ht);if(!it)return null;const dt=parseInt(it[1],10);let It=parseInt(it[2],10);It=It>=1&&It<=12?It-1:0;let Rt=parseInt(it[3],10);Rt=Rt>=1&&Rt<=31?Rt:1;let Ht=parseInt(it[4],10);Ht=Ht>=0&&Ht<=23?Ht:0;let Xt=parseInt(it[5],10);Xt=Xt>=0&&Xt<=59?Xt:0;let zt=parseInt(it[6],10);zt=zt>=0&&zt<=59?zt:0;const Vt=it[7]||"Z";let Kt=parseInt(it[8],10);Kt=Kt>=0&&Kt<=23?Kt:0;let Jt=parseInt(it[9],10)||0;return Jt=Jt>=0&&Jt<=59?Jt:0,Vt==="-"?(Ht+=Kt,Xt+=Jt):Vt==="+"&&(Ht-=Kt,Xt-=Jt),new Date(Date.UTC(dt,It,Rt,Ht,Xt,zt))}}r.PDFDateString=S;function N(yt,ht){let{scale:it=1,rotation:dt=0}=ht;const{width:It,height:Rt}=yt.attributes.style,Ht=[0,0,parseInt(It),parseInt(Rt)];return new x({viewBox:Ht,scale:it,rotation:dt})}function D(yt){if(yt.startsWith("#")){const ht=parseInt(yt.slice(1),16);return[(ht&16711680)>>16,(ht&65280)>>8,ht&255]}return yt.startsWith("rgb(")?yt.slice(4,-1).split(",").map(ht=>parseInt(ht)):yt.startsWith("rgba(")?yt.slice(5,-1).split(",").map(ht=>parseInt(ht)).slice(0,3):((0,n.warn)(`Not a valid color format: "${yt}"`),[0,0,0])}function G(yt){const ht=document.createElement("span");ht.style.visibility="hidden",document.body.append(ht);for(const it of yt.keys()){ht.style.color=it;const dt=window.getComputedStyle(ht).color;yt.set(it,D(dt))}ht.remove()}function K(yt){const{a:ht,b:it,c:dt,d:It,e:Rt,f:Ht}=yt.getTransform();return[ht,it,dt,It,Rt,Ht]}function U(yt){const{a:ht,b:it,c:dt,d:It,e:Rt,f:Ht}=yt.getTransform().invertSelf();return[ht,it,dt,It,Rt,Ht]}function _(yt,ht){let it=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,dt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(ht instanceof x){const{pageWidth:It,pageHeight:Rt}=ht.rawDims,{style:Ht}=yt,Xt=n.FeatureTest.isCSSRoundSupported,zt=`var(--scale-factor) * ${It}px`,Vt=`var(--scale-factor) * ${Rt}px`,Kt=Xt?`round(${zt}, 1px)`:`calc(${zt})`,Jt=Xt?`round(${Vt}, 1px)`:`calc(${Vt})`;!it||ht.rotation%180===0?(Ht.width=Kt,Ht.height=Jt):(Ht.width=Jt,Ht.height=Kt)}dt&&yt.setAttribute("data-main-rotation",ht.rotation)}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseFilterFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0,t(2);var e=t(1);class n{constructor(){this.constructor===n&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,w){return"none"}addHighlightHCMFilter(p,w,k,x){return"none"}destroy(){}}r.BaseFilterFactory=n;class l{constructor(){this.constructor===l&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,w){if(p<=0||w<=0)throw new Error("Invalid canvas size");const k=this._createCanvas(p,w);return{canvas:k,context:k.getContext("2d")}}reset(p,w,k){if(!p.canvas)throw new Error("Canvas is not specified");if(w<=0||k<=0)throw new Error("Invalid canvas size");p.canvas.width=w,p.canvas.height=k}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,w){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=l;class v{constructor(p){let{baseUrl:w=null,isCompressed:k=!0}=p;this.constructor===v&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=w,this.isCompressed=k}fetch(p){return ee(this,null,function*(){let{name:w}=p;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!w)throw new Error("CMap name must be specified.");const k=this.baseUrl+w+(this.isCompressed?".bcmap":""),x=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(k,x).catch(c=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})})}_fetchData(p,w){(0,e.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=v;class P{constructor(p){let{baseUrl:w=null}=p;this.constructor===P&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=w}fetch(p){return ee(this,null,function*(){let{filename:w}=p;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!w)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${w}`;return this._fetchData(k).catch(x=>{throw new Error(`Unable to load font data at: ${k}`)})})}_fetchData(p){(0,e.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=P;class T{constructor(){this.constructor===T&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,w){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(p<=0||w<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),k||(x.setAttribute("width",`${p}px`),x.setAttribute("height",`${w}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${p} ${w}`),x}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,e.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=T},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2);var e=t(1);const n=3285377520,l=4294901760,v=65535;class P{constructor(m){this.h1=m?m&4294967295:n,this.h2=m?m&4294967295:n}update(m){let p,w;if(typeof m=="string"){p=new Uint8Array(m.length*2),w=0;for(let L=0,F=m.length;L<F;L++){const S=m.charCodeAt(L);S<=255?p[w++]=S:(p[w++]=S>>>8,p[w++]=S&255)}}else if((0,e.isArrayBuffer)(m))p=m.slice(),w=p.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const k=w>>2,x=w-k*4,c=new Uint32Array(p.buffer,0,k);let o=0,i=0,d=this.h1,C=this.h2;const O=3432918353,M=461845907,f=O&v,A=M&v;for(let L=0;L<k;L++)L&1?(o=c[L],o=o*O&l|o*f&v,o=o<<15|o>>>17,o=o*M&l|o*A&v,d^=o,d=d<<13|d>>>19,d=d*5+3864292196):(i=c[L],i=i*O&l|i*f&v,i=i<<15|i>>>17,i=i*M&l|i*A&v,C^=i,C=C<<13|C>>>19,C=C*5+3864292196);switch(o=0,x){case 3:o^=p[k*4+2]<<16;case 2:o^=p[k*4+1]<<8;case 1:o^=p[k*4],o=o*O&l|o*f&v,o=o<<15|o>>>17,o=o*M&l|o*A&v,k&1?d^=o:C^=o}this.h1=d,this.h2=C}hexdigest(){let m=this.h1,p=this.h2;return m^=p>>>1,m=m*3981806797&l|m*36045&v,p=p*4283543511&l|((p<<16|m>>>16)*2950163797&l)>>>16,m^=p>>>1,m=m*444984403&l|m*60499&v,p=p*3301882366&l|((p<<16|m>>>16)*3120437893&l)>>>16,m^=p>>>1,(m>>>0).toString(16).padStart(8,"0")+(p>>>0).toString(16).padStart(8,"0")}}r.MurmurHash3_64=P},(g,r,t)=>{var v;Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0,t(125),t(136),t(138),t(141),t(143),t(145),t(147),t(89),t(149);var e=t(1);class n{constructor(T){X(this,v,new Set);let{ownerDocument:m=globalThis.document,styleElement:p=null}=T;this._document=m,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.add(T),this._document.fonts.add(T)}removeNativeFontFace(T){this.nativeFontFaces.delete(T),this._document.fonts.delete(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const m=this.styleElement.sheet;m.insertRule(T,m.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.clear(),s(this,v).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(T){return ee(this,null,function*(){if(!(!T||s(this,v).has(T.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:m,src:p,style:w}=T,k=new FontFace(m,p,w);this.addNativeFontFace(k);try{yield k.load(),s(this,v).add(m)}catch(x){(0,e.warn)(`Cannot load system font: ${T.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(k)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(T){return ee(this,null,function*(){if(T.attached||T.missingFile&&!T.systemFontInfo)return;if(T.attached=!0,T.systemFontInfo){yield this.loadSystemFont(T.systemFontInfo);return}if(this.isFontLoadingAPISupported){const p=T.createNativeFontFace();if(p){this.addNativeFontFace(p);try{yield p.loaded}catch(w){throw(0,e.warn)(`Failed to load font '${p.family}': '${w}'.`),T.disableFontFace=!0,w}}return}const m=T.createFontFaceRule();if(m){if(this.insertRule(m),this.isSyncFontLoadingSupported)return;yield new Promise(p=>{const w=this._queueLoadingCallback(p);this._prepareFontLoadEvent(T,w)})}})}get isFontLoadingAPISupported(){var m;const T=!!((m=this._document)!=null&&m.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){let T=!1;return(e.isNodeJS||typeof navigator!="undefined"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function m(){for((0,e.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;p.length>0&&p[0].done;){const k=p.shift();setTimeout(k.callback,0)}}const{loadingRequests:p}=this,w={done:!1,complete:m,callback:T};return p.push(w),w}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,m){function p(D,G){return D.charCodeAt(G)<<24|D.charCodeAt(G+1)<<16|D.charCodeAt(G+2)<<8|D.charCodeAt(G+3)&255}function w(D,G,K,U){const _=D.substring(0,G),et=D.substring(G+K);return _+U+et}let k,x;const c=this._document.createElement("canvas");c.width=1,c.height=1;const o=c.getContext("2d");let i=0;function d(D,G){if(++i>30){(0,e.warn)("Load test font never loaded."),G();return}if(o.font="30px "+D,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0){G();return}setTimeout(d.bind(null,D,G))}const C=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=w(O,976,C.length,C);const f=16,A=1482184792;let L=p(O,f);for(k=0,x=C.length-3;k<x;k+=4)L=L-A+p(C,k)|0;k<C.length&&(L=L-A+p(C+"XXX",k)|0),O=w(O,f,4,(0,e.string32)(L));const F=`url(data:font/opentype;base64,${btoa(O)});`,S=`@font-face {font-family:"${C}";src:${F}}`;this.insertRule(S);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const D of[T.loadedName,C]){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=D,N.append(G)}this._document.body.append(N),d(C,()=>{N.remove(),m.complete()})}}v=new WeakMap,r.FontLoader=n;class l{constructor(T,m){let{isEvalSupported:p=!0,disableFontFace:w=!1,ignoreErrors:k=!1,inspectFont:x=null}=m;this.compiledGlyphs=Object.create(null);for(const c in T)this[c]=T[c];this.isEvalSupported=p!==!1,this.disableFontFace=w===!0,this.ignoreErrors=k===!0,this._inspectFont=x}createNativeFontFace(){var m;if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(m=this._inspectFont)==null||m.call(this,this),T}createFontFaceRule(){var w;if(!this.data||this.disableFontFace)return null;const T=(0,e.bytesToString)(this.data),m=`url(data:${this.mimetype};base64,${btoa(T)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${m}}`;else{let k=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(k+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${k}src:${m}}`}return(w=this._inspectFont)==null||w.call(this,this,m),p}getPathGenerator(T,m){if(this.compiledGlyphs[m]!==void 0)return this.compiledGlyphs[m];let p;try{p=T.get(this.loadedName+"_path_"+m)}catch(w){if(!this.ignoreErrors)throw w;return(0,e.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[m]=function(k,x){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const w=[];for(const k of p){const x=k.args!==void 0?k.args.join(","):"";w.push("c.",k.cmd,"(",x,`);
`)}return this.compiledGlyphs[m]=new Function("c","size",w.join(""))}return this.compiledGlyphs[m]=function(w,k){for(const x of p)x.cmd==="scale"&&(x.args=[k,-k]),w[x.cmd].apply(w,x.args)}}}r.FontFaceObject=l},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeFilterFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var e=t(169),n=t(1);(function(){if(!(globalThis.DOMMatrix||!n.isNodeJS))try{globalThis.DOMMatrix=require$$6.DOMMatrix}catch(w){(0,n.warn)(`Cannot polyfill \`DOMMatrix\`, rendering may be broken: "${w}".`)}})(),function(){if(!(globalThis.Path2D||!n.isNodeJS))try{const{CanvasRenderingContext2D:w}=require$$6,{polyfillPath2D:k}=requirePath2dPolyfill_esm();globalThis.CanvasRenderingContext2D=w,k(globalThis)}catch(w){(0,n.warn)(`Cannot polyfill \`Path2D\`, rendering may be broken: "${w}".`)}}();const l=function(p){return new Promise((w,k)=>{require$$6.readFile(p,(c,o)=>{if(c||!o){k(new Error(c));return}w(new Uint8Array(o))})})};class v extends e.BaseFilterFactory{}r.NodeFilterFactory=v;class P extends e.BaseCanvasFactory{_createCanvas(w,k){return require$$6.createCanvas(w,k)}}r.NodeCanvasFactory=P;class T extends e.BaseCMapReaderFactory{_fetchData(w,k){return l(w).then(x=>({cMapData:x,compressionType:k}))}}r.NodeCMapReaderFactory=T;class m extends e.BaseStandardFontDataFactory{_fetchData(w){return l(w)}}r.NodeStandardFontDataFactory=m},(g,r,t)=>{var Y,rn,gt,sn;Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var e=t(1),n=t(168),l=t(174),v=t(175);const P=16,T=100,m=4096,p=15,w=10,k=1e3,x=16;function c(W,u){if(W._removeMirroring)throw new Error("Context is already forwarding operations.");W.__originalSave=W.save,W.__originalRestore=W.restore,W.__originalRotate=W.rotate,W.__originalScale=W.scale,W.__originalTranslate=W.translate,W.__originalTransform=W.transform,W.__originalSetTransform=W.setTransform,W.__originalResetTransform=W.resetTransform,W.__originalClip=W.clip,W.__originalMoveTo=W.moveTo,W.__originalLineTo=W.lineTo,W.__originalBezierCurveTo=W.bezierCurveTo,W.__originalRect=W.rect,W.__originalClosePath=W.closePath,W.__originalBeginPath=W.beginPath,W._removeMirroring=()=>{W.save=W.__originalSave,W.restore=W.__originalRestore,W.rotate=W.__originalRotate,W.scale=W.__originalScale,W.translate=W.__originalTranslate,W.transform=W.__originalTransform,W.setTransform=W.__originalSetTransform,W.resetTransform=W.__originalResetTransform,W.clip=W.__originalClip,W.moveTo=W.__originalMoveTo,W.lineTo=W.__originalLineTo,W.bezierCurveTo=W.__originalBezierCurveTo,W.rect=W.__originalRect,W.closePath=W.__originalClosePath,W.beginPath=W.__originalBeginPath,delete W._removeMirroring},W.save=function(){u.save(),this.__originalSave()},W.restore=function(){u.restore(),this.__originalRestore()},W.translate=function(a,b){u.translate(a,b),this.__originalTranslate(a,b)},W.scale=function(a,b){u.scale(a,b),this.__originalScale(a,b)},W.transform=function(a,b,E,I,R,H){u.transform(a,b,E,I,R,H),this.__originalTransform(a,b,E,I,R,H)},W.setTransform=function(a,b,E,I,R,H){u.setTransform(a,b,E,I,R,H),this.__originalSetTransform(a,b,E,I,R,H)},W.resetTransform=function(){u.resetTransform(),this.__originalResetTransform()},W.rotate=function(a){u.rotate(a),this.__originalRotate(a)},W.clip=function(a){u.clip(a),this.__originalClip(a)},W.moveTo=function(y,a){u.moveTo(y,a),this.__originalMoveTo(y,a)},W.lineTo=function(y,a){u.lineTo(y,a),this.__originalLineTo(y,a)},W.bezierCurveTo=function(y,a,b,E,I,R){u.bezierCurveTo(y,a,b,E,I,R),this.__originalBezierCurveTo(y,a,b,E,I,R)},W.rect=function(y,a,b,E){u.rect(y,a,b,E),this.__originalRect(y,a,b,E)},W.closePath=function(){u.closePath(),this.__originalClosePath()},W.beginPath=function(){u.beginPath(),this.__originalBeginPath()}}class o{constructor(u){this.canvasFactory=u,this.cache=Object.create(null)}getCanvas(u,y,a){let b;return this.cache[u]!==void 0?(b=this.cache[u],this.canvasFactory.reset(b,y,a)):(b=this.canvasFactory.create(y,a),this.cache[u]=b),b}delete(u){delete this.cache[u]}clear(){for(const u in this.cache){const y=this.cache[u];this.canvasFactory.destroy(y),delete this.cache[u]}}}function i(W,u,y,a,b,E,I,R,H,tt){const[q,ct,ut,Et,mt,Ot]=(0,n.getCurrentTransform)(W);if(ct===0&&ut===0){const Nt=I*q+mt,yt=Math.round(Nt),ht=R*Et+Ot,it=Math.round(ht),dt=(I+H)*q+mt,It=Math.abs(Math.round(dt)-yt)||1,Rt=(R+tt)*Et+Ot,Ht=Math.abs(Math.round(Rt)-it)||1;return W.setTransform(Math.sign(q),0,0,Math.sign(Et),yt,it),W.drawImage(u,y,a,b,E,0,0,It,Ht),W.setTransform(q,ct,ut,Et,mt,Ot),[It,Ht]}if(q===0&&Et===0){const Nt=R*ut+mt,yt=Math.round(Nt),ht=I*ct+Ot,it=Math.round(ht),dt=(R+tt)*ut+mt,It=Math.abs(Math.round(dt)-yt)||1,Rt=(I+H)*ct+Ot,Ht=Math.abs(Math.round(Rt)-it)||1;return W.setTransform(0,Math.sign(ct),Math.sign(ut),0,yt,it),W.drawImage(u,y,a,b,E,0,0,Ht,It),W.setTransform(q,ct,ut,Et,mt,Ot),[Ht,It]}W.drawImage(u,y,a,b,E,I,R,H,tt);const Wt=Math.hypot(q,ct),Pt=Math.hypot(ut,Et);return[Wt*H,Pt*tt]}function d(W){const{width:u,height:y}=W;if(u>k||y>k)return null;const a=1e3,b=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),E=u+1;let I=new Uint8Array(E*(y+1)),R,H,tt;const q=u+7&-8;let ct=new Uint8Array(q*y),ut=0;for(const Pt of W.data){let Nt=128;for(;Nt>0;)ct[ut++]=Pt&Nt?0:255,Nt>>=1}let Et=0;for(ut=0,ct[ut]!==0&&(I[0]=1,++Et),H=1;H<u;H++)ct[ut]!==ct[ut+1]&&(I[H]=ct[ut]?2:1,++Et),ut++;for(ct[ut]!==0&&(I[H]=2,++Et),R=1;R<y;R++){ut=R*q,tt=R*E,ct[ut-q]!==ct[ut]&&(I[tt]=ct[ut]?1:8,++Et);let Pt=(ct[ut]?4:0)+(ct[ut-q]?8:0);for(H=1;H<u;H++)Pt=(Pt>>2)+(ct[ut+1]?4:0)+(ct[ut-q+1]?8:0),b[Pt]&&(I[tt+H]=b[Pt],++Et),ut++;if(ct[ut-q]!==ct[ut]&&(I[tt+H]=ct[ut]?2:4,++Et),Et>a)return null}for(ut=q*(y-1),tt=R*E,ct[ut]!==0&&(I[tt]=8,++Et),H=1;H<u;H++)ct[ut]!==ct[ut+1]&&(I[tt+H]=ct[ut]?4:8,++Et),ut++;if(ct[ut]!==0&&(I[tt+H]=4,++Et),Et>a)return null;const mt=new Int32Array([0,E,-1,0,-E,0,0,0,1]),Ot=new Path2D;for(R=0;Et&&R<=y;R++){let Pt=R*E;const Nt=Pt+u;for(;Pt<Nt&&!I[Pt];)Pt++;if(Pt===Nt)continue;Ot.moveTo(Pt%E,R);const yt=Pt;let ht=I[Pt];do{const it=mt[ht];do Pt+=it;while(!I[Pt]);const dt=I[Pt];dt!==5&&dt!==10?(ht=dt,I[Pt]=0):(ht=dt&51*ht>>4,I[Pt]&=ht>>2|ht<<2),Ot.lineTo(Pt%E,Pt/E|0),I[Pt]||--Et}while(yt!==Pt);--R}return ct=null,I=null,function(Pt){Pt.save(),Pt.scale(1/u,-1/y),Pt.translate(0,-y),Pt.fill(Ot),Pt.beginPath(),Pt.restore()}}class C{constructor(u,y){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,u,y])}clone(){const u=Object.create(this);return u.clipBox=this.clipBox.slice(),u}setCurrentPoint(u,y){this.x=u,this.y=y}updatePathMinMax(u,y,a){[y,a]=e.Util.applyTransform([y,a],u),this.minX=Math.min(this.minX,y),this.minY=Math.min(this.minY,a),this.maxX=Math.max(this.maxX,y),this.maxY=Math.max(this.maxY,a)}updateRectMinMax(u,y){const a=e.Util.applyTransform(y,u),b=e.Util.applyTransform(y.slice(2),u);this.minX=Math.min(this.minX,a[0],b[0]),this.minY=Math.min(this.minY,a[1],b[1]),this.maxX=Math.max(this.maxX,a[0],b[0]),this.maxY=Math.max(this.maxY,a[1],b[1])}updateScalingPathMinMax(u,y){e.Util.scaleMinMax(u,y),this.minX=Math.min(this.minX,y[0]),this.maxX=Math.max(this.maxX,y[1]),this.minY=Math.min(this.minY,y[2]),this.maxY=Math.max(this.maxY,y[3])}updateCurvePathMinMax(u,y,a,b,E,I,R,H,tt,q){const ct=e.Util.bezierBoundingBox(y,a,b,E,I,R,H,tt);if(q){q[0]=Math.min(q[0],ct[0],ct[2]),q[1]=Math.max(q[1],ct[0],ct[2]),q[2]=Math.min(q[2],ct[1],ct[3]),q[3]=Math.max(q[3],ct[1],ct[3]);return}this.updateRectMinMax(u,ct)}getPathBoundingBox(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.PathType.FILL,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const a=[this.minX,this.minY,this.maxX,this.maxY];if(u===l.PathType.STROKE){y||(0,e.unreachable)("Stroke bounding box must include transform.");const b=e.Util.singularValueDecompose2dScale(y),E=b[0]*this.lineWidth/2,I=b[1]*this.lineWidth/2;a[0]-=E,a[1]-=I,a[2]+=E,a[3]+=I}return a}updateClipFromPath(){const u=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(u||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(u){this.clipBox=u,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l.PathType.FILL,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.Util.intersect(this.clipBox,this.getPathBoundingBox(u,y))}}function O(W,u){if(typeof ImageData!="undefined"&&u instanceof ImageData){W.putImageData(u,0,0);return}const y=u.height,a=u.width,b=y%x,E=(y-b)/x,I=b===0?E:E+1,R=W.createImageData(a,x);let H=0,tt;const q=u.data,ct=R.data;let ut,Et,mt,Ot;if(u.kind===e.ImageKind.GRAYSCALE_1BPP){const Wt=q.byteLength,Pt=new Uint32Array(ct.buffer,0,ct.byteLength>>2),Nt=Pt.length,yt=a+7>>3,ht=4294967295,it=e.FeatureTest.isLittleEndian?4278190080:255;for(ut=0;ut<I;ut++){for(mt=ut<E?x:b,tt=0,Et=0;Et<mt;Et++){const dt=Wt-H;let It=0;const Rt=dt>yt?a:dt*8-7,Ht=Rt&-8;let Xt=0,zt=0;for(;It<Ht;It+=8)zt=q[H++],Pt[tt++]=zt&128?ht:it,Pt[tt++]=zt&64?ht:it,Pt[tt++]=zt&32?ht:it,Pt[tt++]=zt&16?ht:it,Pt[tt++]=zt&8?ht:it,Pt[tt++]=zt&4?ht:it,Pt[tt++]=zt&2?ht:it,Pt[tt++]=zt&1?ht:it;for(;It<Rt;It++)Xt===0&&(zt=q[H++],Xt=128),Pt[tt++]=zt&Xt?ht:it,Xt>>=1}for(;tt<Nt;)Pt[tt++]=0;W.putImageData(R,0,ut*x)}}else if(u.kind===e.ImageKind.RGBA_32BPP){for(Et=0,Ot=a*x*4,ut=0;ut<E;ut++)ct.set(q.subarray(H,H+Ot)),H+=Ot,W.putImageData(R,0,Et),Et+=x;ut<I&&(Ot=a*b*4,ct.set(q.subarray(H,H+Ot)),W.putImageData(R,0,Et))}else if(u.kind===e.ImageKind.RGB_24BPP)for(mt=x,Ot=a*mt,ut=0;ut<I;ut++){for(ut>=E&&(mt=b,Ot=a*mt),tt=0,Et=Ot;Et--;)ct[tt++]=q[H++],ct[tt++]=q[H++],ct[tt++]=q[H++],ct[tt++]=255;W.putImageData(R,0,ut*x)}else throw new Error(`bad image kind: ${u.kind}`)}function M(W,u){if(u.bitmap){W.drawImage(u.bitmap,0,0);return}const y=u.height,a=u.width,b=y%x,E=(y-b)/x,I=b===0?E:E+1,R=W.createImageData(a,x);let H=0;const tt=u.data,q=R.data;for(let ct=0;ct<I;ct++){const ut=ct<E?x:b;({srcPos:H}=(0,v.convertBlackAndWhiteToRGBA)({src:tt,srcPos:H,dest:q,width:a,height:ut,nonBlackColor:0})),W.putImageData(R,0,ct*x)}}function f(W,u){const y=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of y)W[a]!==void 0&&(u[a]=W[a]);W.setLineDash!==void 0&&(u.setLineDash(W.getLineDash()),u.lineDashOffset=W.lineDashOffset)}function A(W){if(W.strokeStyle=W.fillStyle="#000000",W.fillRule="nonzero",W.globalAlpha=1,W.lineWidth=1,W.lineCap="butt",W.lineJoin="miter",W.miterLimit=10,W.globalCompositeOperation="source-over",W.font="10px sans-serif",W.setLineDash!==void 0&&(W.setLineDash([]),W.lineDashOffset=0),!e.isNodeJS){const{filter:u}=W;u!=="none"&&u!==""&&(W.filter="none")}}function L(W,u,y,a){const b=W.length;for(let E=3;E<b;E+=4){const I=W[E];if(I===0)W[E-3]=u,W[E-2]=y,W[E-1]=a;else if(I<255){const R=255-I;W[E-3]=W[E-3]*I+u*R>>8,W[E-2]=W[E-2]*I+y*R>>8,W[E-1]=W[E-1]*I+a*R>>8}}}function F(W,u,y){const a=W.length,b=1/255;for(let E=3;E<a;E+=4){const I=y?y[W[E]]:W[E];u[E]=u[E]*I*b|0}}function S(W,u,y){const a=W.length;for(let b=3;b<a;b+=4){const E=W[b-3]*77+W[b-2]*152+W[b-1]*28;u[b]=y?u[b]*y[E>>8]>>8:u[b]*E>>16}}function N(W,u,y,a,b,E,I,R,H,tt,q){const ct=!!E,ut=ct?E[0]:0,Et=ct?E[1]:0,mt=ct?E[2]:0,Ot=b==="Luminosity"?S:F,Pt=Math.min(a,Math.ceil(1048576/y));for(let Nt=0;Nt<a;Nt+=Pt){const yt=Math.min(Pt,a-Nt),ht=W.getImageData(R-tt,Nt+(H-q),y,yt),it=u.getImageData(R,Nt+H,y,yt);ct&&L(ht.data,ut,Et,mt),Ot(ht.data,it.data,I),u.putImageData(it,R,Nt+H)}}function D(W,u,y,a){const b=a[0],E=a[1],I=a[2]-b,R=a[3]-E;I===0||R===0||(N(u.context,y,I,R,u.subtype,u.backdrop,u.transferMap,b,E,u.offsetX,u.offsetY),W.save(),W.globalAlpha=1,W.globalCompositeOperation="source-over",W.setTransform(1,0,0,1,0,0),W.drawImage(y.canvas,0,0),W.restore())}function G(W,u){const y=e.Util.singularValueDecompose2dScale(W);y[0]=Math.fround(y[0]),y[1]=Math.fround(y[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return u!==void 0?u:y[0]<=a||y[1]<=a}const K=["butt","round","square"],U=["miter","round","bevel"],_={},et={},wt=class wt{constructor(u,y,a,b,E,I,R,H){X(this,Y);X(this,gt);let{optionalContentConfig:tt,markedContentStack:q=null}=I;this.ctx=u,this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=y,this.objs=a,this.canvasFactory=b,this.filterFactory=E,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=q||[],this.optionalContentConfig=tt,this.cachedCanvases=new o(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=R,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=H,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(u){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):y}beginDrawing(u){let{transform:y,viewport:a,transparency:b=!1,background:E=null}=u;const I=this.ctx.canvas.width,R=this.ctx.canvas.height,H=this.ctx.fillStyle;if(this.ctx.fillStyle=E||"#ffffff",this.ctx.fillRect(0,0,I,R),this.ctx.fillStyle=H,b){const tt=this.cachedCanvases.getCanvas("transparent",I,R);this.compositeCtx=this.ctx,this.transparentCanvas=tt.canvas,this.ctx=tt.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx),y&&(this.ctx.transform(...y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx)}executeOperatorList(u,y,a,b){const E=u.argsArray,I=u.fnArray;let R=y||0;const H=E.length;if(H===R)return R;const tt=H-R>w&&typeof a=="function",q=tt?Date.now()+p:0;let ct=0;const ut=this.commonObjs,Et=this.objs;let mt;for(;;){if(b!==void 0&&R===b.nextBreakPoint)return b.breakIt(R,a),R;if(mt=I[R],mt!==e.OPS.dependency)this[mt].apply(this,E[R]);else for(const Ot of E[R]){const Wt=Ot.startsWith("g_")?ut:Et;if(!Wt.has(Ot))return Wt.get(Ot,a),R}if(R++,R===H)return R;if(tt&&++ct>w){if(Date.now()>q)return a(),R;ct=0}}}endDrawing(){j(this,Y,rn).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const u of this._cachedBitmapsMap.values()){for(const y of u.values())typeof HTMLCanvasElement!="undefined"&&y instanceof HTMLCanvasElement&&(y.width=y.height=0);u.clear()}this._cachedBitmapsMap.clear(),j(this,gt,sn).call(this)}_scaleImage(u,y){const a=u.width,b=u.height;let E=Math.max(Math.hypot(y[0],y[1]),1),I=Math.max(Math.hypot(y[2],y[3]),1),R=a,H=b,tt="prescale1",q,ct;for(;E>2&&R>1||I>2&&H>1;){let ut=R,Et=H;E>2&&R>1&&(ut=R>=16384?Math.floor(R/2)-1||1:Math.ceil(R/2),E/=R/ut),I>2&&H>1&&(Et=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H)/2,I/=H/Et),q=this.cachedCanvases.getCanvas(tt,ut,Et),ct=q.context,ct.clearRect(0,0,ut,Et),ct.drawImage(u,0,0,R,H,0,0,ut,Et),u=q.canvas,R=ut,H=Et,tt=tt==="prescale1"?"prescale2":"prescale1"}return{img:u,paintWidth:R,paintHeight:H}}_createMaskCanvas(u){const y=this.ctx,{width:a,height:b}=u,E=this.current.fillColor,I=this.current.patternFill,R=(0,n.getCurrentTransform)(y);let H,tt,q,ct;if((u.bitmap||u.data)&&u.count>1){const It=u.bitmap||u.data.buffer;tt=JSON.stringify(I?R:[R.slice(0,4),E]),H=this._cachedBitmapsMap.get(It),H||(H=new Map,this._cachedBitmapsMap.set(It,H));const Rt=H.get(tt);if(Rt&&!I){const Ht=Math.round(Math.min(R[0],R[2])+R[4]),Xt=Math.round(Math.min(R[1],R[3])+R[5]);return{canvas:Rt,offsetX:Ht,offsetY:Xt}}q=Rt}q||(ct=this.cachedCanvases.getCanvas("maskCanvas",a,b),M(ct.context,u));let ut=e.Util.transform(R,[1/a,0,0,-1/b,0,0]);ut=e.Util.transform(ut,[1,0,0,1,0,-b]);const Et=e.Util.applyTransform([0,0],ut),mt=e.Util.applyTransform([a,b],ut),Ot=e.Util.normalizeRect([Et[0],Et[1],mt[0],mt[1]]),Wt=Math.round(Ot[2]-Ot[0])||1,Pt=Math.round(Ot[3]-Ot[1])||1,Nt=this.cachedCanvases.getCanvas("fillCanvas",Wt,Pt),yt=Nt.context,ht=Math.min(Et[0],mt[0]),it=Math.min(Et[1],mt[1]);yt.translate(-ht,-it),yt.transform(...ut),q||(q=this._scaleImage(ct.canvas,(0,n.getCurrentTransformInverse)(yt)),q=q.img,H&&I&&H.set(tt,q)),yt.imageSmoothingEnabled=G((0,n.getCurrentTransform)(yt),u.interpolate),i(yt,q,0,0,q.width,q.height,0,0,a,b),yt.globalCompositeOperation="source-in";const dt=e.Util.transform((0,n.getCurrentTransformInverse)(yt),[1,0,0,1,-ht,-it]);return yt.fillStyle=I?E.getPattern(y,this,dt,l.PathType.FILL):E,yt.fillRect(0,0,a,b),H&&!I&&(this.cachedCanvases.delete("fillCanvas"),H.set(tt,Nt.canvas)),{canvas:Nt.canvas,offsetX:Math.round(ht),offsetY:Math.round(it)}}setLineWidth(u){u!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=u,this.ctx.lineWidth=u}setLineCap(u){this.ctx.lineCap=K[u]}setLineJoin(u){this.ctx.lineJoin=U[u]}setMiterLimit(u){this.ctx.miterLimit=u}setDash(u,y){const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(u),a.lineDashOffset=y)}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[y,a]of u)switch(y){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.current.fillAlpha=a,this.ctx.globalAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const u=this.inSMaskMode;this.current.activeSMask&&!u?this.beginSMaskMode():!this.current.activeSMask&&u&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const u=this.ctx.canvas.width,y=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,b=this.cachedCanvases.getCanvas(a,u,y);this.suspendedCtx=this.ctx,this.ctx=b.context;const E=this.ctx;E.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,E),c(E,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(u){if(!this.current.activeSMask)return;u?(u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]),u[2]=Math.ceil(u[2]),u[3]=Math.ceil(u[3])):u=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const y=this.current.activeSMask,a=this.suspendedCtx;D(a,y,this.ctx,u),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const u=this.current;this.stateStack.push(u),this.current=u.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(u,y,a,b,E,I){this.ctx.transform(u,y,a,b,E,I),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(u,y,a){const b=this.ctx,E=this.current;let I=E.x,R=E.y,H,tt;const q=(0,n.getCurrentTransform)(b),ct=q[0]===0&&q[3]===0||q[1]===0&&q[2]===0,ut=ct?a.slice(0):null;for(let Et=0,mt=0,Ot=u.length;Et<Ot;Et++)switch(u[Et]|0){case e.OPS.rectangle:I=y[mt++],R=y[mt++];const Wt=y[mt++],Pt=y[mt++],Nt=I+Wt,yt=R+Pt;b.moveTo(I,R),Wt===0||Pt===0?b.lineTo(Nt,yt):(b.lineTo(Nt,R),b.lineTo(Nt,yt),b.lineTo(I,yt)),ct||E.updateRectMinMax(q,[I,R,Nt,yt]),b.closePath();break;case e.OPS.moveTo:I=y[mt++],R=y[mt++],b.moveTo(I,R),ct||E.updatePathMinMax(q,I,R);break;case e.OPS.lineTo:I=y[mt++],R=y[mt++],b.lineTo(I,R),ct||E.updatePathMinMax(q,I,R);break;case e.OPS.curveTo:H=I,tt=R,I=y[mt+4],R=y[mt+5],b.bezierCurveTo(y[mt],y[mt+1],y[mt+2],y[mt+3],I,R),E.updateCurvePathMinMax(q,H,tt,y[mt],y[mt+1],y[mt+2],y[mt+3],I,R,ut),mt+=6;break;case e.OPS.curveTo2:H=I,tt=R,b.bezierCurveTo(I,R,y[mt],y[mt+1],y[mt+2],y[mt+3]),E.updateCurvePathMinMax(q,H,tt,I,R,y[mt],y[mt+1],y[mt+2],y[mt+3],ut),I=y[mt+2],R=y[mt+3],mt+=4;break;case e.OPS.curveTo3:H=I,tt=R,I=y[mt+2],R=y[mt+3],b.bezierCurveTo(y[mt],y[mt+1],I,R,I,R),E.updateCurvePathMinMax(q,H,tt,y[mt],y[mt+1],I,R,I,R,ut),mt+=4;break;case e.OPS.closePath:b.closePath();break}ct&&E.updateScalingPathMinMax(q,ut),E.setCurrentPoint(I,R)}closePath(){this.ctx.closePath()}stroke(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const y=this.ctx,a=this.current.strokeColor;y.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof a=="object"&&(a!=null&&a.getPattern)?(y.save(),y.strokeStyle=a.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),l.PathType.STROKE),this.rescaleAndStroke(!1),y.restore()):this.rescaleAndStroke(!0)),u&&this.consumePath(this.current.getClippedPathBoundingBox()),y.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const y=this.ctx,a=this.current.fillColor,b=this.current.patternFill;let E=!1;b&&(y.save(),y.fillStyle=a.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),l.PathType.FILL),E=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(y.fill("evenodd"),this.pendingEOFill=!1):y.fill()),E&&y.restore(),u&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_}eoClip(){this.pendingClip=et}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const u=this.pendingTextPaths,y=this.ctx;if(u===void 0){y.beginPath();return}y.save(),y.beginPath();for(const a of u)y.setTransform(...a.transform),y.translate(a.x,a.y),a.addToPath(y,a.fontSize);y.restore(),y.clip(),y.beginPath(),delete this.pendingTextPaths}setCharSpacing(u){this.current.charSpacing=u}setWordSpacing(u){this.current.wordSpacing=u}setHScale(u){this.current.textHScale=u/100}setLeading(u){this.current.leading=-u}setFont(u,y){var q;const a=this.commonObjs.get(u),b=this.current;if(!a)throw new Error(`Can't find font for ${u}`);if(b.fontMatrix=a.fontMatrix||e.FONT_IDENTITY_MATRIX,(b.fontMatrix[0]===0||b.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+u),y<0?(y=-y,b.fontDirection=-1):b.fontDirection=1,this.current.font=a,this.current.fontSize=y,a.isType3Font)return;const E=a.loadedName||"sans-serif",I=((q=a.systemFontInfo)==null?void 0:q.css)||`"${E}", ${a.fallbackName}`;let R="normal";a.black?R="900":a.bold&&(R="bold");const H=a.italic?"italic":"normal";let tt=y;y<P?tt=P:y>T&&(tt=T),this.current.fontSizeScale=y/tt,this.ctx.font=`${H} ${R} ${tt}px ${I}`}setTextRenderingMode(u){this.current.textRenderingMode=u}setTextRise(u){this.current.textRise=u}moveText(u,y){this.current.x=this.current.lineX+=u,this.current.y=this.current.lineY+=y}setLeadingMoveText(u,y){this.setLeading(-y),this.moveText(u,y)}setTextMatrix(u,y,a,b,E,I){this.current.textMatrix=[u,y,a,b,E,I],this.current.textMatrixScale=Math.hypot(u,y),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(u,y,a,b){const E=this.ctx,I=this.current,R=I.font,H=I.textRenderingMode,tt=I.fontSize/I.fontSizeScale,q=H&e.TextRenderingMode.FILL_STROKE_MASK,ct=!!(H&e.TextRenderingMode.ADD_TO_PATH_FLAG),ut=I.patternFill&&!R.missingFile;let Et;(R.disableFontFace||ct||ut)&&(Et=R.getPathGenerator(this.commonObjs,u)),R.disableFontFace||ut?(E.save(),E.translate(y,a),E.beginPath(),Et(E,tt),b&&E.setTransform(...b),(q===e.TextRenderingMode.FILL||q===e.TextRenderingMode.FILL_STROKE)&&E.fill(),(q===e.TextRenderingMode.STROKE||q===e.TextRenderingMode.FILL_STROKE)&&E.stroke(),E.restore()):((q===e.TextRenderingMode.FILL||q===e.TextRenderingMode.FILL_STROKE)&&E.fillText(u,y,a),(q===e.TextRenderingMode.STROKE||q===e.TextRenderingMode.FILL_STROKE)&&E.strokeText(u,y,a)),ct&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(E),x:y,y:a,fontSize:tt,addToPath:Et})}get isFontSubpixelAAEnabled(){const{context:u}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);u.scale(1.5,1),u.fillText("I",0,10);const y=u.getImageData(0,0,10,10).data;let a=!1;for(let b=3;b<y.length;b+=4)if(y[b]>0&&y[b]<255){a=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",a)}showText(u){const y=this.current,a=y.font;if(a.isType3Font)return this.showType3Text(u);const b=y.fontSize;if(b===0)return;const E=this.ctx,I=y.fontSizeScale,R=y.charSpacing,H=y.wordSpacing,tt=y.fontDirection,q=y.textHScale*tt,ct=u.length,ut=a.vertical,Et=ut?1:-1,mt=a.defaultVMetrics,Ot=b*y.fontMatrix[0],Wt=y.textRenderingMode===e.TextRenderingMode.FILL&&!a.disableFontFace&&!y.patternFill;E.save(),E.transform(...y.textMatrix),E.translate(y.x,y.y+y.textRise),tt>0?E.scale(q,-1):E.scale(q,1);let Pt;if(y.patternFill){E.save();const dt=y.fillColor.getPattern(E,this,(0,n.getCurrentTransformInverse)(E),l.PathType.FILL);Pt=(0,n.getCurrentTransform)(E),E.restore(),E.fillStyle=dt}let Nt=y.lineWidth;const yt=y.textMatrixScale;if(yt===0||Nt===0){const dt=y.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(dt===e.TextRenderingMode.STROKE||dt===e.TextRenderingMode.FILL_STROKE)&&(Nt=this.getSinglePixelWidth())}else Nt/=yt;if(I!==1&&(E.scale(I,I),Nt/=I),E.lineWidth=Nt,a.isInvalidPDFjsFont){const dt=[];let It=0;for(const Rt of u)dt.push(Rt.unicode),It+=Rt.width;E.fillText(dt.join(""),0,0),y.x+=It*Ot*q,E.restore(),this.compose();return}let ht=0,it;for(it=0;it<ct;++it){const dt=u[it];if(typeof dt=="number"){ht+=Et*dt*b/1e3;continue}let It=!1;const Rt=(dt.isSpace?H:0)+R,Ht=dt.fontChar,Xt=dt.accent;let zt,Vt,Kt=dt.width;if(ut){const Zt=dt.vmetric||mt,Gt=-(dt.vmetric?Zt[1]:Kt*.5)*Ot,bt=Zt[2]*Ot;Kt=Zt?-Zt[0]:Kt,zt=Gt/I,Vt=(ht+bt)/I}else zt=ht/I,Vt=0;if(a.remeasure&&Kt>0){const Zt=E.measureText(Ht).width*1e3/b*I;if(Kt<Zt&&this.isFontSubpixelAAEnabled){const Gt=Kt/Zt;It=!0,E.save(),E.scale(Gt,1),zt/=Gt}else Kt!==Zt&&(zt+=(Kt-Zt)/2e3*b/I)}if(this.contentVisible&&(dt.isInFont||a.missingFile)){if(Wt&&!Xt)E.fillText(Ht,zt,Vt);else if(this.paintChar(Ht,zt,Vt,Pt),Xt){const Zt=zt+b*Xt.offset.x/I,Gt=Vt-b*Xt.offset.y/I;this.paintChar(Xt.fontChar,Zt,Gt,Pt)}}const Jt=ut?Kt*Ot-Rt*tt:Kt*Ot+Rt*tt;ht+=Jt,It&&E.restore()}ut?y.y-=ht:y.x+=ht*q,E.restore(),this.compose()}showType3Text(u){const y=this.ctx,a=this.current,b=a.font,E=a.fontSize,I=a.fontDirection,R=b.vertical?1:-1,H=a.charSpacing,tt=a.wordSpacing,q=a.textHScale*I,ct=a.fontMatrix||e.FONT_IDENTITY_MATRIX,ut=u.length,Et=a.textRenderingMode===e.TextRenderingMode.INVISIBLE;let mt,Ot,Wt,Pt;if(!(Et||E===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,y.save(),y.transform(...a.textMatrix),y.translate(a.x,a.y),y.scale(q,I),mt=0;mt<ut;++mt){if(Ot=u[mt],typeof Ot=="number"){Pt=R*Ot*E/1e3,this.ctx.translate(Pt,0),a.x+=Pt*q;continue}const Nt=(Ot.isSpace?tt:0)+H,yt=b.charProcOperatorList[Ot.operatorListId];if(!yt){(0,e.warn)(`Type3 character "${Ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ot,this.save(),y.scale(E,E),y.transform(...ct),this.executeOperatorList(yt),this.restore()),Wt=e.Util.applyTransform([Ot.width,0],ct)[0]*E+Nt,y.translate(Wt,0),a.x+=Wt*q}y.restore(),this.processingType3=null}}setCharWidth(u,y){}setCharWidthAndBounds(u,y,a,b,E,I){this.ctx.rect(a,b,E-a,I-b),this.ctx.clip(),this.endPath()}getColorN_Pattern(u){let y;if(u[0]==="TilingPattern"){const a=u[1],b=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),E={createCanvasGraphics:I=>new wt(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};y=new l.TilingPattern(u,a,this.ctx,E,b)}else y=this._getPattern(u[1],u[2]);return y}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(u,y,a){const b=e.Util.makeHexColor(u,y,a);this.ctx.strokeStyle=b,this.current.strokeColor=b}setFillRGBColor(u,y,a){const b=e.Util.makeHexColor(u,y,a);this.ctx.fillStyle=b,this.current.fillColor=b,this.current.patternFill=!1}_getPattern(u){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a;return this.cachedPatterns.has(u)?a=this.cachedPatterns.get(u):(a=(0,l.getShadingPattern)(this.getObject(u)),this.cachedPatterns.set(u,a)),y&&(a.matrix=y),a}shadingFill(u){if(!this.contentVisible)return;const y=this.ctx;this.save();const a=this._getPattern(u);y.fillStyle=a.getPattern(y,this,(0,n.getCurrentTransformInverse)(y),l.PathType.SHADING);const b=(0,n.getCurrentTransformInverse)(y);if(b){const{width:E,height:I}=y.canvas,[R,H,tt,q]=e.Util.getAxialAlignedBoundingBox([0,0,E,I],b);this.ctx.fillRect(R,H,tt-R,q-H)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(u,y){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(u)&&u.length===6&&this.transform(...u),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),y)){const a=y[2]-y[0],b=y[3]-y[1];this.ctx.rect(y[0],y[1],a,b),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),y),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(u){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const y=this.ctx;u.isolated||(0,e.info)("TODO: Support non-isolated groups."),u.knockout&&(0,e.warn)("Knockout groups not supported.");const a=(0,n.getCurrentTransform)(y);if(u.matrix&&y.transform(...u.matrix),!u.bbox)throw new Error("Bounding box is required.");let b=e.Util.getAxialAlignedBoundingBox(u.bbox,(0,n.getCurrentTransform)(y));const E=[0,0,y.canvas.width,y.canvas.height];b=e.Util.intersect(b,E)||[0,0,0,0];const I=Math.floor(b[0]),R=Math.floor(b[1]);let H=Math.max(Math.ceil(b[2])-I,1),tt=Math.max(Math.ceil(b[3])-R,1),q=1,ct=1;H>m&&(q=H/m,H=m),tt>m&&(ct=tt/m,tt=m),this.current.startNewPathAndClipBox([0,0,H,tt]);let ut="groupAt"+this.groupLevel;u.smask&&(ut+="_smask_"+this.smaskCounter++%2);const Et=this.cachedCanvases.getCanvas(ut,H,tt),mt=Et.context;mt.scale(1/q,1/ct),mt.translate(-I,-R),mt.transform(...a),u.smask?this.smaskStack.push({canvas:Et.canvas,context:mt,offsetX:I,offsetY:R,scaleX:q,scaleY:ct,subtype:u.smask.subtype,backdrop:u.smask.backdrop,transferMap:u.smask.transferMap||null,startTransformInverse:null}):(y.setTransform(1,0,0,1,0,0),y.translate(I,R),y.scale(q,ct),y.save()),f(y,mt),this.ctx=mt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(y),this.groupLevel++}endGroup(u){if(!this.contentVisible)return;this.groupLevel--;const y=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,u.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const b=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...b);const E=e.Util.getAxialAlignedBoundingBox([0,0,y.canvas.width,y.canvas.height],b);this.ctx.drawImage(y.canvas,0,0),this.ctx.restore(),this.compose(E)}}beginAnnotation(u,y,a,b,E){if(j(this,Y,rn).call(this),A(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(y)&&y.length===4){const I=y[2]-y[0],R=y[3]-y[1];if(E&&this.annotationCanvasMap){a=a.slice(),a[4]-=y[0],a[5]-=y[1],y=y.slice(),y[0]=y[1]=0,y[2]=I,y[3]=R;const[H,tt]=e.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:q}=this,ct=Math.ceil(I*this.outputScaleX*q),ut=Math.ceil(R*this.outputScaleY*q);this.annotationCanvas=this.canvasFactory.create(ct,ut);const{canvas:Et,context:mt}=this.annotationCanvas;this.annotationCanvasMap.set(u,Et),this.annotationCanvas.savedCtx=this.ctx,this.ctx=mt,this.ctx.save(),this.ctx.setTransform(H,0,0,-tt,0,R*tt),A(this.ctx)}else A(this.ctx),this.ctx.rect(y[0],y[1],I,R),this.ctx.clip(),this.endPath()}this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...a),this.transform(...b)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),j(this,gt,sn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(u){if(!this.contentVisible)return;const y=u.count;u=this.getObject(u.data,u),u.count=y;const a=this.ctx,b=this.processingType3;if(b&&(b.compiled===void 0&&(b.compiled=d(u)),b.compiled)){b.compiled(a);return}const E=this._createMaskCanvas(u),I=E.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(I,E.offsetX,E.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(u,y){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,E=arguments.length>4?arguments[4]:void 0,I=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;u=this.getObject(u.data,u);const R=this.ctx;R.save();const H=(0,n.getCurrentTransform)(R);R.transform(y,a,b,E,0,0);const tt=this._createMaskCanvas(u);R.setTransform(1,0,0,1,tt.offsetX-H[4],tt.offsetY-H[5]);for(let q=0,ct=I.length;q<ct;q+=2){const ut=e.Util.transform(H,[y,a,b,E,I[q],I[q+1]]),[Et,mt]=e.Util.applyTransform([0,0],ut);R.drawImage(tt.canvas,Et,mt)}R.restore(),this.compose()}paintImageMaskXObjectGroup(u){if(!this.contentVisible)return;const y=this.ctx,a=this.current.fillColor,b=this.current.patternFill;for(const E of u){const{data:I,width:R,height:H,transform:tt}=E,q=this.cachedCanvases.getCanvas("maskCanvas",R,H),ct=q.context;ct.save();const ut=this.getObject(I,E);M(ct,ut),ct.globalCompositeOperation="source-in",ct.fillStyle=b?a.getPattern(ct,this,(0,n.getCurrentTransformInverse)(y),l.PathType.FILL):a,ct.fillRect(0,0,R,H),ct.restore(),y.save(),y.transform(...tt),y.scale(1,-1),i(y,q.canvas,0,0,R,H,0,-1,1,1),y.restore()}this.compose()}paintImageXObject(u){if(!this.contentVisible)return;const y=this.getObject(u);if(!y){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(y)}paintImageXObjectRepeat(u,y,a,b){if(!this.contentVisible)return;const E=this.getObject(u);if(!E){(0,e.warn)("Dependent image isn't ready yet");return}const I=E.width,R=E.height,H=[];for(let tt=0,q=b.length;tt<q;tt+=2)H.push({transform:[y,0,0,a,b[tt],b[tt+1]],x:0,y:0,w:I,h:R});this.paintInlineImageXObjectGroup(E,H)}applyTransferMapsToCanvas(u){return this.current.transferMaps!=="none"&&(u.filter=this.current.transferMaps,u.drawImage(u.canvas,0,0),u.filter="none"),u.canvas}applyTransferMapsToBitmap(u){if(this.current.transferMaps==="none")return u.bitmap;const{bitmap:y,width:a,height:b}=u,E=this.cachedCanvases.getCanvas("inlineImage",a,b),I=E.context;return I.filter=this.current.transferMaps,I.drawImage(y,0,0),I.filter="none",E.canvas}paintInlineImageXObject(u){if(!this.contentVisible)return;const y=u.width,a=u.height,b=this.ctx;if(this.save(),!e.isNodeJS){const{filter:R}=b;R!=="none"&&R!==""&&(b.filter="none")}b.scale(1/y,-1/a);let E;if(u.bitmap)E=this.applyTransferMapsToBitmap(u);else if(typeof HTMLElement=="function"&&u instanceof HTMLElement||!u.data)E=u;else{const H=this.cachedCanvases.getCanvas("inlineImage",y,a).context;O(H,u),E=this.applyTransferMapsToCanvas(H)}const I=this._scaleImage(E,(0,n.getCurrentTransformInverse)(b));b.imageSmoothingEnabled=G((0,n.getCurrentTransform)(b),u.interpolate),i(b,I.img,0,0,I.paintWidth,I.paintHeight,0,-a,y,a),this.compose(),this.restore()}paintInlineImageXObjectGroup(u,y){if(!this.contentVisible)return;const a=this.ctx;let b;if(u.bitmap)b=u.bitmap;else{const E=u.width,I=u.height,H=this.cachedCanvases.getCanvas("inlineImage",E,I).context;O(H,u),b=this.applyTransferMapsToCanvas(H)}for(const E of y)a.save(),a.transform(...E.transform),a.scale(1,-1),i(a,b,E.x,E.y,E.w,E.h,0,-1,1,1),a.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(u){}markPointProps(u,y){}beginMarkedContent(u){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(u,y){u==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(y)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(u){const y=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(u);const a=this.ctx;this.pendingClip&&(y||(this.pendingClip===et?a.clip("evenodd"):a.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const u=(0,n.getCurrentTransform)(this.ctx);if(u[1]===0&&u[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(u[0]),Math.abs(u[3]));else{const y=Math.abs(u[0]*u[3]-u[2]*u[1]),a=Math.hypot(u[0],u[2]),b=Math.hypot(u[1],u[3]);this._cachedGetSinglePixelWidth=Math.max(a,b)/y}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:u}=this.current,{a:y,b:a,c:b,d:E}=this.ctx.getTransform();let I,R;if(a===0&&b===0){const H=Math.abs(y),tt=Math.abs(E);if(H===tt)if(u===0)I=R=1/H;else{const q=H*u;I=R=q<1?1/q:1}else if(u===0)I=1/H,R=1/tt;else{const q=H*u,ct=tt*u;I=q<1?1/q:1,R=ct<1?1/ct:1}}else{const H=Math.abs(y*E-a*b),tt=Math.hypot(y,a),q=Math.hypot(b,E);if(u===0)I=q/H,R=tt/H;else{const ct=u*H;I=q>ct?q/ct:1,R=tt>ct?tt/ct:1}}this._cachedScaleForStroking[0]=I,this._cachedScaleForStroking[1]=R}return this._cachedScaleForStroking}rescaleAndStroke(u){const{ctx:y}=this,{lineWidth:a}=this.current,[b,E]=this.getScaleForStroking();if(y.lineWidth=a||1,b===1&&E===1){y.stroke();return}const I=y.getLineDash();if(u&&y.save(),y.scale(b,E),I.length>0){const R=Math.max(b,E);y.setLineDash(I.map(H=>H/R)),y.lineDashOffset/=R}y.stroke(),u&&y.restore()}isContentVisible(){for(let u=this.markedContentStack.length-1;u>=0;u--)if(!this.markedContentStack[u].visible)return!1;return!0}};Y=new WeakSet,rn=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gt=new WeakSet,sn=function(){if(this.pageColors){const u=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(u!=="none"){const y=this.ctx.filter;this.ctx.filter=u,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=y}}};let rt=wt;r.CanvasGraphics=rt;for(const W in e.OPS)rt.prototype[W]!==void 0&&(rt.prototype[e.OPS[W]]=rt.prototype[W])},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=x,t(2);var e=t(1),n=t(168);const l={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=l;function v(d,C){if(!C)return;const O=C[2]-C[0],M=C[3]-C[1],f=new Path2D;f.rect(C[0],C[1],O,M),d.clip(f)}class P{constructor(){this.constructor===P&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class T extends P{constructor(C){super(),this._type=C[1],this._bbox=C[2],this._colorStops=C[3],this._p0=C[4],this._p1=C[5],this._r0=C[6],this._r1=C[7],this.matrix=null}_createGradient(C){let O;this._type==="axial"?O=C.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(O=C.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const M of this._colorStops)O.addColorStop(M[0],M[1]);return O}getPattern(C,O,M,f){let A;if(f===l.STROKE||f===l.FILL){const L=O.current.getClippedPathBoundingBox(f,(0,n.getCurrentTransform)(C))||[0,0,0,0],F=Math.ceil(L[2]-L[0])||1,S=Math.ceil(L[3]-L[1])||1,N=O.cachedCanvases.getCanvas("pattern",F,S,!0),D=N.context;D.clearRect(0,0,D.canvas.width,D.canvas.height),D.beginPath(),D.rect(0,0,D.canvas.width,D.canvas.height),D.translate(-L[0],-L[1]),M=e.Util.transform(M,[1,0,0,1,L[0],L[1]]),D.transform(...O.baseTransform),this.matrix&&D.transform(...this.matrix),v(D,this._bbox),D.fillStyle=this._createGradient(D),D.fill(),A=C.createPattern(N.canvas,"no-repeat");const G=new DOMMatrix(M);A.setTransform(G)}else v(C,this._bbox),A=this._createGradient(C);return A}}function m(d,C,O,M,f,A,L,F){const S=C.coords,N=C.colors,D=d.data,G=d.width*4;let K;S[O+1]>S[M+1]&&(K=O,O=M,M=K,K=A,A=L,L=K),S[M+1]>S[f+1]&&(K=M,M=f,f=K,K=L,L=F,F=K),S[O+1]>S[M+1]&&(K=O,O=M,M=K,K=A,A=L,L=K);const U=(S[O]+C.offsetX)*C.scaleX,_=(S[O+1]+C.offsetY)*C.scaleY,et=(S[M]+C.offsetX)*C.scaleX,rt=(S[M+1]+C.offsetY)*C.scaleY,Y=(S[f]+C.offsetX)*C.scaleX,st=(S[f+1]+C.offsetY)*C.scaleY;if(_>=st)return;const gt=N[A],At=N[A+1],wt=N[A+2],W=N[L],u=N[L+1],y=N[L+2],a=N[F],b=N[F+1],E=N[F+2],I=Math.round(_),R=Math.round(st);let H,tt,q,ct,ut,Et,mt,Ot;for(let Wt=I;Wt<=R;Wt++){if(Wt<rt){const it=Wt<_?0:(_-Wt)/(_-rt);H=U-(U-et)*it,tt=gt-(gt-W)*it,q=At-(At-u)*it,ct=wt-(wt-y)*it}else{let it;Wt>st?it=1:rt===st?it=0:it=(rt-Wt)/(rt-st),H=et-(et-Y)*it,tt=W-(W-a)*it,q=u-(u-b)*it,ct=y-(y-E)*it}let Pt;Wt<_?Pt=0:Wt>st?Pt=1:Pt=(_-Wt)/(_-st),ut=U-(U-Y)*Pt,Et=gt-(gt-a)*Pt,mt=At-(At-b)*Pt,Ot=wt-(wt-E)*Pt;const Nt=Math.round(Math.min(H,ut)),yt=Math.round(Math.max(H,ut));let ht=G*Wt+Nt*4;for(let it=Nt;it<=yt;it++)Pt=(H-it)/(H-ut),Pt<0?Pt=0:Pt>1&&(Pt=1),D[ht++]=tt-(tt-Et)*Pt|0,D[ht++]=q-(q-mt)*Pt|0,D[ht++]=ct-(ct-Ot)*Pt|0,D[ht++]=255}}function p(d,C,O){const M=C.coords,f=C.colors;let A,L;switch(C.type){case"lattice":const F=C.verticesPerRow,S=Math.floor(M.length/F)-1,N=F-1;for(A=0;A<S;A++){let D=A*F;for(let G=0;G<N;G++,D++)m(d,O,M[D],M[D+1],M[D+F],f[D],f[D+1],f[D+F]),m(d,O,M[D+F+1],M[D+1],M[D+F],f[D+F+1],f[D+1],f[D+F])}break;case"triangles":for(A=0,L=M.length;A<L;A+=3)m(d,O,M[A],M[A+1],M[A+2],f[A],f[A+1],f[A+2]);break;default:throw new Error("illegal figure")}}class w extends P{constructor(C){super(),this._coords=C[2],this._colors=C[3],this._figures=C[4],this._bounds=C[5],this._bbox=C[7],this._background=C[8],this.matrix=null}_createMeshCanvas(C,O,M){const F=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-F,D=Math.ceil(this._bounds[3])-S,G=Math.min(Math.ceil(Math.abs(N*C[0]*1.1)),3e3),K=Math.min(Math.ceil(Math.abs(D*C[1]*1.1)),3e3),U=N/G,_=D/K,et={coords:this._coords,colors:this._colors,offsetX:-F,offsetY:-S,scaleX:1/U,scaleY:1/_},rt=G+2*2,Y=K+2*2,st=M.getCanvas("mesh",rt,Y,!1),gt=st.context,At=gt.createImageData(G,K);if(O){const W=At.data;for(let u=0,y=W.length;u<y;u+=4)W[u]=O[0],W[u+1]=O[1],W[u+2]=O[2],W[u+3]=255}for(const W of this._figures)p(At,W,et);return gt.putImageData(At,2,2),{canvas:st.canvas,offsetX:F-2*U,offsetY:S-2*_,scaleX:U,scaleY:_}}getPattern(C,O,M,f){v(C,this._bbox);let A;if(f===l.SHADING)A=e.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(C));else if(A=e.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const F=e.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*F[0],A[1]*F[1]]}const L=this._createMeshCanvas(A,f===l.SHADING?null:this._background,O.cachedCanvases);return f!==l.SHADING&&(C.setTransform(...O.baseTransform),this.matrix&&C.transform(...this.matrix)),C.translate(L.offsetX,L.offsetY),C.scale(L.scaleX,L.scaleY),C.createPattern(L.canvas,"no-repeat")}}class k extends P{getPattern(){return"hotpink"}}function x(d){switch(d[0]){case"RadialAxial":return new T(d);case"Mesh":return new w(d);case"Dummy":return new k}throw new Error(`Unknown IR type: ${d[0]}`)}const c={COLORED:1,UNCOLORED:2},i=class i{constructor(C,O,M,f,A){this.operatorList=C[2],this.matrix=C[3]||[1,0,0,1,0,0],this.bbox=C[4],this.xstep=C[5],this.ystep=C[6],this.paintType=C[7],this.tilingType=C[8],this.color=O,this.ctx=M,this.canvasGraphicsFactory=f,this.baseTransform=A}createPatternCanvas(C){const O=this.operatorList,M=this.bbox,f=this.xstep,A=this.ystep,L=this.paintType,F=this.tilingType,S=this.color,N=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+F);const D=M[0],G=M[1],K=M[2],U=M[3],_=e.Util.singularValueDecompose2dScale(this.matrix),et=e.Util.singularValueDecompose2dScale(this.baseTransform),rt=[_[0]*et[0],_[1]*et[1]],Y=this.getSizeAndScale(f,this.ctx.canvas.width,rt[0]),st=this.getSizeAndScale(A,this.ctx.canvas.height,rt[1]),gt=C.cachedCanvases.getCanvas("pattern",Y.size,st.size,!0),At=gt.context,wt=N.createCanvasGraphics(At);wt.groupLevel=C.groupLevel,this.setFillAndStrokeStyleToContext(wt,L,S);let W=D,u=G,y=K,a=U;return D<0&&(W=0,y+=Math.abs(D)),G<0&&(u=0,a+=Math.abs(G)),At.translate(-(Y.scale*W),-(st.scale*u)),wt.transform(Y.scale,0,0,st.scale,0,0),At.save(),this.clipBbox(wt,W,u,y,a),wt.baseTransform=(0,n.getCurrentTransform)(wt.ctx),wt.executeOperatorList(O),wt.endDrawing(),{canvas:gt.canvas,scaleX:Y.scale,scaleY:st.scale,offsetX:W,offsetY:u}}getSizeAndScale(C,O,M){C=Math.abs(C);const f=Math.max(i.MAX_PATTERN_SIZE,O);let A=Math.ceil(C*M);return A>=f?A=f:M=A/C,{scale:M,size:A}}clipBbox(C,O,M,f,A){const L=f-O,F=A-M;C.ctx.rect(O,M,L,F),C.current.updateRectMinMax((0,n.getCurrentTransform)(C.ctx),[O,M,f,A]),C.clip(),C.endPath()}setFillAndStrokeStyleToContext(C,O,M){const f=C.ctx,A=C.current;switch(O){case c.COLORED:const L=this.ctx;f.fillStyle=L.fillStyle,f.strokeStyle=L.strokeStyle,A.fillColor=L.fillStyle,A.strokeColor=L.strokeStyle;break;case c.UNCOLORED:const F=e.Util.makeHexColor(M[0],M[1],M[2]);f.fillStyle=F,f.strokeStyle=F,A.fillColor=F,A.strokeColor=F;break;default:throw new e.FormatError(`Unsupported paint type: ${O}`)}}getPattern(C,O,M,f){let A=M;f!==l.SHADING&&(A=e.Util.transform(A,O.baseTransform),this.matrix&&(A=e.Util.transform(A,this.matrix)));const L=this.createPatternCanvas(O);let F=new DOMMatrix(A);F=F.translate(L.offsetX,L.offsetY),F=F.scale(1/L.scaleX,1/L.scaleY);const S=C.createPattern(L.canvas,"repeat");return S.setTransform(F),S}};ne(i,"MAX_PATTERN_SIZE",3e3);let o=i;r.TilingPattern=o},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.convertBlackAndWhiteToRGBA=l,r.convertToRGBA=n,r.grayToRGBA=P,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var e=t(1);function n(T){switch(T.kind){case e.ImageKind.GRAYSCALE_1BPP:return l(T);case e.ImageKind.RGB_24BPP:return v(T)}return null}function l(T){let{src:m,srcPos:p=0,dest:w,width:k,height:x,nonBlackColor:c=4294967295,inverseDecode:o=!1}=T;const i=e.FeatureTest.isLittleEndian?4278190080:255,[d,C]=o?[c,i]:[i,c],O=k>>3,M=k&7,f=m.length;w=new Uint32Array(w.buffer);let A=0;for(let L=0;L<x;L++){for(const S=p+O;p<S;p++){const N=p<f?m[p]:255;w[A++]=N&128?C:d,w[A++]=N&64?C:d,w[A++]=N&32?C:d,w[A++]=N&16?C:d,w[A++]=N&8?C:d,w[A++]=N&4?C:d,w[A++]=N&2?C:d,w[A++]=N&1?C:d}if(M===0)continue;const F=p<f?m[p++]:255;for(let S=0;S<M;S++)w[A++]=F&1<<7-S?C:d}return{srcPos:p,destPos:A}}function v(T){let{src:m,srcPos:p=0,dest:w,destPos:k=0,width:x,height:c}=T,o=0;const i=m.length>>2,d=new Uint32Array(m.buffer,p,i);if(e.FeatureTest.isLittleEndian){for(;o<i-2;o+=3,k+=4){const C=d[o],O=d[o+1],M=d[o+2];w[k]=C|4278190080,w[k+1]=C>>>24|O<<8|4278190080,w[k+2]=O>>>16|M<<16|4278190080,w[k+3]=M>>>8|4278190080}for(let C=o*4,O=m.length;C<O;C+=3)w[k++]=m[C]|m[C+1]<<8|m[C+2]<<16|4278190080}else{for(;o<i-2;o+=3,k+=4){const C=d[o],O=d[o+1],M=d[o+2];w[k]=C|255,w[k+1]=C<<24|O>>>8|255,w[k+2]=O<<16|M>>>16|255,w[k+3]=M<<8|255}for(let C=o*4,O=m.length;C<O;C+=3)w[k++]=m[C]<<24|m[C+1]<<16|m[C+2]<<8|255}return{srcPos:p,destPos:k}}function P(T,m){if(e.FeatureTest.isLittleEndian)for(let p=0,w=T.length;p<w;p++)m[p]=T[p]*65793|4278190080;else for(let p=0,w=T.length;p<w;p++)m[p]=T[p]*16843008|255}},(g,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const t=Object.create(null);r.GlobalWorkerOptions=t,t.workerPort=null,t.workerSrc=""},(g,r,t)=>{var T,Ln,p,Nn,k,Fe;Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0,t(2);var e=t(1);const n={UNKNOWN:0,DATA:1,ERROR:2},l={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function v(c){switch(c instanceof Error||typeof c=="object"&&c!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new e.AbortException(c.message);case"MissingPDFException":return new e.MissingPDFException(c.message);case"PasswordException":return new e.PasswordException(c.message,c.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(c.message,c.status);case"UnknownErrorException":return new e.UnknownErrorException(c.message,c.details);default:return new e.UnknownErrorException(c.message,c.toString())}}class P{constructor(o,i,d){X(this,T);X(this,p);X(this,k);this.sourceName=o,this.targetName=i,this.comObj=d,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=C=>{const O=C.data;if(O.targetName!==this.sourceName)return;if(O.stream){j(this,p,Nn).call(this,O);return}if(O.callback){const f=O.callbackId,A=this.callbackCapabilities[f];if(!A)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],O.callback===n.DATA)A.resolve(O.data);else if(O.callback===n.ERROR)A.reject(v(O.reason));else throw new Error("Unexpected callback case");return}const M=this.actionHandler[O.action];if(!M)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const f=this.sourceName,A=O.sourceName;new Promise(function(L){L(M(O.data))}).then(function(L){d.postMessage({sourceName:f,targetName:A,callback:n.DATA,callbackId:O.callbackId,data:L})},function(L){d.postMessage({sourceName:f,targetName:A,callback:n.ERROR,callbackId:O.callbackId,reason:v(L)})});return}if(O.streamId){j(this,T,Ln).call(this,O);return}M(O.data)},d.addEventListener("message",this._onComObjOnMessage)}on(o,i){const d=this.actionHandler;if(d[o])throw new Error(`There is already an actionName called "${o}"`);d[o]=i}send(o,i,d){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,data:i},d)}sendWithPromise(o,i,d){const C=this.callbackId++,O=new e.PromiseCapability;this.callbackCapabilities[C]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,callbackId:C,data:i},d)}catch(M){O.reject(M)}return O.promise}sendWithStream(o,i,d,C){const O=this.streamId++,M=this.sourceName,f=this.targetName,A=this.comObj;return new ReadableStream({start:L=>{const F=new e.PromiseCapability;return this.streamControllers[O]={controller:L,startCall:F,pullCall:null,cancelCall:null,isClosed:!1},A.postMessage({sourceName:M,targetName:f,action:o,streamId:O,data:i,desiredSize:L.desiredSize},C),F.promise},pull:L=>{const F=new e.PromiseCapability;return this.streamControllers[O].pullCall=F,A.postMessage({sourceName:M,targetName:f,stream:l.PULL,streamId:O,desiredSize:L.desiredSize}),F.promise},cancel:L=>{(0,e.assert)(L instanceof Error,"cancel must have a valid reason");const F=new e.PromiseCapability;return this.streamControllers[O].cancelCall=F,this.streamControllers[O].isClosed=!0,A.postMessage({sourceName:M,targetName:f,stream:l.CANCEL,streamId:O,reason:v(L)}),F.promise}},d)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}T=new WeakSet,Ln=function(o){const i=o.streamId,d=this.sourceName,C=o.sourceName,O=this.comObj,M=this,f=this.actionHandler[o.action],A={enqueue(L){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,S=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const N=this.desiredSize;this.desiredSize-=F,N>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),O.postMessage({sourceName:d,targetName:C,stream:l.ENQUEUE,streamId:i,chunk:L},S)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:d,targetName:C,stream:l.CLOSE,streamId:i}),delete M.streamSinks[i])},error(L){(0,e.assert)(L instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:d,targetName:C,stream:l.ERROR,streamId:i,reason:v(L)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:o.desiredSize,ready:null};A.sinkCapability.resolve(),A.ready=A.sinkCapability.promise,this.streamSinks[i]=A,new Promise(function(L){L(f(o.data,A))}).then(function(){O.postMessage({sourceName:d,targetName:C,stream:l.START_COMPLETE,streamId:i,success:!0})},function(L){O.postMessage({sourceName:d,targetName:C,stream:l.START_COMPLETE,streamId:i,reason:v(L)})})},p=new WeakSet,Nn=function(o){const i=o.streamId,d=this.sourceName,C=o.sourceName,O=this.comObj,M=this.streamControllers[i],f=this.streamSinks[i];switch(o.stream){case l.START_COMPLETE:o.success?M.startCall.resolve():M.startCall.reject(v(o.reason));break;case l.PULL_COMPLETE:o.success?M.pullCall.resolve():M.pullCall.reject(v(o.reason));break;case l.PULL:if(!f){O.postMessage({sourceName:d,targetName:C,stream:l.PULL_COMPLETE,streamId:i,success:!0});break}f.desiredSize<=0&&o.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=o.desiredSize,new Promise(function(A){var L;A((L=f.onPull)==null?void 0:L.call(f))}).then(function(){O.postMessage({sourceName:d,targetName:C,stream:l.PULL_COMPLETE,streamId:i,success:!0})},function(A){O.postMessage({sourceName:d,targetName:C,stream:l.PULL_COMPLETE,streamId:i,reason:v(A)})});break;case l.ENQUEUE:if((0,e.assert)(M,"enqueue should have stream controller"),M.isClosed)break;M.controller.enqueue(o.chunk);break;case l.CLOSE:if((0,e.assert)(M,"close should have stream controller"),M.isClosed)break;M.isClosed=!0,M.controller.close(),j(this,k,Fe).call(this,M,i);break;case l.ERROR:(0,e.assert)(M,"error should have stream controller"),M.controller.error(v(o.reason)),j(this,k,Fe).call(this,M,i);break;case l.CANCEL_COMPLETE:o.success?M.cancelCall.resolve():M.cancelCall.reject(v(o.reason)),j(this,k,Fe).call(this,M,i);break;case l.CANCEL:if(!f)break;new Promise(function(A){var L;A((L=f.onCancel)==null?void 0:L.call(f,v(o.reason)))}).then(function(){O.postMessage({sourceName:d,targetName:C,stream:l.CANCEL_COMPLETE,streamId:i,success:!0})},function(A){O.postMessage({sourceName:d,targetName:C,stream:l.CANCEL_COMPLETE,streamId:i,reason:v(A)})}),f.sinkCapability.reject(v(o.reason)),f.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}},k=new WeakSet,Fe=function(o,i){return ee(this,null,function*(){var d,C,O;yield Promise.allSettled([(d=o.startCall)==null?void 0:d.promise,(C=o.pullCall)==null?void 0:C.promise,(O=o.cancelCall)==null?void 0:O.promise]),delete this.streamControllers[i]})},r.MessageHandler=P},(g,r,t)=>{var l,v;Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var e=t(1);class n{constructor(T){X(this,l,void 0);X(this,v,void 0);let{parsedData:m,rawData:p}=T;at(this,l,m),at(this,v,p)}getRaw(){return s(this,v)}get(T){var m;return(m=s(this,l).get(T))!=null?m:null}getAll(){return(0,e.objectFromMap)(s(this,l))}has(T){return s(this,l).has(T)}}l=new WeakMap,v=new WeakMap,r.Metadata=n},(g,r,t)=>{var T,m,p,w,k,x,an;Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var e=t(1),n=t(170);const l=Symbol("INTERNAL");class v{constructor(i,d){X(this,T,!0);this.name=i,this.intent=d}get visible(){return s(this,T)}_setVisible(i,d){i!==l&&(0,e.unreachable)("Internal method `_setVisible` called."),at(this,T,d)}}T=new WeakMap;class P{constructor(i){X(this,x);X(this,m,null);X(this,p,new Map);X(this,w,null);X(this,k,null);if(this.name=null,this.creator=null,i!==null){this.name=i.name,this.creator=i.creator,at(this,k,i.order);for(const d of i.groups)s(this,p).set(d.id,new v(d.name,d.intent));if(i.baseState==="OFF")for(const d of s(this,p).values())d._setVisible(l,!1);for(const d of i.on)s(this,p).get(d)._setVisible(l,!0);for(const d of i.off)s(this,p).get(d)._setVisible(l,!1);at(this,w,this.getHash())}}isVisible(i){if(s(this,p).size===0)return!0;if(!i)return(0,e.warn)("Optional content group not defined."),!0;if(i.type==="OCG")return s(this,p).has(i.id)?s(this,p).get(i.id).visible:((0,e.warn)(`Optional content group not found: ${i.id}`),!0);if(i.type==="OCMD"){if(i.expression)return j(this,x,an).call(this,i.expression);if(!i.policy||i.policy==="AnyOn"){for(const d of i.ids){if(!s(this,p).has(d))return(0,e.warn)(`Optional content group not found: ${d}`),!0;if(s(this,p).get(d).visible)return!0}return!1}else if(i.policy==="AllOn"){for(const d of i.ids){if(!s(this,p).has(d))return(0,e.warn)(`Optional content group not found: ${d}`),!0;if(!s(this,p).get(d).visible)return!1}return!0}else if(i.policy==="AnyOff"){for(const d of i.ids){if(!s(this,p).has(d))return(0,e.warn)(`Optional content group not found: ${d}`),!0;if(!s(this,p).get(d).visible)return!0}return!1}else if(i.policy==="AllOff"){for(const d of i.ids){if(!s(this,p).has(d))return(0,e.warn)(`Optional content group not found: ${d}`),!0;if(s(this,p).get(d).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${i.policy}.`),!0}return(0,e.warn)(`Unknown group type ${i.type}.`),!0}setVisibility(i){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!s(this,p).has(i)){(0,e.warn)(`Optional content group not found: ${i}`);return}s(this,p).get(i)._setVisible(l,!!d),at(this,m,null)}get hasInitialVisibility(){return s(this,w)===null||this.getHash()===s(this,w)}getOrder(){return s(this,p).size?s(this,k)?s(this,k).slice():[...s(this,p).keys()]:null}getGroups(){return s(this,p).size>0?(0,e.objectFromMap)(s(this,p)):null}getGroup(i){return s(this,p).get(i)||null}getHash(){if(s(this,m)!==null)return s(this,m);const i=new n.MurmurHash3_64;for(const[d,C]of s(this,p))i.update(`${d}:${C.visible}`);return at(this,m,i.hexdigest())}}m=new WeakMap,p=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakSet,an=function(i){const d=i.length;if(d<2)return!0;const C=i[0];for(let O=1;O<d;O++){const M=i[O];let f;if(Array.isArray(M))f=j(this,x,an).call(this,M);else if(s(this,p).has(M))f=s(this,p).get(M).visible;else return(0,e.warn)(`Optional content group not found: ${M}`),!0;switch(C){case"And":if(!f)return!1;break;case"Or":if(f)return!0;break;case"Not":return!f;default:return!0}}return C==="And"},r.OptionalContentConfig=P},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var e=t(1),n=t(168);class l{constructor(m,p){let{length:w,initialData:k,progressiveDone:x=!1,contentDispositionFilename:c=null,disableRange:o=!1,disableStream:i=!1}=m;if((0,e.assert)(p,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=x,this._contentDispositionFilename=c,(k==null?void 0:k.length)>0){const d=k instanceof Uint8Array&&k.byteLength===k.buffer.byteLength?k.buffer:new Uint8Array(k).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=p,this._isStreamingSupported=!i,this._isRangeSupported=!o,this._contentLength=w,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,C)=>{this._onReceiveData({begin:d,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((d,C)=>{this._onProgress({loaded:d,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(m){let{begin:p,chunk:w}=m;const k=w instanceof Uint8Array&&w.byteLength===w.buffer.byteLength?w.buffer:new Uint8Array(w).buffer;if(p===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const x=this._rangeReaders.some(function(c){return c._begin!==p?!1:(c._enqueue(k),!0)});(0,e.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m,p;return(p=(m=this._fullRequestReader)==null?void 0:m._loaded)!=null?p:0}_onProgress(m){var p,w,k,x;m.total===void 0?(w=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||w.call(p,{loaded:m.loaded}):(x=(k=this._fullRequestReader)==null?void 0:k.onProgress)==null||x.call(k,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const p=this._rangeReaders.indexOf(m);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new v(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,p){if(p<=this._progressiveDataLength)return null;const w=new P(this,m,p);return this._pdfDataRangeTransport.requestDataRange(m,p),this._rangeReaders.push(w),w}cancelAllRequests(m){var p;(p=this._fullRequestReader)==null||p.cancel(m);for(const w of this._rangeReaders.slice(0))w.cancel(m);this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=l;class v{constructor(m,p){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=m,this._done=w||!1,this._filename=(0,n.isPdfFile)(k)?k:null,this._queuedChunks=p||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return ee(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=new e.PromiseCapability;return this._requests.push(m),m.promise})}cancel(m){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class P{constructor(m,p,w){this._stream=m,this._begin=p,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return ee(this,null,function*(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const m=new e.PromiseCapability;return this._requests.push(m),m.promise})}cancel(m){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var e=t(1),n=t(182);function l(w,k,x){return{method:"GET",headers:w,signal:x.signal,mode:"cors",credentials:k?"include":"same-origin",redirect:"follow"}}function v(w){const k=new Headers;for(const x in w){const c=w[x];c!==void 0&&k.append(x,c)}return k}function P(w){return w instanceof Uint8Array?w.buffer:w instanceof ArrayBuffer?w:((0,e.warn)(`getArrayBuffer - unexpected data format: ${w}`),new Uint8Array(w).buffer)}class T{constructor(k){this.source=k,this.isHttp=/^https?:/i.test(k.url),this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k,x;return(x=(k=this._fullRequestReader)==null?void 0:k._loaded)!=null?x:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}getRangeReader(k,x){if(x<=this._progressiveDataLength)return null;const c=new p(this,k,x);return this._rangeRequestReaders.push(c),c}cancelAllRequests(k){var x;(x=this._fullRequestReader)==null||x.cancel(k);for(const c of this._rangeRequestReaders.slice(0))c.cancel(k)}}r.PDFFetchStream=T;class m{constructor(k){this._stream=k,this._reader=null,this._loaded=0,this._filename=null;const x=k.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new e.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=v(this._stream.httpHeaders);const c=x.url;fetch(c,l(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,n.validateResponseStatus)(o.status))throw(0,n.createResponseStatusError)(o.status,c);this._reader=o.body.getReader(),this._headersCapability.resolve();const i=O=>o.headers.get(O),{allowRangeRequests:d,suggestedLength:C}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=C||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ee(this,null,function*(){var c;yield this._headersCapability.promise;const{value:k,done:x}=yield this._reader.read();return x?{value:k,done:x}:(this._loaded+=k.byteLength,(c=this.onProgress)==null||c.call(this,{loaded:this._loaded,total:this._contentLength}),{value:P(k),done:!1})})}cancel(k){var x;(x=this._reader)==null||x.cancel(k),this._abortController.abort()}}class p{constructor(k,x,c){this._stream=k,this._reader=null,this._loaded=0;const o=k.source;this._withCredentials=o.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=v(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${c-1}`);const i=o.url;fetch(i,l(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,n.validateResponseStatus)(d.status))throw(0,n.createResponseStatusError)(d.status,i);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return ee(this,null,function*(){var c;yield this._readCapability.promise;const{value:k,done:x}=yield this._reader.read();return x?{value:k,done:x}:(this._loaded+=k.byteLength,(c=this.onProgress)==null||c.call(this,{loaded:this._loaded}),{value:P(k),done:!1})})}cancel(k){var x;(x=this._reader)==null||x.cancel(k),this._abortController.abort()}}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=T,r.extractFilenameFromHeader=P,r.validateRangeRequestCapabilities=v,r.validateResponseStatus=m;var e=t(1),n=t(183),l=t(168);function v(p){let{getResponseHeader:w,isHttp:k,rangeChunkSize:x,disableRange:c}=p;const o={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(w("Content-Length"),10);return!Number.isInteger(i)||(o.suggestedLength=i,i<=2*x)||c||!k||w("Accept-Ranges")!=="bytes"||(w("Content-Encoding")||"identity")!=="identity"||(o.allowRangeRequests=!0),o}function P(p){const w=p("Content-Disposition");if(w){let k=(0,n.getFilenameFromContentDispositionHeader)(w);if(k.includes("%"))try{k=decodeURIComponent(k)}catch(x){}if((0,l.isPdfFile)(k))return k}return null}function T(p,w){return p===404||p===0&&w.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+w+'".'):new e.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${w}".`,p)}function m(p){return p===200||p===206}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=n,t(89),t(149);var e=t(1);function n(l){let v=!0,P=T("filename\\*","i").exec(l);if(P){P=P[1];let o=k(P);return o=unescape(o),o=x(o),o=c(o),p(o)}if(P=w(l),P){const o=c(P);return p(o)}if(P=T("filename","i").exec(l),P){P=P[1];let o=k(P);return o=c(o),p(o)}function T(o,i){return new RegExp("(?:^|;)\\s*"+o+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',i)}function m(o,i){if(o){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const d=new TextDecoder(o,{fatal:!0}),C=(0,e.stringToBytes)(i);i=d.decode(C),v=!1}catch(d){}}return i}function p(o){return v&&/[\x80-\xff]/.test(o)&&(o=m("utf-8",o),v&&(o=m("iso-8859-1",o))),o}function w(o){const i=[];let d;const C=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=C.exec(o))!==null;){let[,M,f,A]=d;if(M=parseInt(M,10),M in i){if(M===0)break;continue}i[M]=[f,A]}const O=[];for(let M=0;M<i.length&&M in i;++M){let[f,A]=i[M];A=k(A),f&&(A=unescape(A),M===0&&(A=x(A))),O.push(A)}return O.join("")}function k(o){if(o.startsWith('"')){const i=o.slice(1).split('\\"');for(let d=0;d<i.length;++d){const C=i[d].indexOf('"');C!==-1&&(i[d]=i[d].slice(0,C),i.length=d+1),i[d]=i[d].replaceAll(/\\(.)/g,"$1")}o=i.join('"')}return o}function x(o){const i=o.indexOf("'");if(i===-1)return o;const d=o.slice(0,i),O=o.slice(i+1).replace(/^[^']*'/,"");return m(d,O)}function c(o){return!o.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(o)?o:o.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(i,d,C,O){if(C==="q"||C==="Q")return O=O.replaceAll("_"," "),O=O.replaceAll(/=([0-9a-fA-F]{2})/g,function(M,f){return String.fromCharCode(parseInt(f,16))}),m(d,O);try{O=atob(O)}catch(M){}return m(d,O)})}return""}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0,t(89);var e=t(1),n=t(182);const l=200,v=206;function P(k){const x=k.response;return typeof x!="string"?x:(0,e.stringToBytes)(x).buffer}class T{constructor(x){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&c.httpHeaders||Object.create(null),this.withCredentials=c.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,c,o){const i={begin:x,end:c};for(const d in o)i[d]=o[d];return this.request(i)}requestFull(x){return this.request(x)}request(x){const c=new XMLHttpRequest,o=this.currXhrId++,i=this.pendingRequests[o]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(const d in this.httpHeaders){const C=this.httpHeaders[d];C!==void 0&&c.setRequestHeader(d,C)}return this.isHttp&&"begin"in x&&"end"in x?(c.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),i.expectedStatus=v):i.expectedStatus=l,c.responseType="arraybuffer",x.onError&&(c.onerror=function(d){x.onError(c.status)}),c.onreadystatechange=this.onStateChange.bind(this,o),c.onprogress=this.onProgress.bind(this,o),i.onHeadersReceived=x.onHeadersReceived,i.onDone=x.onDone,i.onError=x.onError,i.onProgress=x.onProgress,c.send(null),o}onProgress(x,c){var i;const o=this.pendingRequests[x];o&&((i=o.onProgress)==null||i.call(o,c))}onStateChange(x,c){var M,f,A;const o=this.pendingRequests[x];if(!o)return;const i=o.xhr;if(i.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),i.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],i.status===0&&this.isHttp){(M=o.onError)==null||M.call(o,i.status);return}const d=i.status||l;if(!(d===l&&o.expectedStatus===v)&&d!==o.expectedStatus){(f=o.onError)==null||f.call(o,i.status);return}const O=P(i);if(d===v){const L=i.getResponseHeader("Content-Range"),F=/bytes (\d+)-(\d+)\/(\d+)/.exec(L);o.onDone({begin:parseInt(F[1],10),chunk:O})}else O?o.onDone({begin:0,chunk:O}):(A=o.onError)==null||A.call(o,i.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const c=this.pendingRequests[x].xhr;delete this.pendingRequests[x],c.abort()}}class m{constructor(x){this._source=x,this._manager=new T(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const c=this._rangeRequestReaders.indexOf(x);c>=0&&this._rangeRequestReaders.splice(c,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(x,c){const o=new w(this._manager,x,c);return o.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(o),o}cancelAllRequests(x){var c;(c=this._fullRequestReader)==null||c.cancel(x);for(const o of this._rangeRequestReaders.slice(0))o.cancel(x)}}r.PDFNetworkStream=m;class p{constructor(x,c){this._manager=x;const o={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._fullRequestId=x.requestFull(o),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=c.disableRange||!1,this._contentLength=c.length,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,c=this._manager.getRequestXhr(x),o=C=>c.getResponseHeader(C),{allowRangeRequests:i,suggestedLength:d}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(o),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,n.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var c;(c=this.onProgress)==null||c.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return ee(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new e.PromiseCapability;return this._requests.push(x),x.promise})}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(x,c,o){this._manager=x;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(c,o,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const c=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunk=c,this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,n.createResponseStatusError)(x,this._url);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var c;this.isStreamingSupported||(c=this.onProgress)==null||c.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}read(){return ee(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new e.PromiseCapability;return this._requests.push(x),x.promise})}cancel(x){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0,t(89),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var e=t(1),n=t(182);const l=/^file:\/\/\/[a-zA-Z]:\//;function v(o){const i=require$$6,d=i.parse(o);return d.protocol==="file:"||d.host?d:/^[a-z]:[/\\]/i.test(o)?i.parse(`file:///${o}`):(d.host||(d.protocol="file:"),d)}class P{constructor(i){this.source=i,this.url=v(i.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&i.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var i,d;return(d=(i=this._fullRequestReader)==null?void 0:i._loaded)!=null?d:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new x(this):new w(this),this._fullRequestReader}getRangeReader(i,d){if(d<=this._progressiveDataLength)return null;const C=this.isFsUrl?new c(this,i,d):new k(this,i,d);return this._rangeRequestReaders.push(C),C}cancelAllRequests(i){var d;(d=this._fullRequestReader)==null||d.cancel(i);for(const C of this._rangeRequestReaders.slice(0))C.cancel(i)}}r.PDFNodeStream=P;class T{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null;const d=i.source;this._contentLength=d.length,this._loaded=0,this._filename=null,this._disableRange=d.disableRange||!1,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ee(this,null,function*(){var C;if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return i===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=i.length,(C=this.onProgress)==null||C.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(i).buffer,done:!1})})}cancel(i){if(!this._readableStream){this._error(i);return}this._readableStream.destroy(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",d=>{this._error(d)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m{constructor(i){this._url=i.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const d=i.source;this._isStreamingSupported=!d.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return ee(this,null,function*(){var C;if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const i=this._readableStream.read();return i===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=i.length,(C=this.onProgress)==null||C.call(this,{loaded:this._loaded}),{value:new Uint8Array(i).buffer,done:!1})})}cancel(i){if(!this._readableStream){this._error(i);return}this._readableStream.destroy(i)}_error(i){this._storedError=i,this._readCapability.resolve()}_setReadableStream(i){this._readableStream=i,i.on("readable",()=>{this._readCapability.resolve()}),i.on("end",()=>{i.destroy(),this._done=!0,this._readCapability.resolve()}),i.on("error",d=>{this._error(d)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(o,i){return{protocol:o.protocol,auth:o.auth,host:o.hostname,port:o.port,path:o.path,method:"GET",headers:i}}class w extends T{constructor(i){super(i);const d=C=>{if(C.statusCode===404){const A=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A,this._headersCapability.reject(A);return}this._headersCapability.resolve(),this._setReadableStream(C);const O=A=>this._readableStream.headers[A.toLowerCase()],{allowRangeRequests:M,suggestedLength:f}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:O,isHttp:i.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=f||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(O)};if(this._request=null,this._url.protocol==="http:"){const C=require$$6;this._request=C.request(p(this._url,i.httpHeaders),d)}else{const C=require$$6;this._request=C.request(p(this._url,i.httpHeaders),d)}this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class k extends m{constructor(i,d,C){super(i),this._httpHeaders={};for(const M in i.httpHeaders){const f=i.httpHeaders[M];f!==void 0&&(this._httpHeaders[M]=f)}this._httpHeaders.Range=`bytes=${d}-${C-1}`;const O=M=>{if(M.statusCode===404){const f=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f;return}this._setReadableStream(M)};if(this._request=null,this._url.protocol==="http:"){const M=require$$6;this._request=M.request(p(this._url,this._httpHeaders),O)}else{const M=require$$6;this._request=M.request(p(this._url,this._httpHeaders),O)}this._request.on("error",M=>{this._storedError=M}),this._request.end()}}class x extends T{constructor(i){super(i);let d=decodeURIComponent(this._url.path);l.test(this._url.href)&&(d=d.replace(/^\//,""));const C=require$$6;C.lstat(d,(O,M)=>{if(O){O.code==="ENOENT"&&(O=new e.MissingPDFException(`Missing PDF "${d}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=M.size,this._setReadableStream(C.createReadStream(d)),this._headersCapability.resolve()})}}class c extends m{constructor(i,d,C){super(i);let O=decodeURIComponent(this._url.path);l.test(this._url.href)&&(O=O.replace(/^\//,""));const M=require$$6;this._setReadableStream(M.createReadStream(O,{start:d,end:C-1}))}}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0,t(84),t(86),t(87),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2),t(89),t(187);var e=t(168),n=t(1);const l={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},v="http://www.w3.org/XML/1998/namespace",P="http://www.w3.org/1999/xlink",T=["butt","round","square"],m=["miter","round","bevel"],p=function(M){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob!="undefined"&&!A)return URL.createObjectURL(new Blob([M],{type:f}));const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F=`data:${f};base64,`;for(let S=0,N=M.length;S<N;S+=3){const D=M[S]&255,G=M[S+1]&255,K=M[S+2]&255,U=D>>2,_=(D&3)<<4|G>>4,et=S+1<N?(G&15)<<2|K>>6:64,rt=S+2<N?K&63:64;F+=L[U]+L[_]+L[et]+L[rt]}return F},w=function(){const M=new Uint8Array([137,80,78,71,13,10,26,10]),f=12,A=new Int32Array(256);for(let K=0;K<256;K++){let U=K;for(let _=0;_<8;_++)U=U&1?3988292384^U>>1&2147483647:U>>1&2147483647;A[K]=U}function L(K,U,_){let et=-1;for(let rt=U;rt<_;rt++){const Y=(et^K[rt])&255,st=A[Y];et=et>>>8^st}return et^-1}function F(K,U,_,et){let rt=et;const Y=U.length;_[rt]=Y>>24&255,_[rt+1]=Y>>16&255,_[rt+2]=Y>>8&255,_[rt+3]=Y&255,rt+=4,_[rt]=K.charCodeAt(0)&255,_[rt+1]=K.charCodeAt(1)&255,_[rt+2]=K.charCodeAt(2)&255,_[rt+3]=K.charCodeAt(3)&255,rt+=4,_.set(U,rt),rt+=U.length;const st=L(_,et+4,rt);_[rt]=st>>24&255,_[rt+1]=st>>16&255,_[rt+2]=st>>8&255,_[rt+3]=st&255}function S(K,U,_){let et=1,rt=0;for(let Y=U;Y<_;++Y)et=(et+(K[Y]&255))%65521,rt=(rt+et)%65521;return rt<<16|et}function N(K){if(!n.isNodeJS)return D(K);try{const U=parseInt(process.versions.node)>=8?K:Buffer.from(K),_=require$$6.deflateSync(U,{level:9});return _ instanceof Uint8Array?_:new Uint8Array(_)}catch(U){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+U)}return D(K)}function D(K){let U=K.length;const _=65535,et=Math.ceil(U/_),rt=new Uint8Array(2+U+et*5+4);let Y=0;rt[Y++]=120,rt[Y++]=156;let st=0;for(;U>_;)rt[Y++]=0,rt[Y++]=255,rt[Y++]=255,rt[Y++]=0,rt[Y++]=0,rt.set(K.subarray(st,st+_),Y),Y+=_,st+=_,U-=_;rt[Y++]=1,rt[Y++]=U&255,rt[Y++]=U>>8&255,rt[Y++]=~U&65535&255,rt[Y++]=(~U&65535)>>8&255,rt.set(K.subarray(st),Y),Y+=K.length-st;const gt=S(K,0,K.length);return rt[Y++]=gt>>24&255,rt[Y++]=gt>>16&255,rt[Y++]=gt>>8&255,rt[Y++]=gt&255,rt}function G(K,U,_,et){const rt=K.width,Y=K.height;let st,gt,At;const wt=K.data;switch(U){case n.ImageKind.GRAYSCALE_1BPP:gt=0,st=1,At=rt+7>>3;break;case n.ImageKind.RGB_24BPP:gt=2,st=8,At=rt*3;break;case n.ImageKind.RGBA_32BPP:gt=6,st=8,At=rt*4;break;default:throw new Error("invalid format")}const W=new Uint8Array((1+At)*Y);let u=0,y=0;for(let H=0;H<Y;++H)W[u++]=0,W.set(wt.subarray(y,y+At),u),y+=At,u+=At;if(U===n.ImageKind.GRAYSCALE_1BPP&&et){u=0;for(let H=0;H<Y;H++){u++;for(let tt=0;tt<At;tt++)W[u++]^=255}}const a=new Uint8Array([rt>>24&255,rt>>16&255,rt>>8&255,rt&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,st,gt,0,0,0]),b=N(W),E=M.length+f*3+a.length+b.length,I=new Uint8Array(E);let R=0;return I.set(M,R),R+=M.length,F("IHDR",a,I,R),R+=f+a.length,F("IDATA",b,I,R),R+=f+b.length,F("IEND",new Uint8Array(0),I,R),p(I,"image/png",_)}return function(U,_,et){const rt=U.kind===void 0?n.ImageKind.GRAYSCALE_1BPP:U.kind;return G(U,rt,_,et)}}();class k{constructor(){this.fontSizeScale=1,this.fontWeight=l.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(f,A){this.x=f,this.y=A}}function x(M){let f=[];const A=[];for(const L of M){if(L.fn==="save"){f.push({fnId:92,fn:"group",items:[]}),A.push(f),f=f.at(-1).items;continue}L.fn==="restore"?f=A.pop():f.push(L)}return f}function c(M){if(Number.isInteger(M))return M.toString();const f=M.toFixed(10);let A=f.length-1;if(f[A]!=="0")return f;do A--;while(f[A]==="0");return f.substring(0,f[A]==="."?A:A+1)}function o(M){if(M[4]===0&&M[5]===0){if(M[1]===0&&M[2]===0)return M[0]===1&&M[3]===1?"":`scale(${c(M[0])} ${c(M[3])})`;if(M[0]===M[3]&&M[1]===-M[2]){const f=Math.acos(M[0])*180/Math.PI;return`rotate(${c(f)})`}}else if(M[0]===1&&M[1]===0&&M[2]===0&&M[3]===1)return`translate(${c(M[4])} ${c(M[5])})`;return`matrix(${c(M[0])} ${c(M[1])} ${c(M[2])} ${c(M[3])} ${c(M[4])} ${c(M[5])})`}let i=0,d=0,C=0;class O{constructor(f,A){let L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new k,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=f,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!L,this._operatorIdMapping=[];for(const F in n.OPS)this._operatorIdMapping[n.OPS[F]]=F}getObject(f){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof f=="string"?f.startsWith("g_")?this.commonObjs.get(f):this.objs.get(f):A}save(){this.transformStack.push(this.transformMatrix);const f=this.current;this.extraStack.push(f),this.current=f.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(f){this.save(),this.executeOpTree(f),this.restore()}loadDependencies(f){const A=f.fnArray,L=f.argsArray;for(let F=0,S=A.length;F<S;F++)if(A[F]===n.OPS.dependency)for(const N of L[F]){const D=N.startsWith("g_")?this.commonObjs:this.objs,G=new Promise(K=>{D.get(N,K)});this.current.dependencies.push(G)}return Promise.all(this.current.dependencies)}transform(f,A,L,F,S,N){const D=[f,A,L,F,S,N];this.transformMatrix=n.Util.transform(this.transformMatrix,D),this.tgrp=null}getSVG(f,A){this.viewport=A;const L=this._initialize(A);return this.loadDependencies(f).then(()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(f)),L))}convertOpList(f){const A=this._operatorIdMapping,L=f.argsArray,F=f.fnArray,S=[];for(let N=0,D=F.length;N<D;N++){const G=F[N];S.push({fnId:G,fn:A[G],args:L[N]})}return x(S)}executeOpTree(f){for(const A of f){const L=A.fn,F=A.fnId,S=A.args;switch(F|0){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(S);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case n.OPS.setFont:this.setFont(S);break;case n.OPS.showText:this.showText(S[0]);break;case n.OPS.showSpacedText:this.showText(S[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(S[0],S[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case n.OPS.setHScale:this.setHScale(S[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case n.OPS.setTextRise:this.setTextRise(S[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case n.OPS.setLineWidth:this.setLineWidth(S[0]);break;case n.OPS.setLineJoin:this.setLineJoin(S[0]);break;case n.OPS.setLineCap:this.setLineCap(S[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case n.OPS.setFillColorN:this.setFillColorN(S);break;case n.OPS.shadingFill:this.shadingFill(S[0]);break;case n.OPS.setDash:this.setDash(S[0],S[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case n.OPS.setFlatness:this.setFlatness(S[0]);break;case n.OPS.setGState:this.setGState(S[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case n.OPS.constructPath:this.constructPath(S[0],S[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,n.warn)(`Unimplemented operator ${L}`);break}}}setWordSpacing(f){this.current.wordSpacing=f}setCharSpacing(f){this.current.charSpacing=f}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(f,A,L,F,S,N){const D=this.current;D.textMatrix=D.lineMatrix=[f,A,L,F,S,N],D.textMatrixScale=Math.hypot(f,A),D.x=D.lineX=0,D.y=D.lineY=0,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${c(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",c(-D.y)),D.txtElement=this.svgFactory.createElement("svg:text"),D.txtElement.append(D.tspan)}beginText(){const f=this.current;f.x=f.lineX=0,f.y=f.lineY=0,f.textMatrix=n.IDENTITY_MATRIX,f.lineMatrix=n.IDENTITY_MATRIX,f.textMatrixScale=1,f.tspan=this.svgFactory.createElement("svg:tspan"),f.txtElement=this.svgFactory.createElement("svg:text"),f.txtgrp=this.svgFactory.createElement("svg:g"),f.xcoords=[],f.ycoords=[]}moveText(f,A){const L=this.current;L.x=L.lineX+=f,L.y=L.lineY+=A,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${c(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",c(-L.y))}showText(f){const A=this.current,L=A.font,F=A.fontSize;if(F===0)return;const S=A.fontSizeScale,N=A.charSpacing,D=A.wordSpacing,G=A.fontDirection,K=A.textHScale*G,U=L.vertical,_=U?1:-1,et=L.defaultVMetrics,rt=F*A.fontMatrix[0];let Y=0;for(const At of f){if(At===null){Y+=G*D;continue}else if(typeof At=="number"){Y+=_*At*F/1e3;continue}const wt=(At.isSpace?D:0)+N,W=At.fontChar;let u,y,a=At.width;if(U){let E;const I=At.vmetric||et;E=At.vmetric?I[1]:a*.5,E=-E*rt;const R=I[2]*rt;a=I?-I[0]:a,u=E/S,y=(Y+R)/S}else u=Y/S,y=0;(At.isInFont||L.missingFile)&&(A.xcoords.push(A.x+u),U&&A.ycoords.push(-A.y+y),A.tspan.textContent+=W);const b=U?a*rt-wt*G:a*rt+wt*G;Y+=b}A.tspan.setAttributeNS(null,"x",A.xcoords.map(c).join(" ")),U?A.tspan.setAttributeNS(null,"y",A.ycoords.map(c).join(" ")):A.tspan.setAttributeNS(null,"y",c(-A.y)),U?A.y-=Y:A.x+=Y*K,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${c(A.fontSize)}px`),A.fontStyle!==l.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==l.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const st=A.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(st===n.TextRenderingMode.FILL||st===n.TextRenderingMode.FILL_STROKE?(A.fillColor!==l.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),st===n.TextRenderingMode.STROKE||st===n.TextRenderingMode.FILL_STROKE){const At=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,At)}let gt=A.textMatrix;A.textRise!==0&&(gt=gt.slice(),gt[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${o(gt)} scale(${c(K)}, -1)`),A.txtElement.setAttributeNS(v,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(f,A){this.setLeading(-A),this.moveText(f,A)}addFontStyle(f){if(!f.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=p(f.data,f.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${f.loadedName}"; src: url(${A}); }
`}setFont(f){const A=this.current,L=this.commonObjs.get(f[0]);let F=f[1];A.font=L,this.embedFonts&&!L.missingFile&&!this.embeddedFonts[L.loadedName]&&(this.addFontStyle(L),this.embeddedFonts[L.loadedName]=L),A.fontMatrix=L.fontMatrix||n.FONT_IDENTITY_MATRIX;let S="normal";L.black?S="900":L.bold&&(S="bold");const N=L.italic?"italic":"normal";F<0?(F=-F,A.fontDirection=-1):A.fontDirection=1,A.fontSize=F,A.fontFamily=L.loadedName,A.fontWeight=S,A.fontStyle=N,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",c(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const f=this.current;f.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=f.txtElement)!=null&&A.hasChildNodes())&&(f.element=f.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(f){f>0&&(this.current.lineWidth=f)}setLineCap(f){this.current.lineCap=T[f]}setLineJoin(f){this.current.lineJoin=m[f]}setMiterLimit(f){this.current.miterLimit=f}setStrokeAlpha(f){this.current.strokeAlpha=f}setStrokeRGBColor(f,A,L){this.current.strokeColor=n.Util.makeHexColor(f,A,L)}setFillAlpha(f){this.current.fillAlpha=f}setFillRGBColor(f,A,L){this.current.fillColor=n.Util.makeHexColor(f,A,L),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(f){this.current.strokeColor=this._makeColorN_Pattern(f)}setFillColorN(f){this.current.fillColor=this._makeColorN_Pattern(f)}shadingFill(f){const{width:A,height:L}=this.viewport,F=n.Util.inverseTransform(this.transformMatrix),[S,N,D,G]=n.Util.getAxialAlignedBoundingBox([0,0,A,L],F),K=this.svgFactory.createElement("svg:rect");K.setAttributeNS(null,"x",S),K.setAttributeNS(null,"y",N),K.setAttributeNS(null,"width",D-S),K.setAttributeNS(null,"height",G-N),K.setAttributeNS(null,"fill",this._makeShadingPattern(f)),this.current.fillAlpha<1&&K.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(K)}_makeColorN_Pattern(f){return f[0]==="TilingPattern"?this._makeTilingPattern(f):this._makeShadingPattern(f)}_makeTilingPattern(f){const A=f[1],L=f[2],F=f[3]||n.IDENTITY_MATRIX,[S,N,D,G]=f[4],K=f[5],U=f[6],_=f[7],et=`shading${C++}`,[rt,Y,st,gt]=n.Util.normalizeRect([...n.Util.applyTransform([S,N],F),...n.Util.applyTransform([D,G],F)]),[At,wt]=n.Util.singularValueDecompose2dScale(F),W=K*At,u=U*wt,y=this.svgFactory.createElement("svg:pattern");y.setAttributeNS(null,"id",et),y.setAttributeNS(null,"patternUnits","userSpaceOnUse"),y.setAttributeNS(null,"width",W),y.setAttributeNS(null,"height",u),y.setAttributeNS(null,"x",`${rt}`),y.setAttributeNS(null,"y",`${Y}`);const a=this.svg,b=this.transformMatrix,E=this.current.fillColor,I=this.current.strokeColor,R=this.svgFactory.create(st-rt,gt-Y);if(this.svg=R,this.transformMatrix=F,_===2){const H=n.Util.makeHexColor(...A);this.current.fillColor=H,this.current.strokeColor=H}return this.executeOpTree(this.convertOpList(L)),this.svg=a,this.transformMatrix=b,this.current.fillColor=E,this.current.strokeColor=I,y.append(R.childNodes[0]),this.defs.append(y),`url(#${et})`}_makeShadingPattern(f){switch(typeof f=="string"&&(f=this.objs.get(f)),f[0]){case"RadialAxial":const A=`shading${C++}`,L=f[3];let F;switch(f[1]){case"axial":const S=f[4],N=f[5];F=this.svgFactory.createElement("svg:linearGradient"),F.setAttributeNS(null,"id",A),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"x1",S[0]),F.setAttributeNS(null,"y1",S[1]),F.setAttributeNS(null,"x2",N[0]),F.setAttributeNS(null,"y2",N[1]);break;case"radial":const D=f[4],G=f[5],K=f[6],U=f[7];F=this.svgFactory.createElement("svg:radialGradient"),F.setAttributeNS(null,"id",A),F.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),F.setAttributeNS(null,"cx",G[0]),F.setAttributeNS(null,"cy",G[1]),F.setAttributeNS(null,"r",U),F.setAttributeNS(null,"fx",D[0]),F.setAttributeNS(null,"fy",D[1]),F.setAttributeNS(null,"fr",K);break;default:throw new Error(`Unknown RadialAxial type: ${f[1]}`)}for(const S of L){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",S[0]),N.setAttributeNS(null,"stop-color",S[1]),F.append(N)}return this.defs.append(F),`url(#${A})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${f[0]}`)}}setDash(f,A){this.current.dashArray=f,this.current.dashPhase=A}constructPath(f,A){const L=this.current;let F=L.x,S=L.y,N=[],D=0;for(const G of f)switch(G|0){case n.OPS.rectangle:F=A[D++],S=A[D++];const K=A[D++],U=A[D++],_=F+K,et=S+U;N.push("M",c(F),c(S),"L",c(_),c(S),"L",c(_),c(et),"L",c(F),c(et),"Z");break;case n.OPS.moveTo:F=A[D++],S=A[D++],N.push("M",c(F),c(S));break;case n.OPS.lineTo:F=A[D++],S=A[D++],N.push("L",c(F),c(S));break;case n.OPS.curveTo:F=A[D+4],S=A[D+5],N.push("C",c(A[D]),c(A[D+1]),c(A[D+2]),c(A[D+3]),c(F),c(S)),D+=6;break;case n.OPS.curveTo2:N.push("C",c(F),c(S),c(A[D]),c(A[D+1]),c(A[D+2]),c(A[D+3])),F=A[D+2],S=A[D+3],D+=4;break;case n.OPS.curveTo3:F=A[D+2],S=A[D+3],N.push("C",c(A[D]),c(A[D+1]),c(F),c(S),c(F),c(S)),D+=4;break;case n.OPS.closePath:N.push("Z");break}N=N.join(" "),L.path&&f.length>0&&f[0]!==n.OPS.rectangle&&f[0]!==n.OPS.moveTo?N=L.path.getAttributeNS(null,"d")+N:(L.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(L.path)),L.path.setAttributeNS(null,"d",N),L.path.setAttributeNS(null,"fill","none"),L.element=L.path,L.setCurrentPoint(F,S)}endPath(){const f=this.current;if(f.path=null,!this.pendingClip)return;if(!f.element){this.pendingClip=null;return}const A=`clippath${i++}`,L=this.svgFactory.createElement("svg:clipPath");L.setAttributeNS(null,"id",A),L.setAttributeNS(null,"transform",o(this.transformMatrix));const F=f.element.cloneNode(!0);if(this.pendingClip==="evenodd"?F.setAttributeNS(null,"clip-rule","evenodd"):F.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,L.append(F),this.defs.append(L),f.activeClipUrl){f.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;L.setAttributeNS(null,"clip-path",f.activeClipUrl)}f.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(f){this.pendingClip=f}closePath(){const f=this.current;if(f.path){const A=`${f.path.getAttributeNS(null,"d")}Z`;f.path.setAttributeNS(null,"d",A)}}setLeading(f){this.current.leading=-f}setTextRise(f){this.current.textRise=f}setTextRenderingMode(f){this.current.textRenderingMode=f}setHScale(f){this.current.textHScale=f/100}setRenderingIntent(f){}setFlatness(f){}setGState(f){for(const[A,L]of f)switch(A){case"LW":this.setLineWidth(L);break;case"LC":this.setLineCap(L);break;case"LJ":this.setLineJoin(L);break;case"ML":this.setMiterLimit(L);break;case"D":this.setDash(L[0],L[1]);break;case"RI":this.setRenderingIntent(L);break;case"FL":this.setFlatness(L);break;case"Font":this.setFont(L);break;case"CA":this.setStrokeAlpha(L);break;case"ca":this.setFillAlpha(L);break;default:(0,n.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const f=this.current;f.element&&(f.element.setAttributeNS(null,"fill",f.fillColor),f.element.setAttributeNS(null,"fill-opacity",f.fillAlpha),this.endPath())}stroke(){const f=this.current;f.element&&(this._setStrokeAttributes(f.element),f.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(f){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const L=this.current;let F=L.dashArray;A!==1&&F.length>0&&(F=F.map(function(S){return A*S})),f.setAttributeNS(null,"stroke",L.strokeColor),f.setAttributeNS(null,"stroke-opacity",L.strokeAlpha),f.setAttributeNS(null,"stroke-miterlimit",c(L.miterLimit)),f.setAttributeNS(null,"stroke-linecap",L.lineCap),f.setAttributeNS(null,"stroke-linejoin",L.lineJoin),f.setAttributeNS(null,"stroke-width",c(A*L.lineWidth)+"px"),f.setAttributeNS(null,"stroke-dasharray",F.map(c).join(" ")),f.setAttributeNS(null,"stroke-dashoffset",c(A*L.dashPhase)+"px")}eoFill(){var f;(f=this.current.element)==null||f.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var f;(f=this.current.element)==null||f.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x","0"),f.setAttributeNS(null,"y","0"),f.setAttributeNS(null,"width","1px"),f.setAttributeNS(null,"height","1px"),f.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(f)}paintImageXObject(f){const A=this.getObject(f);if(!A){(0,n.warn)(`Dependent image with object ID ${f} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(f,A){const L=f.width,F=f.height,S=w(f,this.forceDataSchema,!!A),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",c(L)),N.setAttributeNS(null,"height",c(F)),this.current.element=N,this.clip("nonzero");const D=this.svgFactory.createElement("svg:image");D.setAttributeNS(P,"xlink:href",S),D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y",c(-F)),D.setAttributeNS(null,"width",c(L)+"px"),D.setAttributeNS(null,"height",c(F)+"px"),D.setAttributeNS(null,"transform",`scale(${c(1/L)} ${c(-1/F)})`),A?A.append(D):this._ensureTransformGroup().append(D)}paintImageMaskXObject(f){const A=this.getObject(f.data,f);if(A.bitmap){(0,n.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const L=this.current,F=A.width,S=A.height,N=L.fillColor;L.maskId=`mask${d++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",L.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",c(F)),G.setAttributeNS(null,"height",c(S)),G.setAttributeNS(null,"fill",N),G.setAttributeNS(null,"mask",`url(#${L.maskId})`),this.defs.append(D),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(A,D)}paintFormXObjectBegin(f,A){if(Array.isArray(f)&&f.length===6&&this.transform(f[0],f[1],f[2],f[3],f[4],f[5]),A){const L=A[2]-A[0],F=A[3]-A[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",A[0]),S.setAttributeNS(null,"y",A[1]),S.setAttributeNS(null,"width",c(L)),S.setAttributeNS(null,"height",c(F)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(f){const A=this.svgFactory.create(f.width,f.height),L=this.svgFactory.createElement("svg:defs");A.append(L),this.defs=L;const F=this.svgFactory.createElement("svg:g");return F.setAttributeNS(null,"transform",o(f.transform)),A.append(F),this.svg=F,A}_ensureClipGroup(){if(!this.current.clipGroup){const f=this.svgFactory.createElement("svg:g");f.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(f),this.current.clipGroup=f}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",o(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}r.SVGGraphics=O},(g,r,t)=>{var e=t(3),n=t(188),l=t(193);e({target:"Array",proto:!0},{group:function(P){var T=arguments.length>1?arguments[1]:void 0;return n(this,P,T)}}),l("group")},(g,r,t)=>{var e=t(99),n=t(14),l=t(13),v=t(40),P=t(18),T=t(64),m=t(189),p=t(108),w=Array,k=n([].push);g.exports=function(x,c,o,i){for(var d=v(x),C=l(d),O=e(c,o),M=m(null),f=T(C),A=0,L,F,S;f>A;A++)S=C[A],F=P(O(S,A,d)),F in M?k(M[F],S):M[F]=[S];if(i&&(L=i(d),L!==w))for(F in M)M[F]=p(L,M[F]);return M}},(g,r,t)=>{var e=t(47),n=t(190),l=t(66),v=t(55),P=t(192),T=t(43),m=t(54),p=">",w="<",k="prototype",x="script",c=m("IE_PROTO"),o=function(){},i=function(f){return w+x+p+f+w+"/"+x+p},d=function(f){f.write(i("")),f.close();var A=f.parentWindow.Object;return f=null,A},C=function(){var f=T("iframe"),A="java"+x+":",L;return f.style.display="none",P.appendChild(f),f.src=String(A),L=f.contentWindow.document,L.open(),L.write(i("document.F=Object")),L.close(),L.F},O,M=function(){try{O=new ActiveXObject("htmlfile")}catch(A){}M=typeof document!="undefined"?document.domain&&O?d(O):C():d(O);for(var f=l.length;f--;)delete M[k][l[f]];return M()};v[c]=!0,g.exports=Object.create||function(A,L){var F;return A!==null?(o[k]=e(A),F=new o,o[k]=null,F[c]=A):F=M(),L===void 0?F:n.f(F,L)}},(g,r,t)=>{var e=t(6),n=t(46),l=t(45),v=t(47),P=t(12),T=t(191);r.f=e&&!n?Object.defineProperties:function(p,w){v(p);for(var k=P(w),x=T(w),c=x.length,o=0,i;c>o;)l.f(p,i=x[o++],k[i]);return p}},(g,r,t)=>{var e=t(59),n=t(66);g.exports=Object.keys||function(v){return e(v,n)}},(g,r,t)=>{var e=t(24);g.exports=e("document","documentElement")},(g,r,t)=>{var e=t(34),n=t(189),l=t(45).f,v=e("unscopables"),P=Array.prototype;P[v]===void 0&&l(P,v,{configurable:!0,value:n(null)}),g.exports=function(T){P[v][T]=!0}},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0,t(89);class e{static textContent(l){const v=[],P={items:v,styles:Object.create(null)};function T(m){var k;if(!m)return;let p=null;const w=m.name;if(w==="#text")p=m.value;else if(e.shouldBuildText(w))(k=m==null?void 0:m.attributes)!=null&&k.textContent?p=m.attributes.textContent:m.value&&(p=m.value);else return;if(p!==null&&v.push({str:p}),!!m.children)for(const x of m.children)T(x)}return T(l),P}static shouldBuildText(l){return!(l==="textarea"||l==="input"||l==="option"||l==="select")}}r.XfaText=e},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=o,r.updateTextLayer=i,t(89),t(2);var e=t(1),n=t(168);const l=1e5,v=30,P=.8,T=new Map;function m(d,C){let O;if(C&&e.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(d,d).getContext("2d",{alpha:!1});else{const M=document.createElement("canvas");M.width=M.height=d,O=M.getContext("2d",{alpha:!1})}return O}function p(d,C){const O=T.get(d);if(O)return O;const M=m(v,C);M.font=`${v}px ${d}`;const f=M.measureText("");let A=f.fontBoundingBoxAscent,L=Math.abs(f.fontBoundingBoxDescent);if(A){const S=A/(A+L);return T.set(d,S),M.canvas.width=M.canvas.height=0,S}M.strokeStyle="red",M.clearRect(0,0,v,v),M.strokeText("g",0,0);let F=M.getImageData(0,0,v,v).data;L=0;for(let S=F.length-1-3;S>=0;S-=4)if(F[S]>0){L=Math.ceil(S/4/v);break}M.clearRect(0,0,v,v),M.strokeText("A",0,v),F=M.getImageData(0,0,v,v).data,A=0;for(let S=0,N=F.length;S<N;S+=4)if(F[S]>0){A=v-Math.floor(S/4/v);break}if(M.canvas.width=M.canvas.height=0,A){const S=A/(A+L);return T.set(d,S),S}return T.set(d,P),P}function w(d,C,O){const M=document.createElement("span"),f={angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,fontSize:0};d._textDivs.push(M);const A=e.Util.transform(d._transform,C.transform);let L=Math.atan2(A[1],A[0]);const F=O[C.fontName];F.vertical&&(L+=Math.PI/2);const S=Math.hypot(A[2],A[3]),N=S*p(F.fontFamily,d._isOffscreenCanvasSupported);let D,G;L===0?(D=A[4],G=A[5]-N):(D=A[4]+N*Math.sin(L),G=A[5]-N*Math.cos(L));const K="calc(var(--scale-factor)*",U=M.style;d._container===d._rootContainer?(U.left=`${(100*D/d._pageWidth).toFixed(2)}%`,U.top=`${(100*G/d._pageHeight).toFixed(2)}%`):(U.left=`${K}${D.toFixed(2)}px)`,U.top=`${K}${G.toFixed(2)}px)`),U.fontSize=`${K}${S.toFixed(2)}px)`,U.fontFamily=F.fontFamily,f.fontSize=S,M.setAttribute("role","presentation"),M.textContent=C.str,M.dir=C.dir,d._fontInspectorEnabled&&(M.dataset.fontName=C.fontName),L!==0&&(f.angle=L*(180/Math.PI));let _=!1;if(C.str.length>1)_=!0;else if(C.str!==" "&&C.transform[0]!==C.transform[3]){const et=Math.abs(C.transform[0]),rt=Math.abs(C.transform[3]);et!==rt&&Math.max(et,rt)/Math.min(et,rt)>1.5&&(_=!0)}_&&(f.canvasWidth=F.vertical?C.height:C.width),d._textDivProperties.set(M,f),d._isReadableStream&&d._layoutText(M)}function k(d){const{div:C,scale:O,properties:M,ctx:f,prevFontSize:A,prevFontFamily:L}=d,{style:F}=C;let S="";if(M.canvasWidth!==0&&M.hasText){const{fontFamily:N}=F,{canvasWidth:D,fontSize:G}=M;(A!==G||L!==N)&&(f.font=`${G*O}px ${N}`,d.prevFontSize=G,d.prevFontFamily=N);const{width:K}=f.measureText(C.textContent);K>0&&(S=`scaleX(${D*O/K})`)}M.angle!==0&&(S=`rotate(${M.angle}deg) ${S}`),S.length>0&&(F.transform=S)}function x(d){if(d._canceled)return;const C=d._textDivs,O=d._capability;if(C.length>l){O.resolve();return}if(!d._isReadableStream)for(const f of C)d._layoutText(f);O.resolve()}class c{constructor(C){var U;let{textContentSource:O,container:M,viewport:f,textDivs:A,textDivProperties:L,textContentItemsStr:F,isOffscreenCanvasSupported:S}=C;this._textContentSource=O,this._isReadableStream=O instanceof ReadableStream,this._container=this._rootContainer=M,this._textDivs=A||[],this._textContentItemsStr=F||[],this._isOffscreenCanvasSupported=S,this._fontInspectorEnabled=!!((U=globalThis.FontInspector)!=null&&U.enabled),this._reader=null,this._textDivProperties=L||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:f.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:m(0,S)};const{pageWidth:N,pageHeight:D,pageX:G,pageY:K}=f.rawDims;this._transform=[1,0,0,-1,-G,K+D],this._pageWidth=N,this._pageHeight=D,(0,n.setLayerDimensions)(M,f),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(C,O){for(const M of C){if(M.str===void 0){if(M.type==="beginMarkedContentProps"||M.type==="beginMarkedContent"){const f=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),M.id!==null&&this._container.setAttribute("id",`${M.id}`),f.append(this._container)}else M.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(M.str),w(this,M,O)}}_layoutText(C){const O=this._layoutTextParams.properties=this._textDivProperties.get(C);if(this._layoutTextParams.div=C,k(this._layoutTextParams),O.hasText&&this._container.append(C),O.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),this._container.append(M)}}_render(){const C=new e.PromiseCapability;let O=Object.create(null);if(this._isReadableStream){const M=()=>{this._reader.read().then(f=>{let{value:A,done:L}=f;if(L){C.resolve();return}Object.assign(O,A.styles),this._processItems(A.items,O),M()},C.reject)};this._reader=this._textContentSource.getReader(),M()}else if(this._textContentSource){const{items:M,styles:f}=this._textContentSource;this._processItems(M,f),C.resolve()}else throw new Error('No "textContentSource" parameter specified.');C.promise.then(()=>{O=null,x(this)},this._capability.reject)}}r.TextLayerRenderTask=c;function o(d){!d.textContentSource&&(d.textContent||d.textContentStream)&&((0,n.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),d.textContentSource=d.textContent||d.textContentStream);const{container:C,viewport:O}=d,M=getComputedStyle(C),f=M.getPropertyValue("visibility"),A=parseFloat(M.getPropertyValue("--scale-factor"));f==="visible"&&(!A||Math.abs(A-O.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const L=new c(d);return L._render(),L}function i(d){let{container:C,viewport:O,textDivs:M,textDivProperties:f,isOffscreenCanvasSupported:A,mustRotate:L=!0,mustRescale:F=!0}=d;if(L&&(0,n.setLayerDimensions)(C,{rotation:O.rotation}),F){const S=m(0,A),D={prevFontSize:null,prevFontFamily:null,div:null,scale:O.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:S};for(const G of M)D.properties=f.get(G),D.div=G,k(D)}}},(g,r,t)=>{var p,w,k,x,c,o,i,d,C,O,M,on,A,Ie,F,ln,N,cn;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0,t(125),t(136),t(138),t(141),t(143),t(145),t(147);var e=t(1),n=t(164),l=t(197),v=t(202),P=t(168),T=t(203);const G=class G{constructor(U){X(this,M);X(this,A);X(this,F);X(this,N);X(this,p,void 0);X(this,w,!1);X(this,k,null);X(this,x,this.pointerup.bind(this));X(this,c,this.pointerdown.bind(this));X(this,o,new Map);X(this,i,!1);X(this,d,!1);X(this,C,!1);X(this,O,void 0);let{uiManager:_,pageIndex:et,div:rt,accessibilityManager:Y,annotationLayer:st,viewport:gt,l10n:At}=U;const wt=[l.FreeTextEditor,v.InkEditor,T.StampEditor];if(!G._initialized){G._initialized=!0;for(const W of wt)W.initialize(At)}_.registerEditorTypes(wt),at(this,O,_),this.pageIndex=et,this.div=rt,at(this,p,Y),at(this,k,st),this.viewport=gt,s(this,O).addLayer(this)}get isEmpty(){return s(this,o).size===0}updateToolbar(U){s(this,O).updateToolbar(U)}updateMode(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s(this,O).getMode();j(this,N,cn).call(this),U===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),U!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",U===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",U===e.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",U===e.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(U){if(!U&&s(this,O).getMode()!==e.AnnotationEditorType.INK)return;if(!U){for(const et of s(this,o).values())if(et.isEmpty()){et.setInBackground();return}}j(this,A,Ie).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(U){s(this,O).setEditingState(U)}addCommands(U){s(this,O).addCommands(U)}enable(){this.div.style.pointerEvents="auto";const U=new Set;for(const et of s(this,o).values())et.enableEditing(),et.annotationElementId&&U.add(et.annotationElementId);if(!s(this,k))return;const _=s(this,k).getEditableAnnotations();for(const et of _){if(et.hide(),s(this,O).isDeletedAnnotationElement(et.data.id)||U.has(et.data.id))continue;const rt=this.deserialize(et);rt&&(this.addOrRebuild(rt),rt.enableEditing())}}disable(){var _;at(this,C,!0),this.div.style.pointerEvents="none";const U=new Set;for(const et of s(this,o).values()){if(et.disableEditing(),!et.annotationElementId||et.serialize()!==null){U.add(et.annotationElementId);continue}(_=this.getEditableAnnotation(et.annotationElementId))==null||_.show(),et.remove()}if(s(this,k)){const et=s(this,k).getEditableAnnotations();for(const rt of et){const{id:Y}=rt.data;U.has(Y)||s(this,O).isDeletedAnnotationElement(Y)||rt.show()}}j(this,N,cn).call(this),this.isEmpty&&(this.div.hidden=!0),at(this,C,!1)}getEditableAnnotation(U){var _;return((_=s(this,k))==null?void 0:_.getEditableAnnotation(U))||null}setActiveEditor(U){s(this,O).getActive()!==U&&s(this,O).setActiveEditor(U)}enableClick(){this.div.addEventListener("pointerdown",s(this,c)),this.div.addEventListener("pointerup",s(this,x))}disableClick(){this.div.removeEventListener("pointerdown",s(this,c)),this.div.removeEventListener("pointerup",s(this,x))}attach(U){s(this,o).set(U.id,U);const{annotationElementId:_}=U;_&&s(this,O).isDeletedAnnotationElement(_)&&s(this,O).removeDeletedAnnotationElement(U)}detach(U){var _;s(this,o).delete(U.id),(_=s(this,p))==null||_.removePointerInTextLayer(U.contentDiv),!s(this,C)&&U.annotationElementId&&s(this,O).addDeletedAnnotationElement(U)}remove(U){this.detach(U),s(this,O).removeEditor(U),U.div.contains(document.activeElement)&&setTimeout(()=>{s(this,O).focusMainContainer()},0),U.div.remove(),U.isAttachedToDOM=!1,s(this,d)||this.addInkEditorIfNeeded(!1)}changeParent(U){var _;U.parent!==this&&(U.annotationElementId&&(s(this,O).addDeletedAnnotationElement(U.annotationElementId),n.AnnotationEditor.deleteAnnotationElement(U),U.annotationElementId=null),this.attach(U),(_=U.parent)==null||_.detach(U),U.setParent(this),U.div&&U.isAttachedToDOM&&(U.div.remove(),this.div.append(U.div)))}add(U){if(this.changeParent(U),s(this,O).addEditor(U),this.attach(U),!U.isAttachedToDOM){const _=U.render();this.div.append(_),U.isAttachedToDOM=!0}U.fixAndSetPosition(),U.onceAdded(),s(this,O).addToAnnotationStorage(U)}moveEditorInDOM(U){var et;if(!U.isAttachedToDOM)return;const{activeElement:_}=document;U.div.contains(_)&&(U._focusEventsAllowed=!1,setTimeout(()=>{U.div.contains(document.activeElement)?U._focusEventsAllowed=!0:(U.div.addEventListener("focusin",()=>{U._focusEventsAllowed=!0},{once:!0}),_.focus())},0)),U._structTreeParentId=(et=s(this,p))==null?void 0:et.moveElementInDOM(this.div,U.div,U.contentDiv,!0)}addOrRebuild(U){U.needsToBeRebuilt()?U.rebuild():this.add(U)}addUndoableEditor(U){const _=()=>U._uiManager.rebuild(U),et=()=>{U.remove()};this.addCommands({cmd:_,undo:et,mustExec:!1})}getNextId(){return s(this,O).getId()}pasteEditor(U,_){s(this,O).updateToolbar(U),s(this,O).updateMode(U);const{offsetX:et,offsetY:rt}=j(this,F,ln).call(this),Y=this.getNextId(),st=j(this,M,on).call(this,oe({parent:this,id:Y,x:et,y:rt,uiManager:s(this,O),isCentered:!0},_));st&&this.add(st)}deserialize(U){var _;switch((_=U.annotationType)!=null?_:U.annotationEditorType){case e.AnnotationEditorType.FREETEXT:return l.FreeTextEditor.deserialize(U,this,s(this,O));case e.AnnotationEditorType.INK:return v.InkEditor.deserialize(U,this,s(this,O));case e.AnnotationEditorType.STAMP:return T.StampEditor.deserialize(U,this,s(this,O))}return null}addNewEditor(){j(this,A,Ie).call(this,j(this,F,ln).call(this),!0)}setSelected(U){s(this,O).setSelected(U)}toggleSelected(U){s(this,O).toggleSelected(U)}isSelected(U){return s(this,O).isSelected(U)}unselect(U){s(this,O).unselect(U)}pointerup(U){const{isMac:_}=e.FeatureTest.platform;if(!(U.button!==0||U.ctrlKey&&_)&&U.target===this.div&&s(this,i)){if(at(this,i,!1),!s(this,w)){at(this,w,!0);return}if(s(this,O).getMode()===e.AnnotationEditorType.STAMP){s(this,O).unselectAll();return}j(this,A,Ie).call(this,U,!1)}}pointerdown(U){if(s(this,i)){at(this,i,!1);return}const{isMac:_}=e.FeatureTest.platform;if(U.button!==0||U.ctrlKey&&_||U.target!==this.div)return;at(this,i,!0);const et=s(this,O).getActive();at(this,w,!et||et.isEmpty())}findNewParent(U,_,et){const rt=s(this,O).findParent(_,et);return rt===null||rt===this?!1:(rt.changeParent(U),!0)}destroy(){var U,_;((U=s(this,O).getActive())==null?void 0:U.parent)===this&&(s(this,O).commitOrRemove(),s(this,O).setActiveEditor(null));for(const et of s(this,o).values())(_=s(this,p))==null||_.removePointerInTextLayer(et.contentDiv),et.setParent(null),et.isAttachedToDOM=!1,et.div.remove();this.div=null,s(this,o).clear(),s(this,O).removeLayer(this)}render(U){let{viewport:_}=U;this.viewport=_,(0,P.setLayerDimensions)(this.div,_);for(const et of s(this,O).getEditors(this.pageIndex))this.add(et);this.updateMode()}update(U){let{viewport:_}=U;s(this,O).commitOrRemove(),this.viewport=_,(0,P.setLayerDimensions)(this.div,{rotation:_.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:U,pageHeight:_}=this.viewport.rawDims;return[U,_]}};p=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,c=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakMap,C=new WeakMap,O=new WeakMap,M=new WeakSet,on=function(U){switch(s(this,O).getMode()){case e.AnnotationEditorType.FREETEXT:return new l.FreeTextEditor(U);case e.AnnotationEditorType.INK:return new v.InkEditor(U);case e.AnnotationEditorType.STAMP:return new T.StampEditor(U)}return null},A=new WeakSet,Ie=function(U,_){const et=this.getNextId(),rt=j(this,M,on).call(this,{parent:this,id:et,x:U.offsetX,y:U.offsetY,uiManager:s(this,O),isCentered:_});return rt&&this.add(rt),rt},F=new WeakSet,ln=function(){const{x:U,y:_,width:et,height:rt}=this.div.getBoundingClientRect(),Y=Math.max(0,U),st=Math.max(0,_),gt=Math.min(window.innerWidth,U+et),At=Math.min(window.innerHeight,_+rt),wt=(Y+gt)/2-U,W=(st+At)/2-_,[u,y]=this.viewport.rotation%180===0?[wt,W]:[W,wt];return{offsetX:u,offsetY:y}},N=new WeakSet,cn=function(){at(this,d,!0);for(const U of s(this,o).values())U.isEmpty()&&U.remove();at(this,d,!1)},ne(G,"_initialized",!1);let m=G;r.AnnotationEditorLayer=m},(g,r,t)=>{var T,m,p,w,k,x,c,o,i,d,Bn,O,Un,f,Wn,L,xe,S,hn,D,Hn,K,un;Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0,t(89);var e=t(1),n=t(165),l=t(164),v=t(198);const _=class _ extends l.AnnotationEditor{constructor(Y){super(ue(oe({},Y),{name:"freeTextEditor"}));X(this,d);X(this,O);X(this,f);X(this,L);X(this,S);X(this,D);X(this,K);X(this,T,this.editorDivBlur.bind(this));X(this,m,this.editorDivFocus.bind(this));X(this,p,this.editorDivInput.bind(this));X(this,w,this.editorDivKeydown.bind(this));X(this,k,void 0);X(this,x,"");X(this,c,`${this.id}-editor`);X(this,o,void 0);X(this,i,null);at(this,k,Y.color||_._defaultColor||l.AnnotationEditor._defaultLineColor),at(this,o,Y.fontSize||_._defaultFontSize)}static get _keyboardManager(){const Y=_.prototype,st=wt=>wt.isEmpty(),gt=n.AnnotationEditorUIManager.TRANSLATE_SMALL,At=n.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new n.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Y.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Y.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Y._translateEmpty,{args:[-gt,0],checker:st}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Y._translateEmpty,{args:[-At,0],checker:st}],[["ArrowRight","mac+ArrowRight"],Y._translateEmpty,{args:[gt,0],checker:st}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Y._translateEmpty,{args:[At,0],checker:st}],[["ArrowUp","mac+ArrowUp"],Y._translateEmpty,{args:[0,-gt],checker:st}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Y._translateEmpty,{args:[0,-At],checker:st}],[["ArrowDown","mac+ArrowDown"],Y._translateEmpty,{args:[0,gt],checker:st}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Y._translateEmpty,{args:[0,At],checker:st}]]))}static initialize(Y){l.AnnotationEditor.initialize(Y,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const st=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(st.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Y,st){switch(Y){case e.AnnotationEditorParamsType.FREETEXT_SIZE:_._defaultFontSize=st;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:_._defaultColor=st;break}}updateParams(Y,st){switch(Y){case e.AnnotationEditorParamsType.FREETEXT_SIZE:j(this,d,Bn).call(this,st);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:j(this,O,Un).call(this,st);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,_._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,_._defaultColor||l.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,s(this,o)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,s(this,k)]]}_translateEmpty(Y,st){this._uiManager.translateSelectedEditors(Y,st,!0)}getInitialTranslation(){const Y=this.parentScale;return[-_._internalPadding*Y,-(_._internalPadding+s(this,o))*Y]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",s(this,w)),this.editorDiv.addEventListener("focus",s(this,m)),this.editorDiv.addEventListener("blur",s(this,T)),this.editorDiv.addEventListener("input",s(this,p)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",s(this,c)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",s(this,w)),this.editorDiv.removeEventListener("focus",s(this,m)),this.editorDiv.removeEventListener("blur",s(this,T)),this.editorDiv.removeEventListener("input",s(this,p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Y){this._focusEventsAllowed&&(super.focusin(Y),Y.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Y;if(this.width){j(this,K,un).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Y=this._initialOptions)!=null&&Y.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Y=s(this,x),st=at(this,x,j(this,f,Wn).call(this).trimEnd());if(Y===st)return;const gt=At=>{if(at(this,x,At),!At){this.remove();return}j(this,S,hn).call(this),this._uiManager.rebuild(this),j(this,L,xe).call(this)};this.addCommands({cmd:()=>{gt(st)},undo:()=>{gt(Y)},mustExec:!1}),j(this,L,xe).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Y){this.enterInEditMode()}keydown(Y){Y.target===this.div&&Y.key==="Enter"&&(this.enterInEditMode(),Y.preventDefault())}editorDivKeydown(Y){_._keyboardManager.exec(this,Y)}editorDivFocus(Y){this.isEditing=!0}editorDivBlur(Y){this.isEditing=!1}editorDivInput(Y){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Y,st;this.width&&(Y=this.x,st=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",s(this,c)),this.enableEditing(),l.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(At=>{var wt;return(wt=this.editorDiv)==null?void 0:wt.setAttribute("aria-label",At)}),l.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(At=>{var wt;return(wt=this.editorDiv)==null?void 0:wt.setAttribute("default-content",At)}),this.editorDiv.contentEditable=!0;const{style:gt}=this.editorDiv;if(gt.fontSize=`calc(${s(this,o)}px * var(--scale-factor))`,gt.color=s(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,n.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[At,wt]=this.parentDimensions;if(this.annotationElementId){const{position:W}=s(this,i);let[u,y]=this.getInitialTranslation();[u,y]=this.pageTranslationToScreen(u,y);const[a,b]=this.pageDimensions,[E,I]=this.pageTranslation;let R,H;switch(this.rotation){case 0:R=Y+(W[0]-E)/a,H=st+this.height-(W[1]-I)/b;break;case 90:R=Y+(W[0]-E)/a,H=st-(W[1]-I)/b,[u,y]=[y,-u];break;case 180:R=Y-this.width+(W[0]-E)/a,H=st-(W[1]-I)/b,[u,y]=[-u,-y];break;case 270:R=Y+(W[0]-E-this.height*b)/a,H=st+(W[1]-I-this.width*a)/b,[u,y]=[-y,u];break}this.setAt(R*At,H*wt,u,y)}else this.setAt(Y*At,st*wt,this.width*At,this.height*wt);j(this,S,hn).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Y,st,gt){let At=null;if(Y instanceof v.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:W,fontColor:u},rect:y,rotation:a,id:b},textContent:E,textPosition:I,parent:{page:{pageNumber:R}}}=Y;if(!E||E.length===0)return null;At=Y={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(u),fontSize:W,value:E.join(`
`),position:I,pageIndex:R-1,rect:y,rotation:a,id:b,deleted:!1}}const wt=super.deserialize(Y,st,gt);return at(wt,o,Y.fontSize),at(wt,k,e.Util.makeHexColor(...Y.color)),at(wt,x,Y.value),wt.annotationElementId=Y.id||null,at(wt,i,At),wt}serialize(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const st=_._internalPadding*this.parentScale,gt=this.getRect(st,st),At=l.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:s(this,k)),wt={annotationType:e.AnnotationEditorType.FREETEXT,color:At,fontSize:s(this,o),value:s(this,x),pageIndex:this.pageIndex,rect:gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Y?wt:this.annotationElementId&&!j(this,D,Hn).call(this,wt)?null:(wt.id=this.annotationElementId,wt)}};T=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,c=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakSet,Bn=function(Y){const st=At=>{this.editorDiv.style.fontSize=`calc(${At}px * var(--scale-factor))`,this.translate(0,-(At-s(this,o))*this.parentScale),at(this,o,At),j(this,L,xe).call(this)},gt=s(this,o);this.addCommands({cmd:()=>{st(Y)},undo:()=>{st(gt)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},O=new WeakSet,Un=function(Y){const st=s(this,k);this.addCommands({cmd:()=>{at(this,k,this.editorDiv.style.color=Y)},undo:()=>{at(this,k,this.editorDiv.style.color=st)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,Wn=function(){const Y=this.editorDiv.getElementsByTagName("div");if(Y.length===0)return this.editorDiv.innerText;const st=[];for(const gt of Y)st.push(gt.innerText.replace(/\r\n?|\n/,""));return st.join(`
`)},L=new WeakSet,xe=function(){const[Y,st]=this.parentDimensions;let gt;if(this.isAttachedToDOM)gt=this.div.getBoundingClientRect();else{const{currentLayer:At,div:wt}=this,W=wt.style.display;wt.style.display="hidden",At.div.append(this.div),gt=wt.getBoundingClientRect(),wt.remove(),wt.style.display=W}this.rotation%180===this.parentRotation%180?(this.width=gt.width/Y,this.height=gt.height/st):(this.width=gt.height/Y,this.height=gt.width/st),this.fixAndSetPosition()},S=new WeakSet,hn=function(){if(this.editorDiv.replaceChildren(),!!s(this,x))for(const Y of s(this,x).split(`
`)){const st=document.createElement("div");st.append(Y?document.createTextNode(Y):document.createElement("br")),this.editorDiv.append(st)}},D=new WeakSet,Hn=function(Y){const{value:st,fontSize:gt,color:At,rect:wt,pageIndex:W}=s(this,i);return Y.value!==st||Y.fontSize!==gt||Y.rect.some((u,y)=>Math.abs(u-wt[y])>=1)||Y.color.some((u,y)=>u!==At[y])||Y.pageIndex!==W},K=new WeakSet,un=function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.annotationElementId)return;if(j(this,L,xe).call(this),!Y&&(this.width===0||this.height===0)){setTimeout(()=>j(this,K,un).call(this,!0),0);return}const st=_._internalPadding*this.parentScale;s(this,i).rect=this.getRect(st,st)},ne(_,"_freeTextDefaultContent",""),ne(_,"_internalPadding",0),ne(_,"_defaultColor",null),ne(_,"_defaultFontSize",10),ne(_,"_type","freetext");let P=_;r.FreeTextEditor=P},(g,r,t)=>{var y,b,de,I,$n,H,tt,q,ct,ut,Et,mt,Ot,Wt,Pt,Nt,yt,ht,it,dt,It,Rt,Ht,zn,zt,Oe,Kt,dn,Zt,fn,bt,Z,J,ft,jt,ot,$,pn,xt,St,kt,vt,Gn,Tt,gn;Object.defineProperty(r,"__esModule",{value:!0}),r.StampAnnotationElement=r.InkAnnotationElement=r.FreeTextAnnotationElement=r.AnnotationLayer=void 0,t(89),t(125),t(136),t(138),t(141),t(143),t(145),t(147);var e=t(1),n=t(168),l=t(163),v=t(199),P=t(200),T=t(201);const m=1e3,p=9,w=new WeakSet;function k(Dt){return{width:Dt[2]-Dt[0],height:Dt[3]-Dt[1]}}class x{static create(z){switch(z.data.annotationType){case e.AnnotationType.LINK:return new o(z);case e.AnnotationType.TEXT:return new i(z);case e.AnnotationType.WIDGET:switch(z.data.fieldType){case"Tx":return new C(z);case"Btn":return z.data.radioButton?new f(z):z.data.checkBox?new M(z):new A(z);case"Ch":return new L(z);case"Sig":return new O(z)}return new d(z);case e.AnnotationType.POPUP:return new F(z);case e.AnnotationType.FREETEXT:return new N(z);case e.AnnotationType.LINE:return new D(z);case e.AnnotationType.SQUARE:return new G(z);case e.AnnotationType.CIRCLE:return new K(z);case e.AnnotationType.POLYLINE:return new U(z);case e.AnnotationType.CARET:return new et(z);case e.AnnotationType.INK:return new rt(z);case e.AnnotationType.POLYGON:return new _(z);case e.AnnotationType.HIGHLIGHT:return new Y(z);case e.AnnotationType.UNDERLINE:return new st(z);case e.AnnotationType.SQUIGGLY:return new gt(z);case e.AnnotationType.STRIKEOUT:return new At(z);case e.AnnotationType.STAMP:return new wt(z);case e.AnnotationType.FILEATTACHMENT:return new W(z);default:return new c(z)}}}const a=class a{constructor(z){X(this,y,!1);let{isRenderable:h=!1,ignoreBorder:B=!1,createQuadrilaterals:V=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=h,this.data=z.data,this.layer=z.layer,this.linkService=z.linkService,this.downloadManager=z.downloadManager,this.imageResourcesPath=z.imageResourcesPath,this.renderForms=z.renderForms,this.svgFactory=z.svgFactory,this.annotationStorage=z.annotationStorage,this.enableScripting=z.enableScripting,this.hasJSActions=z.hasJSActions,this._fieldObjects=z.fieldObjects,this.parent=z.parent,h&&(this.container=this._createContainer(B)),V&&this._createQuadrilaterals()}static _hasPopupData(z){let{titleObj:h,contentsObj:B,richText:V}=z;return!!(h!=null&&h.str||B!=null&&B.str||V!=null&&V.str)}get hasPopupData(){return a._hasPopupData(this.data)}_createContainer(z){const{data:h,parent:{page:B,viewport:V}}=this,Q=document.createElement("section");Q.setAttribute("data-annotation-id",h.id),this instanceof d||(Q.tabIndex=m),Q.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Q.setAttribute("aria-haspopup","dialog"),h.noRotate&&Q.classList.add("norotate");const{pageWidth:nt,pageHeight:lt,pageX:Ct,pageY:Ft}=V.rawDims;if(!h.rect||this instanceof F){const{rotation:Yt}=h;return!h.hasOwnCanvas&&Yt!==0&&this.setRotation(Yt,Q),Q}const{width:Mt,height:Qt}=k(h.rect),Ut=e.Util.normalizeRect([h.rect[0],B.view[3]-h.rect[1]+B.view[1],h.rect[2],B.view[3]-h.rect[3]+B.view[1]]);if(!z&&h.borderStyle.width>0){Q.style.borderWidth=`${h.borderStyle.width}px`;const Yt=h.borderStyle.horizontalCornerRadius,_t=h.borderStyle.verticalCornerRadius;if(Yt>0||_t>0){const te=`calc(${Yt}px * var(--scale-factor)) / calc(${_t}px * var(--scale-factor))`;Q.style.borderRadius=te}else if(this instanceof f){const te=`calc(${Mt}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;Q.style.borderRadius=te}switch(h.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:Q.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:Q.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:Q.style.borderBottomStyle="solid";break}const qt=h.borderColor||null;qt?(at(this,y,!0),Q.style.borderColor=e.Util.makeHexColor(qt[0]|0,qt[1]|0,qt[2]|0)):Q.style.borderWidth=0}Q.style.left=`${100*(Ut[0]-Ct)/nt}%`,Q.style.top=`${100*(Ut[1]-Ft)/lt}%`;const{rotation:Bt}=h;return h.hasOwnCanvas||Bt===0?(Q.style.width=`${100*Mt/nt}%`,Q.style.height=`${100*Qt/lt}%`):this.setRotation(Bt,Q),Q}setRotation(z){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:B,pageHeight:V}=this.parent.viewport.rawDims,{width:Q,height:nt}=k(this.data.rect);let lt,Ct;z%180===0?(lt=100*Q/B,Ct=100*nt/V):(lt=100*nt/B,Ct=100*Q/V),h.style.width=`${lt}%`,h.style.height=`${Ct}%`,h.setAttribute("data-main-rotation",(360-z)%360)}get _commonActions(){const z=(h,B,V)=>{const Q=V.detail[h],nt=Q[0],lt=Q.slice(1);V.target.style[B]=v.ColorConverters[`${nt}_HTML`](lt),this.annotationStorage.setValue(this.data.id,{[B]:v.ColorConverters[`${nt}_rgb`](lt)})};return(0,e.shadow)(this,"_commonActions",{display:h=>{const{display:B}=h.detail,V=B%2===1;this.container.style.visibility=V?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:V,noPrint:B===1||B===2})},print:h=>{this.annotationStorage.setValue(this.data.id,{noPrint:!h.detail.print})},hidden:h=>{const{hidden:B}=h.detail;this.container.style.visibility=B?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:B,noView:B})},focus:h=>{setTimeout(()=>h.target.focus({preventScroll:!1}),0)},userName:h=>{h.target.title=h.detail.userName},readonly:h=>{h.target.disabled=h.detail.readonly},required:h=>{this._setRequired(h.target,h.detail.required)},bgColor:h=>{z("bgColor","backgroundColor",h)},fillColor:h=>{z("fillColor","backgroundColor",h)},fgColor:h=>{z("fgColor","color",h)},textColor:h=>{z("textColor","color",h)},borderColor:h=>{z("borderColor","borderColor",h)},strokeColor:h=>{z("strokeColor","borderColor",h)},rotation:h=>{const B=h.detail.rotation;this.setRotation(B),this.annotationStorage.setValue(this.data.id,{rotation:B})}})}_dispatchEventFromSandbox(z,h){const B=this._commonActions;for(const V of Object.keys(h.detail)){const Q=z[V]||B[V];Q==null||Q(h)}}_setDefaultPropertiesFromJS(z){if(!this.enableScripting)return;const h=this.annotationStorage.getRawValue(this.data.id);if(!h)return;const B=this._commonActions;for(const[V,Q]of Object.entries(h)){const nt=B[V];if(nt){const lt={detail:{[V]:Q},target:z};nt(lt),delete h[V]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:z}=this.data;if(!z)return;const[h,B,V,Q]=this.data.rect;if(z.length===1){const[,{x:_t,y:qt},{x:te,y:se}]=z[0];if(V===_t&&Q===qt&&h===te&&B===se)return}const{style:nt}=this.container;let lt;if(s(this,y)){const{borderColor:_t,borderWidth:qt}=nt;nt.borderWidth=0,lt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_t}" stroke-width="${qt}">`],this.container.classList.add("hasBorder")}const Ct=V-h,Ft=Q-B,{svgFactory:Mt}=this,Qt=Mt.createElement("svg");Qt.classList.add("quadrilateralsContainer"),Qt.setAttribute("width",0),Qt.setAttribute("height",0);const Ut=Mt.createElement("defs");Qt.append(Ut);const Bt=Mt.createElement("clipPath"),Yt=`clippath_${this.data.id}`;Bt.setAttribute("id",Yt),Bt.setAttribute("clipPathUnits","objectBoundingBox"),Ut.append(Bt);for(const[,{x:_t,y:qt},{x:te,y:se}]of z){const re=Mt.createElement("rect"),ie=(te-h)/Ct,ce=(Q-qt)/Ft,he=(_t-te)/Ct,Tn=(qt-se)/Ft;re.setAttribute("x",ie),re.setAttribute("y",ce),re.setAttribute("width",he),re.setAttribute("height",Tn),Bt.append(re),lt==null||lt.push(`<rect vector-effect="non-scaling-stroke" x="${ie}" y="${ce}" width="${he}" height="${Tn}"/>`)}s(this,y)&&(lt.push("</g></svg>')"),nt.backgroundImage=lt.join("")),this.container.append(Qt),this.container.style.clipPath=`url(#${Yt})`}_createPopup(){const{container:z,data:h}=this;z.setAttribute("aria-haspopup","dialog");const B=new F({data:{color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,parentRect:h.rect,borderStyle:0,id:`popup_${h.id}`,rotation:h.rotation},parent:this.parent,elements:[this]});this.parent.div.append(B.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(z){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const B=[];if(this._fieldObjects){const V=this._fieldObjects[z];if(V)for(const{page:Q,id:nt,exportValues:lt}of V){if(Q===-1||nt===h)continue;const Ct=typeof lt=="string"?lt:null,Ft=document.querySelector(`[data-element-id="${nt}"]`);if(Ft&&!w.has(Ft)){(0,e.warn)(`_getElementsByName - element not allowed: ${nt}`);continue}B.push({id:nt,exportValue:Ct,domElement:Ft})}return B}for(const V of document.getElementsByName(z)){const{exportValue:Q}=V,nt=V.getAttribute("data-element-id");nt!==h&&w.has(V)&&B.push({id:nt,exportValue:Q,domElement:V})}return B}show(){var z;this.container&&(this.container.hidden=!1),(z=this.popup)==null||z.maybeShow()}hide(){var z;this.container&&(this.container.hidden=!0),(z=this.popup)==null||z.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const z=this.getElementsToTriggerPopup();if(Array.isArray(z))for(const h of z)h.classList.add("highlightArea");else z.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:z,data:{id:h}}=this;this.container.addEventListener("dblclick",()=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("switchannotationeditormode",{source:this,mode:z,editId:h})})}};y=new WeakMap;let c=a;class o extends c{constructor(h){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(h,{isRenderable:!0,ignoreBorder:!!(B!=null&&B.ignoreBorder),createQuadrilaterals:!0});X(this,b);X(this,I);this.isTooltipOnly=h.data.isTooltipOnly}render(){const{data:h,linkService:B}=this,V=document.createElement("a");V.setAttribute("data-element-id",h.id);let Q=!1;return h.url?(B.addLinkAttributes(V,h.url,h.newWindow),Q=!0):h.action?(this._bindNamedAction(V,h.action),Q=!0):h.attachment?(this._bindAttachment(V,h.attachment),Q=!0):h.setOCGState?(j(this,I,$n).call(this,V,h.setOCGState),Q=!0):h.dest?(this._bindLink(V,h.dest),Q=!0):(h.actions&&(h.actions.Action||h.actions["Mouse Up"]||h.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(V,h),Q=!0),h.resetForm?(this._bindResetFormAction(V,h.resetForm),Q=!0):this.isTooltipOnly&&!Q&&(this._bindLink(V,""),Q=!0)),this.container.classList.add("linkAnnotation"),Q&&this.container.append(V),this.container}_bindLink(h,B){h.href=this.linkService.getDestinationHash(B),h.onclick=()=>(B&&this.linkService.goToDestination(B),!1),(B||B==="")&&j(this,b,de).call(this)}_bindNamedAction(h,B){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>(this.linkService.executeNamedAction(B),!1),j(this,b,de).call(this)}_bindAttachment(h,B){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>{var V;return(V=this.downloadManager)==null||V.openOrDownloadData(this.container,B.content,B.filename),!1},j(this,b,de).call(this)}_bindJSAction(h,B){h.href=this.linkService.getAnchorUrl("");const V=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Q of Object.keys(B.actions)){const nt=V.get(Q);nt&&(h[nt]=()=>{var lt;return(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B.id,name:Q}}),!1})}h.onclick||(h.onclick=()=>!1),j(this,b,de).call(this)}_bindResetFormAction(h,B){const V=h.onclick;if(V||(h.href=this.linkService.getAnchorUrl("")),j(this,b,de).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),V||(h.onclick=()=>!1);return}h.onclick=()=>{var Qt;V==null||V();const{fields:Q,refs:nt,include:lt}=B,Ct=[];if(Q.length!==0||nt.length!==0){const Ut=new Set(nt);for(const Bt of Q){const Yt=this._fieldObjects[Bt]||[];for(const{id:_t}of Yt)Ut.add(_t)}for(const Bt of Object.values(this._fieldObjects))for(const Yt of Bt)Ut.has(Yt.id)===lt&&Ct.push(Yt)}else for(const Ut of Object.values(this._fieldObjects))Ct.push(...Ut);const Ft=this.annotationStorage,Mt=[];for(const Ut of Ct){const{id:Bt}=Ut;switch(Mt.push(Bt),Ut.type){case"text":{const _t=Ut.defaultValue||"";Ft.setValue(Bt,{value:_t});break}case"checkbox":case"radiobutton":{const _t=Ut.defaultValue===Ut.exportValues;Ft.setValue(Bt,{value:_t});break}case"combobox":case"listbox":{const _t=Ut.defaultValue||"";Ft.setValue(Bt,{value:_t});break}default:continue}const Yt=document.querySelector(`[data-element-id="${Bt}"]`);if(Yt){if(!w.has(Yt)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Bt}`);continue}}else continue;Yt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Mt,name:"ResetForm"}})),!1}}}b=new WeakSet,de=function(){this.container.setAttribute("data-internal-link","")},I=new WeakSet,$n=function(h,B){h.href=this.linkService.getAnchorUrl(""),h.onclick=()=>(this.linkService.executeSetOCGState(B),!1),j(this,b,de).call(this)};class i extends c{constructor(z){super(z,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const z=document.createElement("img");return z.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",z.alt="[{{type}} Annotation]",z.dataset.l10nId="text_annotation_type",z.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(z),this.container}}class d extends c{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(z){var h;this.data.hasOwnCanvas&&(((h=z.previousSibling)==null?void 0:h.nodeName)==="CANVAS"&&(z.previousSibling.hidden=!0),z.hidden=!1)}_getKeyModifier(z){const{isWin:h,isMac:B}=e.FeatureTest.platform;return h&&z.ctrlKey||B&&z.metaKey}_setEventListener(z,h,B,V,Q){B.includes("mouse")?z.addEventListener(B,nt=>{var lt;(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:V,value:Q(nt),shift:nt.shiftKey,modifier:this._getKeyModifier(nt)}})}):z.addEventListener(B,nt=>{var lt;if(B==="blur"){if(!h.focused||!nt.relatedTarget)return;h.focused=!1}else if(B==="focus"){if(h.focused)return;h.focused=!0}Q&&((lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:V,value:Q(nt)}}))})}_setEventListeners(z,h,B,V){var Q,nt,lt;for(const[Ct,Ft]of B)(Ft==="Action"||(Q=this.data.actions)!=null&&Q[Ft])&&((Ft==="Focus"||Ft==="Blur")&&(h||(h={focused:!1})),this._setEventListener(z,h,Ct,Ft,V),Ft==="Focus"&&!((nt=this.data.actions)!=null&&nt.Blur)?this._setEventListener(z,h,"blur","Blur",null):Ft==="Blur"&&!((lt=this.data.actions)!=null&&lt.Focus)&&this._setEventListener(z,h,"focus","Focus",null))}_setBackgroundColor(z){const h=this.data.backgroundColor||null;z.style.backgroundColor=h===null?"transparent":e.Util.makeHexColor(h[0],h[1],h[2])}_setTextStyle(z){const h=["left","center","right"],{fontColor:B}=this.data.defaultAppearanceData,V=this.data.defaultAppearanceData.fontSize||p,Q=z.style;let nt;const lt=2,Ct=Ft=>Math.round(10*Ft)/10;if(this.data.multiLine){const Ft=Math.abs(this.data.rect[3]-this.data.rect[1]-lt),Mt=Math.round(Ft/(e.LINE_FACTOR*V))||1,Qt=Ft/Mt;nt=Math.min(V,Ct(Qt/e.LINE_FACTOR))}else{const Ft=Math.abs(this.data.rect[3]-this.data.rect[1]-lt);nt=Math.min(V,Ct(Ft/e.LINE_FACTOR))}Q.fontSize=`calc(${nt}px * var(--scale-factor))`,Q.color=e.Util.makeHexColor(B[0],B[1],B[2]),this.data.textAlignment!==null&&(Q.textAlign=h[this.data.textAlignment])}_setRequired(z,h){h?z.setAttribute("required",!0):z.removeAttribute("required"),z.setAttribute("aria-required",h)}}class C extends d{constructor(z){const h=z.renderForms||!z.data.hasAppearance&&!!z.data.fieldValue;super(z,{isRenderable:h})}setPropertyOnSiblings(z,h,B,V){const Q=this.annotationStorage;for(const nt of this._getElementsByName(z.name,z.id))nt.domElement&&(nt.domElement[h]=B),Q.setValue(nt.id,{[V]:B})}render(){var V,Q;const z=this.annotationStorage,h=this.data.id;this.container.classList.add("textWidgetAnnotation");let B=null;if(this.renderForms){const nt=z.getValue(h,{value:this.data.fieldValue});let lt=nt.value||"";const Ct=z.getValue(h,{charLimit:this.data.maxLen}).charLimit;Ct&&lt.length>Ct&&(lt=lt.slice(0,Ct));let Ft=nt.formattedValue||((V=this.data.textContent)==null?void 0:V.join(`
`))||null;Ft&&this.data.comb&&(Ft=Ft.replaceAll(/\s+/g,""));const Mt={userValue:lt,formattedValue:Ft,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(B=document.createElement("textarea"),B.textContent=Ft!=null?Ft:lt,this.data.doNotScroll&&(B.style.overflowY="hidden")):(B=document.createElement("input"),B.type="text",B.setAttribute("value",Ft!=null?Ft:lt),this.data.doNotScroll&&(B.style.overflowX="hidden")),this.data.hasOwnCanvas&&(B.hidden=!0),w.add(B),B.setAttribute("data-element-id",h),B.disabled=this.data.readOnly,B.name=this.data.fieldName,B.tabIndex=m,this._setRequired(B,this.data.required),Ct&&(B.maxLength=Ct),B.addEventListener("input",Ut=>{z.setValue(h,{value:Ut.target.value}),this.setPropertyOnSiblings(B,"value",Ut.target.value,"value"),Mt.formattedValue=null}),B.addEventListener("resetform",Ut=>{var Yt;const Bt=(Yt=this.data.defaultFieldValue)!=null?Yt:"";B.value=Mt.userValue=Bt,Mt.formattedValue=null});let Qt=Ut=>{const{formattedValue:Bt}=Mt;Bt!=null&&(Ut.target.value=Bt),Ut.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){B.addEventListener("focus",Bt=>{if(Mt.focused)return;const{target:Yt}=Bt;Mt.userValue&&(Yt.value=Mt.userValue),Mt.lastCommittedValue=Yt.value,Mt.commitKey=1,Mt.focused=!0}),B.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const Yt={value(_t){var qt;Mt.userValue=(qt=_t.detail.value)!=null?qt:"",z.setValue(h,{value:Mt.userValue.toString()}),_t.target.value=Mt.userValue},formattedValue(_t){const{formattedValue:qt}=_t.detail;Mt.formattedValue=qt,qt!=null&&_t.target!==document.activeElement&&(_t.target.value=qt),z.setValue(h,{formattedValue:qt})},selRange(_t){_t.target.setSelectionRange(..._t.detail.selRange)},charLimit:_t=>{var re;const{charLimit:qt}=_t.detail,{target:te}=_t;if(qt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",qt);let se=Mt.userValue;!se||se.length<=qt||(se=se.slice(0,qt),te.value=Mt.userValue=se,z.setValue(h,{value:se}),(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(Yt,Bt)}),B.addEventListener("keydown",Bt=>{var qt;Mt.commitKey=1;let Yt=-1;if(Bt.key==="Escape"?Yt=0:Bt.key==="Enter"&&!this.data.multiLine?Yt=2:Bt.key==="Tab"&&(Mt.commitKey=3),Yt===-1)return;const{value:_t}=Bt.target;Mt.lastCommittedValue!==_t&&(Mt.lastCommittedValue=_t,Mt.userValue=_t,(qt=this.linkService.eventBus)==null||qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:_t,willCommit:!0,commitKey:Yt,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Ut=Qt;Qt=null,B.addEventListener("blur",Bt=>{var _t;if(!Mt.focused||!Bt.relatedTarget)return;Mt.focused=!1;const{value:Yt}=Bt.target;Mt.userValue=Yt,Mt.lastCommittedValue!==Yt&&((_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Mt.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Ut(Bt)}),(Q=this.data.actions)!=null&&Q.Keystroke&&B.addEventListener("beforeinput",Bt=>{var ce;Mt.lastCommittedValue=null;const{data:Yt,target:_t}=Bt,{value:qt,selectionStart:te,selectionEnd:se}=_t;let re=te,ie=se;switch(Bt.inputType){case"deleteWordBackward":{const he=qt.substring(0,te).match(/\w*[^\w]*$/);he&&(re-=he[0].length);break}case"deleteWordForward":{const he=qt.substring(te).match(/^[^\w]*\w*/);he&&(ie+=he[0].length);break}case"deleteContentBackward":te===se&&(re-=1);break;case"deleteContentForward":te===se&&(ie+=1);break}Bt.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:qt,change:Yt||"",willCommit:!1,selStart:re,selEnd:ie}})}),this._setEventListeners(B,Mt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(Qt&&B.addEventListener("blur",Qt),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/Ct;B.classList.add("comb"),B.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else B=document.createElement("div"),B.textContent=this.data.fieldValue,B.style.verticalAlign="middle",B.style.display="table-cell";return this._setTextStyle(B),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class O extends d{constructor(z){super(z,{isRenderable:!!z.data.hasOwnCanvas})}}class M extends d{constructor(z){super(z,{isRenderable:z.renderForms})}render(){const z=this.annotationStorage,h=this.data,B=h.id;let V=z.getValue(B,{value:h.exportValue===h.fieldValue}).value;typeof V=="string"&&(V=V!=="Off",z.setValue(B,{value:V})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Q=document.createElement("input");return w.add(Q),Q.setAttribute("data-element-id",B),Q.disabled=h.readOnly,this._setRequired(Q,this.data.required),Q.type="checkbox",Q.name=h.fieldName,V&&Q.setAttribute("checked",!0),Q.setAttribute("exportValue",h.exportValue),Q.tabIndex=m,Q.addEventListener("change",nt=>{const{name:lt,checked:Ct}=nt.target;for(const Ft of this._getElementsByName(lt,B)){const Mt=Ct&&Ft.exportValue===h.exportValue;Ft.domElement&&(Ft.domElement.checked=Mt),z.setValue(Ft.id,{value:Mt})}z.setValue(B,{value:Ct})}),Q.addEventListener("resetform",nt=>{const lt=h.defaultFieldValue||"Off";nt.target.checked=lt===h.exportValue}),this.enableScripting&&this.hasJSActions&&(Q.addEventListener("updatefromsandbox",nt=>{const lt={value(Ct){Ct.target.checked=Ct.detail.value!=="Off",z.setValue(B,{value:Ct.target.checked})}};this._dispatchEventFromSandbox(lt,nt)}),this._setEventListeners(Q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.checked)),this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class f extends d{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const z=this.annotationStorage,h=this.data,B=h.id;let V=z.getValue(B,{value:h.fieldValue===h.buttonValue}).value;typeof V=="string"&&(V=V!==h.buttonValue,z.setValue(B,{value:V}));const Q=document.createElement("input");if(w.add(Q),Q.setAttribute("data-element-id",B),Q.disabled=h.readOnly,this._setRequired(Q,this.data.required),Q.type="radio",Q.name=h.fieldName,V&&Q.setAttribute("checked",!0),Q.tabIndex=m,Q.addEventListener("change",nt=>{const{name:lt,checked:Ct}=nt.target;for(const Ft of this._getElementsByName(lt,B))z.setValue(Ft.id,{value:!1});z.setValue(B,{value:Ct})}),Q.addEventListener("resetform",nt=>{const lt=h.defaultFieldValue;nt.target.checked=lt!=null&&lt===h.buttonValue}),this.enableScripting&&this.hasJSActions){const nt=h.buttonValue;Q.addEventListener("updatefromsandbox",lt=>{const Ct={value:Ft=>{const Mt=nt===Ft.detail.value;for(const Qt of this._getElementsByName(Ft.target.name)){const Ut=Mt&&Qt.id===B;Qt.domElement&&(Qt.domElement.checked=Ut),z.setValue(Qt.id,{value:Ut})}}};this._dispatchEventFromSandbox(Ct,lt)}),this._setEventListeners(Q,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)}return this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class A extends o{constructor(z){super(z,{ignoreBorder:z.data.hasAppearance})}render(){const z=super.render();z.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(z.title=this.data.alternativeText);const h=z.lastChild;return this.enableScripting&&this.hasJSActions&&h&&(this._setDefaultPropertiesFromJS(h),h.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({},B)})),z}}class L extends d{constructor(z){super(z,{isRenderable:z.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const z=this.annotationStorage,h=this.data.id,B=z.getValue(h,{value:this.data.fieldValue}),V=document.createElement("select");w.add(V),V.setAttribute("data-element-id",h),V.disabled=this.data.readOnly,this._setRequired(V,this.data.required),V.name=this.data.fieldName,V.tabIndex=m;let Q=this.data.combo&&this.data.options.length>0;this.data.combo||(V.size=this.data.options.length,this.data.multiSelect&&(V.multiple=!0)),V.addEventListener("resetform",Mt=>{const Qt=this.data.defaultFieldValue;for(const Ut of V.options)Ut.selected=Ut.value===Qt});for(const Mt of this.data.options){const Qt=document.createElement("option");Qt.textContent=Mt.displayValue,Qt.value=Mt.exportValue,B.value.includes(Mt.exportValue)&&(Qt.setAttribute("selected",!0),Q=!1),V.append(Qt)}let nt=null;if(Q){const Mt=document.createElement("option");Mt.value=" ",Mt.setAttribute("hidden",!0),Mt.setAttribute("selected",!0),V.prepend(Mt),nt=()=>{Mt.remove(),V.removeEventListener("input",nt),nt=null},V.addEventListener("input",nt)}const lt=Mt=>{const Qt=Mt?"value":"textContent",{options:Ut,multiple:Bt}=V;return Bt?Array.prototype.filter.call(Ut,Yt=>Yt.selected).map(Yt=>Yt[Qt]):Ut.selectedIndex===-1?null:Ut[Ut.selectedIndex][Qt]};let Ct=lt(!1);const Ft=Mt=>{const Qt=Mt.target.options;return Array.prototype.map.call(Qt,Ut=>({displayValue:Ut.textContent,exportValue:Ut.value}))};return this.enableScripting&&this.hasJSActions?(V.addEventListener("updatefromsandbox",Mt=>{const Qt={value(Ut){nt==null||nt();const Bt=Ut.detail.value,Yt=new Set(Array.isArray(Bt)?Bt:[Bt]);for(const _t of V.options)_t.selected=Yt.has(_t.value);z.setValue(h,{value:lt(!0)}),Ct=lt(!1)},multipleSelection(Ut){V.multiple=!0},remove(Ut){const Bt=V.options,Yt=Ut.detail.remove;Bt[Yt].selected=!1,V.remove(Yt),Bt.length>0&&Array.prototype.findIndex.call(Bt,qt=>qt.selected)===-1&&(Bt[0].selected=!0),z.setValue(h,{value:lt(!0),items:Ft(Ut)}),Ct=lt(!1)},clear(Ut){for(;V.length!==0;)V.remove(0);z.setValue(h,{value:null,items:[]}),Ct=lt(!1)},insert(Ut){const{index:Bt,displayValue:Yt,exportValue:_t}=Ut.detail.insert,qt=V.children[Bt],te=document.createElement("option");te.textContent=Yt,te.value=_t,qt?qt.before(te):V.append(te),z.setValue(h,{value:lt(!0),items:Ft(Ut)}),Ct=lt(!1)},items(Ut){const{items:Bt}=Ut.detail;for(;V.length!==0;)V.remove(0);for(const Yt of Bt){const{displayValue:_t,exportValue:qt}=Yt,te=document.createElement("option");te.textContent=_t,te.value=qt,V.append(te)}V.options.length>0&&(V.options[0].selected=!0),z.setValue(h,{value:lt(!0),items:Ft(Ut)}),Ct=lt(!1)},indices(Ut){const Bt=new Set(Ut.detail.indices);for(const Yt of Ut.target.options)Yt.selected=Bt.has(Yt.index);z.setValue(h,{value:lt(!0)}),Ct=lt(!1)},editable(Ut){Ut.target.disabled=!Ut.detail.editable}};this._dispatchEventFromSandbox(Qt,Mt)}),V.addEventListener("input",Mt=>{var Ut;const Qt=lt(!0);z.setValue(h,{value:Qt}),Mt.preventDefault(),(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:Ct,changeEx:Qt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(V,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Mt=>Mt.target.value)):V.addEventListener("input",function(Mt){z.setValue(h,{value:lt(!0)})}),this.data.combo&&this._setTextStyle(V),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class F extends c{constructor(z){const{data:h,elements:B}=z;super(z,{isRenderable:c._hasPopupData(h)}),this.elements=B}render(){this.container.classList.add("popupAnnotation");const z=new S({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),h=[];for(const B of this.elements)B.popup=z,h.push(B.data.id),B.addHighlightArea();return this.container.setAttribute("aria-controls",h.map(B=>`${e.AnnotationPrefix}${B}`).join(",")),this.container}}class S{constructor(z){X(this,Ht);X(this,zt);X(this,Kt);X(this,Zt);X(this,H,null);X(this,tt,j(this,Ht,zn).bind(this));X(this,q,j(this,Zt,fn).bind(this));X(this,ct,j(this,Kt,dn).bind(this));X(this,ut,j(this,zt,Oe).bind(this));X(this,Et,null);X(this,mt,null);X(this,Ot,null);X(this,Wt,null);X(this,Pt,null);X(this,Nt,null);X(this,yt,!1);X(this,ht,null);X(this,it,null);X(this,dt,null);X(this,It,null);X(this,Rt,!1);var Yt;let{container:h,color:B,elements:V,titleObj:Q,modificationDate:nt,contentsObj:lt,richText:Ct,parent:Ft,rect:Mt,parentRect:Qt,open:Ut}=z;at(this,mt,h),at(this,It,Q),at(this,Ot,lt),at(this,dt,Ct),at(this,Pt,Ft),at(this,Et,B),at(this,it,Mt),at(this,Nt,Qt),at(this,Wt,V);const Bt=n.PDFDateString.toDateObject(nt);Bt&&at(this,H,Ft.l10n.get("annotation_date_string",{date:Bt.toLocaleDateString(),time:Bt.toLocaleTimeString()})),this.trigger=V.flatMap(_t=>_t.getElementsToTriggerPopup());for(const _t of this.trigger)_t.addEventListener("click",s(this,ut)),_t.addEventListener("mouseenter",s(this,ct)),_t.addEventListener("mouseleave",s(this,q)),_t.classList.add("popupTriggerArea");for(const _t of V)(Yt=_t.container)==null||Yt.addEventListener("keydown",s(this,tt));s(this,mt).hidden=!0,Ut&&j(this,zt,Oe).call(this)}render(){if(s(this,ht))return;const{page:{view:z},viewport:{rawDims:{pageWidth:h,pageHeight:B,pageX:V,pageY:Q}}}=s(this,Pt),nt=at(this,ht,document.createElement("div"));if(nt.className="popup",s(this,Et)){const re=nt.style.outlineColor=e.Util.makeHexColor(...s(this,Et));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?nt.style.backgroundColor=`color-mix(in srgb, ${re} 30%, white)`:nt.style.backgroundColor=e.Util.makeHexColor(...s(this,Et).map(ce=>Math.floor(.7*(255-ce)+ce)))}const lt=document.createElement("span");lt.className="header";const Ct=document.createElement("h1");if(lt.append(Ct),{dir:Ct.dir,str:Ct.textContent}=s(this,It),nt.append(lt),s(this,H)){const re=document.createElement("span");re.classList.add("popupDate"),s(this,H).then(ie=>{re.textContent=ie}),lt.append(re)}const Ft=s(this,Ot),Mt=s(this,dt);if(Mt!=null&&Mt.str&&(!(Ft!=null&&Ft.str)||Ft.str===Mt.str))T.XfaLayer.render({xfaHtml:Mt.html,intent:"richText",div:nt}),nt.lastChild.classList.add("richText","popupContent");else{const re=this._formatContents(Ft);nt.append(re)}let Qt=!!s(this,Nt),Ut=Qt?s(this,Nt):s(this,it);for(const re of s(this,Wt))if(!Ut||e.Util.intersect(re.data.rect,Ut)!==null){Ut=re.data.rect,Qt=!0;break}const Bt=e.Util.normalizeRect([Ut[0],z[3]-Ut[1]+z[1],Ut[2],z[3]-Ut[3]+z[1]]),Yt=5,_t=Qt?Ut[2]-Ut[0]+Yt:0,qt=Bt[0]+_t,te=Bt[1],{style:se}=s(this,mt);se.left=`${100*(qt-V)/h}%`,se.top=`${100*(te-Q)/B}%`,s(this,mt).append(nt)}_formatContents(z){let{str:h,dir:B}=z;const V=document.createElement("p");V.classList.add("popupContent"),V.dir=B;const Q=h.split(/(?:\r\n?|\n)/);for(let nt=0,lt=Q.length;nt<lt;++nt){const Ct=Q[nt];V.append(document.createTextNode(Ct)),nt<lt-1&&V.append(document.createElement("br"))}return V}forceHide(){at(this,Rt,this.isVisible),s(this,Rt)&&(s(this,mt).hidden=!0)}maybeShow(){s(this,Rt)&&(at(this,Rt,!1),s(this,mt).hidden=!1)}get isVisible(){return s(this,mt).hidden===!1}}H=new WeakMap,tt=new WeakMap,q=new WeakMap,ct=new WeakMap,ut=new WeakMap,Et=new WeakMap,mt=new WeakMap,Ot=new WeakMap,Wt=new WeakMap,Pt=new WeakMap,Nt=new WeakMap,yt=new WeakMap,ht=new WeakMap,it=new WeakMap,dt=new WeakMap,It=new WeakMap,Rt=new WeakMap,Ht=new WeakSet,zn=function(z){z.altKey||z.shiftKey||z.ctrlKey||z.metaKey||(z.key==="Enter"||z.key==="Escape"&&s(this,yt))&&j(this,zt,Oe).call(this)},zt=new WeakSet,Oe=function(){at(this,yt,!s(this,yt)),s(this,yt)?(j(this,Kt,dn).call(this),s(this,mt).addEventListener("click",s(this,ut)),s(this,mt).addEventListener("keydown",s(this,tt))):(j(this,Zt,fn).call(this),s(this,mt).removeEventListener("click",s(this,ut)),s(this,mt).removeEventListener("keydown",s(this,tt)))},Kt=new WeakSet,dn=function(){s(this,ht)||this.render(),this.isVisible?s(this,yt)&&s(this,mt).classList.add("focused"):(s(this,mt).hidden=!1,s(this,mt).style.zIndex=parseInt(s(this,mt).style.zIndex)+1e3)},Zt=new WeakSet,fn=function(){s(this,mt).classList.remove("focused"),!(s(this,yt)||!this.isVisible)&&(s(this,mt).hidden=!0,s(this,mt).style.zIndex=parseInt(s(this,mt).style.zIndex)-1e3)};class N extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0}),this.textContent=z.data.textContent,this.textPosition=z.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const z=document.createElement("div");z.classList.add("annotationTextContent"),z.setAttribute("role","comment");for(const h of this.textContent){const B=document.createElement("span");B.textContent=h,z.append(B)}this.container.append(z)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}r.FreeTextAnnotationElement=N;class D extends c{constructor(h){super(h,{isRenderable:!0,ignoreBorder:!0});X(this,bt,null)}render(){this.container.classList.add("lineAnnotation");const h=this.data,{width:B,height:V}=k(h.rect),Q=this.svgFactory.create(B,V,!0),nt=at(this,bt,this.svgFactory.createElement("svg:line"));return nt.setAttribute("x1",h.rect[2]-h.lineCoordinates[0]),nt.setAttribute("y1",h.rect[3]-h.lineCoordinates[1]),nt.setAttribute("x2",h.rect[2]-h.lineCoordinates[2]),nt.setAttribute("y2",h.rect[3]-h.lineCoordinates[3]),nt.setAttribute("stroke-width",h.borderStyle.width||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),Q.append(nt),this.container.append(Q),!h.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class G extends c{constructor(h){super(h,{isRenderable:!0,ignoreBorder:!0});X(this,Z,null)}render(){this.container.classList.add("squareAnnotation");const h=this.data,{width:B,height:V}=k(h.rect),Q=this.svgFactory.create(B,V,!0),nt=h.borderStyle.width,lt=at(this,Z,this.svgFactory.createElement("svg:rect"));return lt.setAttribute("x",nt/2),lt.setAttribute("y",nt/2),lt.setAttribute("width",B-nt),lt.setAttribute("height",V-nt),lt.setAttribute("stroke-width",nt||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),Q.append(lt),this.container.append(Q),!h.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,Z)}addHighlightArea(){this.container.classList.add("highlightArea")}}Z=new WeakMap;class K extends c{constructor(h){super(h,{isRenderable:!0,ignoreBorder:!0});X(this,J,null)}render(){this.container.classList.add("circleAnnotation");const h=this.data,{width:B,height:V}=k(h.rect),Q=this.svgFactory.create(B,V,!0),nt=h.borderStyle.width,lt=at(this,J,this.svgFactory.createElement("svg:ellipse"));return lt.setAttribute("cx",B/2),lt.setAttribute("cy",V/2),lt.setAttribute("rx",B/2-nt/2),lt.setAttribute("ry",V/2-nt/2),lt.setAttribute("stroke-width",nt||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),Q.append(lt),this.container.append(Q),!h.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,J)}addHighlightArea(){this.container.classList.add("highlightArea")}}J=new WeakMap;class U extends c{constructor(h){super(h,{isRenderable:!0,ignoreBorder:!0});X(this,ft,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const h=this.data,{width:B,height:V}=k(h.rect),Q=this.svgFactory.create(B,V,!0);let nt=[];for(const Ct of h.vertices){const Ft=Ct.x-h.rect[0],Mt=h.rect[3]-Ct.y;nt.push(Ft+","+Mt)}nt=nt.join(" ");const lt=at(this,ft,this.svgFactory.createElement(this.svgElementName));return lt.setAttribute("points",nt),lt.setAttribute("stroke-width",h.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),Q.append(lt),this.container.append(Q),!h.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return s(this,ft)}addHighlightArea(){this.container.classList.add("highlightArea")}}ft=new WeakMap;class _ extends U{constructor(z){super(z),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class et extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class rt extends c{constructor(h){super(h,{isRenderable:!0,ignoreBorder:!0});X(this,jt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const h=this.data,{width:B,height:V}=k(h.rect),Q=this.svgFactory.create(B,V,!0);for(const nt of h.inkLists){let lt=[];for(const Ft of nt){const Mt=Ft.x-h.rect[0],Qt=h.rect[3]-Ft.y;lt.push(`${Mt},${Qt}`)}lt=lt.join(" ");const Ct=this.svgFactory.createElement(this.svgElementName);s(this,jt).push(Ct),Ct.setAttribute("points",lt),Ct.setAttribute("stroke-width",h.borderStyle.width||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),!h.popupRef&&this.hasPopupData&&this._createPopup(),Q.append(Ct)}return this.container.append(Q),this.container}getElementsToTriggerPopup(){return s(this,jt)}addHighlightArea(){this.container.classList.add("highlightArea")}}jt=new WeakMap,r.InkAnnotationElement=rt;class Y extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class st extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class gt extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class At extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class wt extends c{constructor(z){super(z,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}r.StampAnnotationElement=wt;class W extends c{constructor(h){var Q;super(h,{isRenderable:!0});X(this,$);X(this,ot,null);const{filename:B,content:V}=this.data.file;this.filename=(0,n.getFilenameFromUrl)(B,!0),this.content=V,(Q=this.linkService.eventBus)==null||Q.dispatch("fileattachmentannotation",{source:this,filename:B,content:V})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:h,data:B}=this;let V;B.hasAppearance||B.fillAlpha===0?V=document.createElement("div"):(V=document.createElement("img"),V.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(B.name)?"paperclip":"pushpin"}.svg`,B.fillAlpha&&B.fillAlpha<1&&(V.style=`filter: opacity(${Math.round(B.fillAlpha*100)}%);`)),V.addEventListener("dblclick",j(this,$,pn).bind(this)),at(this,ot,V);const{isMac:Q}=e.FeatureTest.platform;return h.addEventListener("keydown",nt=>{nt.key==="Enter"&&(Q?nt.metaKey:nt.ctrlKey)&&j(this,$,pn).call(this)}),!B.popupRef&&this.hasPopupData?this._createPopup():V.classList.add("popupTriggerArea"),h.append(V),h}getElementsToTriggerPopup(){return s(this,ot)}addHighlightArea(){this.container.classList.add("highlightArea")}}ot=new WeakMap,$=new WeakSet,pn=function(){var h;(h=this.downloadManager)==null||h.openOrDownloadData(this.container,this.content,this.filename)};class u{constructor(z){X(this,vt);X(this,Tt);X(this,xt,null);X(this,St,null);X(this,kt,new Map);let{div:h,accessibilityManager:B,annotationCanvasMap:V,l10n:Q,page:nt,viewport:lt}=z;this.div=h,at(this,xt,B),at(this,St,V),this.l10n=Q,this.page=nt,this.viewport=lt,this.zIndex=0,this.l10n||(this.l10n=P.NullL10n)}render(z){return ee(this,null,function*(){const{annotations:h}=z,B=this.div;(0,n.setLayerDimensions)(B,this.viewport);const V=new Map,Q={data:null,layer:B,linkService:z.linkService,downloadManager:z.downloadManager,imageResourcesPath:z.imageResourcesPath||"",renderForms:z.renderForms!==!1,svgFactory:new n.DOMSVGFactory,annotationStorage:z.annotationStorage||new l.AnnotationStorage,enableScripting:z.enableScripting===!0,hasJSActions:z.hasJSActions,fieldObjects:z.fieldObjects,parent:this,elements:null};for(const nt of h){if(nt.noHTML)continue;const lt=nt.annotationType===e.AnnotationType.POPUP;if(lt){const Mt=V.get(nt.id);if(!Mt)continue;Q.elements=Mt}else{const{width:Mt,height:Qt}=k(nt.rect);if(Mt<=0||Qt<=0)continue}Q.data=nt;const Ct=x.create(Q);if(!Ct.isRenderable)continue;if(!lt&&nt.popupRef){const Mt=V.get(nt.popupRef);Mt?Mt.push(Ct):V.set(nt.popupRef,[Ct])}Ct.annotationEditorType>0&&s(this,kt).set(Ct.data.id,Ct);const Ft=Ct.render();nt.hidden&&(Ft.style.visibility="hidden"),j(this,vt,Gn).call(this,Ft,nt.id)}j(this,Tt,gn).call(this),yield this.l10n.translate(B)})}update(z){let{viewport:h}=z;const B=this.div;this.viewport=h,(0,n.setLayerDimensions)(B,{rotation:h.rotation}),j(this,Tt,gn).call(this),B.hidden=!1}getEditableAnnotations(){return Array.from(s(this,kt).values())}getEditableAnnotation(z){return s(this,kt).get(z)}}xt=new WeakMap,St=new WeakMap,kt=new WeakMap,vt=new WeakSet,Gn=function(z,h){var V;const B=z.firstChild||z;B.id=`${e.AnnotationPrefix}${h}`,this.div.append(z),(V=s(this,xt))==null||V.moveElementInDOM(this.div,z,B,!1)},Tt=new WeakSet,gn=function(){if(!s(this,St))return;const z=this.div;for(const[h,B]of s(this,St)){const V=z.querySelector(`[data-annotation-id="${h}"]`);if(!V)continue;const{firstChild:Q}=V;Q?Q.nodeName==="CANVAS"?Q.replaceWith(B):Q.before(B):V.append(B)}s(this,St).clear()},r.AnnotationLayer=u},(g,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0;function t(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function e(l){return Math.max(0,Math.min(255,255*l))}class n{static CMYK_G(v){let[P,T,m,p]=v;return["G",1-Math.min(1,.3*P+.59*m+.11*T+p)]}static G_CMYK(v){let[P]=v;return["CMYK",0,0,0,1-P]}static G_RGB(v){let[P]=v;return["RGB",P,P,P]}static G_rgb(v){let[P]=v;return P=e(P),[P,P,P]}static G_HTML(v){let[P]=v;const T=t(P);return`#${T}${T}${T}`}static RGB_G(v){let[P,T,m]=v;return["G",.3*P+.59*T+.11*m]}static RGB_rgb(v){return v.map(e)}static RGB_HTML(v){return`#${v.map(t).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(v){let[P,T,m,p]=v;return["RGB",1-Math.min(1,P+p),1-Math.min(1,m+p),1-Math.min(1,T+p)]}static CMYK_rgb(v){let[P,T,m,p]=v;return[e(1-Math.min(1,P+p)),e(1-Math.min(1,m+p)),e(1-Math.min(1,T+p))]}static CMYK_HTML(v){const P=this.CMYK_RGB(v).slice(1);return this.RGB_HTML(P)}static RGB_CMYK(v){let[P,T,m]=v;const p=1-P,w=1-T,k=1-m,x=Math.min(p,w,k);return["CMYK",p,w,k,x]}}r.ColorConverters=n},(g,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NullL10n=void 0,r.getL10nFallback=e;const t={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};t.print_progress_percent="{{progress}}%";function e(P,T){switch(P){case"find_match_count":P=`find_match_count[${T.total===1?"one":"other"}]`;break;case"find_match_count_limit":P=`find_match_count_limit[${T.limit===1?"one":"other"}]`;break}return t[P]||""}function n(P,T){return T?P.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(m,p)=>p in T?T[p]:"{{"+p+"}}"):P}const l={getLanguage(){return ee(this,null,function*(){return"en-us"})},getDirection(){return ee(this,null,function*(){return"ltr"})},get(T){return ee(this,arguments,function*(P){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e(P,m);return n(p,m)})},translate(P){return ee(this,null,function*(){})}};r.NullL10n=l},(g,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0,t(89);var e=t(194);class n{static setupStorage(v,P,T,m,p){const w=m.getValue(P,{value:null});switch(T.name){case"textarea":if(w.value!==null&&(v.textContent=w.value),p==="print")break;v.addEventListener("input",k=>{m.setValue(P,{value:k.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(w.value===T.attributes.xfaOn?v.setAttribute("checked",!0):w.value===T.attributes.xfaOff&&v.removeAttribute("checked"),p==="print")break;v.addEventListener("change",k=>{m.setValue(P,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&v.setAttribute("value",w.value),p==="print")break;v.addEventListener("input",k=>{m.setValue(P,{value:k.target.value})})}break;case"select":if(w.value!==null){v.setAttribute("value",w.value);for(const k of T.children)k.attributes.value===w.value?k.attributes.selected=!0:k.attributes.hasOwnProperty("selected")&&delete k.attributes.selected}v.addEventListener("input",k=>{const x=k.target.options,c=x.selectedIndex===-1?"":x[x.selectedIndex].value;m.setValue(P,{value:c})});break}}static setAttributes(v){let{html:P,element:T,storage:m=null,intent:p,linkService:w}=v;const{attributes:k}=T,x=P instanceof HTMLAnchorElement;k.type==="radio"&&(k.name=`${k.name}-${p}`);for(const[c,o]of Object.entries(k))if(o!=null)switch(c){case"class":o.length&&P.setAttribute(c,o.join(" "));break;case"dataId":break;case"id":P.setAttribute("data-element-id",o);break;case"style":Object.assign(P.style,o);break;case"textContent":P.textContent=o;break;default:(!x||c!=="href"&&c!=="newWindow")&&P.setAttribute(c,o)}x&&w.addLinkAttributes(P,k.href,k.newWindow),m&&k.dataId&&this.setupStorage(P,k.dataId,T,m)}static render(v){var o;const P=v.annotationStorage,T=v.linkService,m=v.xfaHtml,p=v.intent||"display",w=document.createElement(m.name);m.attributes&&this.setAttributes({html:w,element:m,intent:p,linkService:T});const k=[[m,-1,w]],x=v.div;if(x.append(w),v.viewport){const i=`matrix(${v.viewport.transform.join(",")})`;x.style.transform=i}p!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const c=[];for(;k.length>0;){const[i,d,C]=k.at(-1);if(d+1===i.children.length){k.pop();continue}const O=i.children[++k.at(-1)[1]];if(O===null)continue;const{name:M}=O;if(M==="#text"){const A=document.createTextNode(O.value);c.push(A),C.append(A);continue}const f=(o=O==null?void 0:O.attributes)!=null&&o.xmlns?document.createElementNS(O.attributes.xmlns,M):document.createElement(M);if(C.append(f),O.attributes&&this.setAttributes({html:f,element:O,storage:P,intent:p,linkService:T}),O.children&&O.children.length>0)k.push([O,-1,f]);else if(O.value){const A=document.createTextNode(O.value);e.XfaText.shouldBuildText(M)&&c.push(A),f.append(A)}}for(const i of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))i.setAttribute("readOnly",!0);return{textDivs:c}}static update(v){const P=`matrix(${v.viewport.transform.join(",")})`;v.div.style.transform=P,v.div.hidden=!1}}r.XfaLayer=n},(g,r,t)=>{var m,p,w,k,x,c,o,i,d,C,O,M,f,A,L,Vn,S,Xn,D,_n,K,Yn,_,mn,rt,Kn,st,vn,At,Jn,W,Qn,y,Zn,b,jn,I,qn,H,le,q,bn,ut,De,mt,Le,Wt,me,Nt,yn,ht,Ne,dt,tr,Rt,An,Xt,er,Vt,nr,Jt,Sn,Gt,Be,Z,ve;Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0,t(89),t(2);var e=t(1),n=t(164),l=t(198),v=t(168),P=t(165);const ft=class ft extends n.AnnotationEditor{constructor($){super(ue(oe({},$),{name:"inkEditor"}));X(this,L);X(this,S);X(this,D);X(this,K);X(this,_);X(this,rt);X(this,st);X(this,At);X(this,W);X(this,y);X(this,b);X(this,I);X(this,H);X(this,q);X(this,ut);X(this,mt);X(this,Wt);X(this,Nt);X(this,ht);X(this,Vt);X(this,Jt);X(this,Gt);X(this,Z);X(this,m,0);X(this,p,0);X(this,w,this.canvasPointermove.bind(this));X(this,k,this.canvasPointerleave.bind(this));X(this,x,this.canvasPointerup.bind(this));X(this,c,this.canvasPointerdown.bind(this));X(this,o,new Path2D);X(this,i,!1);X(this,d,!1);X(this,C,!1);X(this,O,null);X(this,M,0);X(this,f,0);X(this,A,null);this.color=$.color||null,this.thickness=$.thickness||null,this.opacity=$.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize($){n.AnnotationEditor.initialize($,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams($,pt){switch($){case e.AnnotationEditorParamsType.INK_THICKNESS:ft._defaultThickness=pt;break;case e.AnnotationEditorParamsType.INK_COLOR:ft._defaultColor=pt;break;case e.AnnotationEditorParamsType.INK_OPACITY:ft._defaultOpacity=pt/100;break}}updateParams($,pt){switch($){case e.AnnotationEditorParamsType.INK_THICKNESS:j(this,L,Vn).call(this,pt);break;case e.AnnotationEditorParamsType.INK_COLOR:j(this,S,Xn).call(this,pt);break;case e.AnnotationEditorParamsType.INK_OPACITY:j(this,D,_n).call(this,pt);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,ft._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,ft._defaultColor||n.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(ft._defaultOpacity*100)]]}get propertiesToUpdate(){var $;return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ft._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||ft._defaultColor||n.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(($=this.opacity)!=null?$:ft._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(j(this,ut,De).call(this),j(this,mt,Le).call(this)),this.isAttachedToDOM||(this.parent.add(this),j(this,Wt,me).call(this)),j(this,Z,ve).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,s(this,O).disconnect(),at(this,O,null),super.remove())}setParent($){!this.parent&&$?this._uiManager.removeShouldRescale(this):this.parent&&$===null&&this._uiManager.addShouldRescale(this),super.setParent($)}onScaleChanging(){const[$,pt]=this.parentDimensions,xt=this.width*$,St=this.height*pt;this.setDimensions(xt,St)}enableEditMode(){s(this,i)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",s(this,c)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",s(this,c)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){s(this,i)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),at(this,i,!0),this.div.classList.add("disabled"),j(this,Z,ve).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin($){this._focusEventsAllowed&&(super.focusin($),this.enableEditMode())}canvasPointerdown($){$.button!==0||!this.isInEditMode()||s(this,i)||(this.setInForeground(),$.preventDefault(),$.type!=="mouse"&&this.div.focus(),j(this,rt,Kn).call(this,$.offsetX,$.offsetY))}canvasPointermove($){$.preventDefault(),j(this,st,vn).call(this,$.offsetX,$.offsetY)}canvasPointerup($){$.preventDefault(),j(this,q,bn).call(this,$)}canvasPointerleave($){j(this,q,bn).call(this,$)}get isResizable(){return!this.isEmpty()&&s(this,i)}render(){if(this.div)return this.div;let $,pt;this.width&&($=this.x,pt=this.y),super.render(),n.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then($t=>{var Tt;return(Tt=this.div)==null?void 0:Tt.setAttribute("aria-label",$t)});const[xt,St,kt,vt]=j(this,K,Yn).call(this);if(this.setAt(xt,St,0,0),this.setDims(kt,vt),j(this,ut,De).call(this),this.width){const[$t,Tt]=this.parentDimensions;this.setAspectRatio(this.width*$t,this.height*Tt),this.setAt($*$t,pt*Tt,this.width*$t,this.height*Tt),at(this,C,!0),j(this,Wt,me).call(this),this.setDims(this.width*$t,this.height*Tt),j(this,H,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return j(this,mt,Le).call(this),this.div}setDimensions($,pt){const xt=Math.round($),St=Math.round(pt);if(s(this,M)===xt&&s(this,f)===St)return;at(this,M,xt),at(this,f,St),this.canvas.style.visibility="hidden";const[kt,vt]=this.parentDimensions;this.width=$/kt,this.height=pt/vt,this.fixAndSetPosition(),s(this,i)&&j(this,Nt,yn).call(this,$,pt),j(this,Wt,me).call(this),j(this,H,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize($,pt,xt){var Q,nt,lt;if($ instanceof l.InkAnnotationElement)return null;const St=super.deserialize($,pt,xt);St.thickness=$.thickness,St.color=e.Util.makeHexColor(...$.color),St.opacity=$.opacity;const[kt,vt]=St.pageDimensions,$t=St.width*kt,Tt=St.height*vt,Lt=St.parentScale,Dt=$.thickness/2;at(St,i,!0),at(St,M,Math.round($t)),at(St,f,Math.round(Tt));const{paths:z,rect:h,rotation:B}=$;for(let{bezier:Ct}of z){Ct=j(Q=ft,Xt,er).call(Q,Ct,h,B);const Ft=[];St.paths.push(Ft);let Mt=Lt*(Ct[0]-Dt),Qt=Lt*(Ct[1]-Dt);for(let Bt=2,Yt=Ct.length;Bt<Yt;Bt+=6){const _t=Lt*(Ct[Bt]-Dt),qt=Lt*(Ct[Bt+1]-Dt),te=Lt*(Ct[Bt+2]-Dt),se=Lt*(Ct[Bt+3]-Dt),re=Lt*(Ct[Bt+4]-Dt),ie=Lt*(Ct[Bt+5]-Dt);Ft.push([[Mt,Qt],[_t,qt],[te,se],[re,ie]]),Mt=re,Qt=ie}const Ut=j(this,dt,tr).call(this,Ft);St.bezierPath2D.push(Ut)}const V=j(nt=St,Jt,Sn).call(nt);return at(St,p,Math.max(n.AnnotationEditor.MIN_SIZE,V[2]-V[0])),at(St,m,Math.max(n.AnnotationEditor.MIN_SIZE,V[3]-V[1])),j(lt=St,Nt,yn).call(lt,$t,Tt),St}serialize(){if(this.isEmpty())return null;const $=this.getRect(0,0),pt=n.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:pt,thickness:this.thickness,opacity:this.opacity,paths:j(this,Vt,nr).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,$),pageIndex:this.pageIndex,rect:$,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};m=new WeakMap,p=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,c=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakMap,C=new WeakMap,O=new WeakMap,M=new WeakMap,f=new WeakMap,A=new WeakMap,L=new WeakSet,Vn=function($){const pt=this.thickness;this.addCommands({cmd:()=>{this.thickness=$,j(this,Z,ve).call(this)},undo:()=>{this.thickness=pt,j(this,Z,ve).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Xn=function($){const pt=this.color;this.addCommands({cmd:()=>{this.color=$,j(this,H,le).call(this)},undo:()=>{this.color=pt,j(this,H,le).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},D=new WeakSet,_n=function($){$/=100;const pt=this.opacity;this.addCommands({cmd:()=>{this.opacity=$,j(this,H,le).call(this)},undo:()=>{this.opacity=pt,j(this,H,le).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},K=new WeakSet,Yn=function(){const{parentRotation:$,parentDimensions:[pt,xt]}=this;switch($){case 90:return[0,xt,xt,pt];case 180:return[pt,xt,pt,xt];case 270:return[pt,0,xt,pt];default:return[0,0,pt,xt]}},_=new WeakSet,mn=function(){const{ctx:$,color:pt,opacity:xt,thickness:St,parentScale:kt,scaleFactor:vt}=this;$.lineWidth=St*kt/vt,$.lineCap="round",$.lineJoin="round",$.miterLimit=10,$.strokeStyle=`${pt}${(0,P.opacityToHex)(xt)}`},rt=new WeakSet,Kn=function($,pt){var xt;this.canvas.addEventListener("contextmenu",v.noContextMenu),this.canvas.addEventListener("pointerleave",s(this,k)),this.canvas.addEventListener("pointermove",s(this,w)),this.canvas.addEventListener("pointerup",s(this,x)),this.canvas.removeEventListener("pointerdown",s(this,c)),this.isEditing=!0,s(this,C)||(at(this,C,!0),j(this,Wt,me).call(this),this.thickness||(this.thickness=ft._defaultThickness),this.color||(this.color=ft._defaultColor||n.AnnotationEditor._defaultLineColor),(xt=this.opacity)!=null||(this.opacity=ft._defaultOpacity)),this.currentPath.push([$,pt]),at(this,d,!1),j(this,_,mn).call(this),at(this,A,()=>{j(this,y,Zn).call(this),s(this,A)&&window.requestAnimationFrame(s(this,A))}),window.requestAnimationFrame(s(this,A))},st=new WeakSet,vn=function($,pt){const[xt,St]=this.currentPath.at(-1);if(this.currentPath.length>1&&$===xt&&pt===St)return;const kt=this.currentPath;let vt=s(this,o);if(kt.push([$,pt]),at(this,d,!0),kt.length<=2){vt.moveTo(...kt[0]),vt.lineTo($,pt);return}kt.length===3&&(at(this,o,vt=new Path2D),vt.moveTo(...kt[0])),j(this,b,jn).call(this,vt,...kt.at(-3),...kt.at(-2),$,pt)},At=new WeakSet,Jn=function(){if(this.currentPath.length===0)return;const $=this.currentPath.at(-1);s(this,o).lineTo(...$)},W=new WeakSet,Qn=function($,pt){at(this,A,null),$=Math.min(Math.max($,0),this.canvas.width),pt=Math.min(Math.max(pt,0),this.canvas.height),j(this,st,vn).call(this,$,pt),j(this,At,Jn).call(this);let xt;if(this.currentPath.length!==1)xt=j(this,I,qn).call(this);else{const Tt=[$,pt];xt=[[Tt,Tt.slice(),Tt.slice(),Tt]]}const St=s(this,o),kt=this.currentPath;this.currentPath=[],at(this,o,new Path2D);const vt=()=>{this.allRawPaths.push(kt),this.paths.push(xt),this.bezierPath2D.push(St),this.rebuild()},$t=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(j(this,ut,De).call(this),j(this,mt,Le).call(this)),j(this,Z,ve).call(this))};this.addCommands({cmd:vt,undo:$t,mustExec:!0})},y=new WeakSet,Zn=function(){if(!s(this,d))return;at(this,d,!1);const $=Math.ceil(this.thickness*this.parentScale),pt=this.currentPath.slice(-3),xt=pt.map(vt=>vt[0]),St=pt.map(vt=>vt[1]);Math.min(...xt)-$,Math.max(...xt)+$,Math.min(...St)-$,Math.max(...St)+$;const{ctx:kt}=this;kt.save(),kt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const vt of this.bezierPath2D)kt.stroke(vt);kt.stroke(s(this,o)),kt.restore()},b=new WeakSet,jn=function($,pt,xt,St,kt,vt,$t){const Tt=(pt+St)/2,Lt=(xt+kt)/2,Dt=(St+vt)/2,z=(kt+$t)/2;$.bezierCurveTo(Tt+2*(St-Tt)/3,Lt+2*(kt-Lt)/3,Dt+2*(St-Dt)/3,z+2*(kt-z)/3,Dt,z)},I=new WeakSet,qn=function(){const $=this.currentPath;if($.length<=2)return[[$[0],$[0],$.at(-1),$.at(-1)]];const pt=[];let xt,[St,kt]=$[0];for(xt=1;xt<$.length-2;xt++){const[h,B]=$[xt],[V,Q]=$[xt+1],nt=(h+V)/2,lt=(B+Q)/2,Ct=[St+2*(h-St)/3,kt+2*(B-kt)/3],Ft=[nt+2*(h-nt)/3,lt+2*(B-lt)/3];pt.push([[St,kt],Ct,Ft,[nt,lt]]),[St,kt]=[nt,lt]}const[vt,$t]=$[xt],[Tt,Lt]=$[xt+1],Dt=[St+2*(vt-St)/3,kt+2*($t-kt)/3],z=[Tt+2*(vt-Tt)/3,Lt+2*($t-Lt)/3];return pt.push([[St,kt],Dt,z,[Tt,Lt]]),pt},H=new WeakSet,le=function(){if(this.isEmpty()){j(this,ht,Ne).call(this);return}j(this,_,mn).call(this);const{canvas:$,ctx:pt}=this;pt.setTransform(1,0,0,1,0,0),pt.clearRect(0,0,$.width,$.height),j(this,ht,Ne).call(this);for(const xt of this.bezierPath2D)pt.stroke(xt)},q=new WeakSet,bn=function($){this.canvas.removeEventListener("pointerleave",s(this,k)),this.canvas.removeEventListener("pointermove",s(this,w)),this.canvas.removeEventListener("pointerup",s(this,x)),this.canvas.addEventListener("pointerdown",s(this,c)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",v.noContextMenu)},10),j(this,W,Qn).call(this,$.offsetX,$.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ut=new WeakSet,De=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",n.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then($=>{var pt;return(pt=this.canvas)==null?void 0:pt.setAttribute("aria-label",$)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},mt=new WeakSet,Le=function(){at(this,O,new ResizeObserver($=>{const pt=$[0].contentRect;pt.width&&pt.height&&this.setDimensions(pt.width,pt.height)})),s(this,O).observe(this.div)},Wt=new WeakSet,me=function(){if(!s(this,C))return;const[$,pt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*$),this.canvas.height=Math.ceil(this.height*pt),j(this,ht,Ne).call(this)},Nt=new WeakSet,yn=function($,pt){const xt=j(this,Gt,Be).call(this),St=($-xt)/s(this,p),kt=(pt-xt)/s(this,m);this.scaleFactor=Math.min(St,kt)},ht=new WeakSet,Ne=function(){const $=j(this,Gt,Be).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$,this.translationY*this.scaleFactor+$)},dt=new WeakSet,tr=function($){const pt=new Path2D;for(let xt=0,St=$.length;xt<St;xt++){const[kt,vt,$t,Tt]=$[xt];xt===0&&pt.moveTo(...kt),pt.bezierCurveTo(vt[0],vt[1],$t[0],$t[1],Tt[0],Tt[1])}return pt},Rt=new WeakSet,An=function($,pt,xt){const[St,kt,vt,$t]=pt;switch(xt){case 0:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2)$[Tt]+=St,$[Tt+1]=$t-$[Tt+1];break;case 90:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2){const Dt=$[Tt];$[Tt]=$[Tt+1]+St,$[Tt+1]=Dt+kt}break;case 180:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2)$[Tt]=vt-$[Tt],$[Tt+1]+=kt;break;case 270:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2){const Dt=$[Tt];$[Tt]=vt-$[Tt+1],$[Tt+1]=$t-Dt}break;default:throw new Error("Invalid rotation")}return $},Xt=new WeakSet,er=function($,pt,xt){const[St,kt,vt,$t]=pt;switch(xt){case 0:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2)$[Tt]-=St,$[Tt+1]=$t-$[Tt+1];break;case 90:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2){const Dt=$[Tt];$[Tt]=$[Tt+1]-kt,$[Tt+1]=Dt-St}break;case 180:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2)$[Tt]=vt-$[Tt],$[Tt+1]-=kt;break;case 270:for(let Tt=0,Lt=$.length;Tt<Lt;Tt+=2){const Dt=$[Tt];$[Tt]=$t-$[Tt+1],$[Tt+1]=vt-Dt}break;default:throw new Error("Invalid rotation")}return $},Vt=new WeakSet,nr=function($,pt,xt,St){var Lt,Dt;const kt=[],vt=this.thickness/2,$t=$*pt+vt,Tt=$*xt+vt;for(const z of this.paths){const h=[],B=[];for(let V=0,Q=z.length;V<Q;V++){const[nt,lt,Ct,Ft]=z[V],Mt=$*nt[0]+$t,Qt=$*nt[1]+Tt,Ut=$*lt[0]+$t,Bt=$*lt[1]+Tt,Yt=$*Ct[0]+$t,_t=$*Ct[1]+Tt,qt=$*Ft[0]+$t,te=$*Ft[1]+Tt;V===0&&(h.push(Mt,Qt),B.push(Mt,Qt)),h.push(Ut,Bt,Yt,_t,qt,te),B.push(Ut,Bt),V===Q-1&&B.push(qt,te)}kt.push({bezier:j(Lt=ft,Rt,An).call(Lt,h,St,this.rotation),points:j(Dt=ft,Rt,An).call(Dt,B,St,this.rotation)})}return kt},Jt=new WeakSet,Sn=function(){let $=1/0,pt=-1/0,xt=1/0,St=-1/0;for(const kt of this.paths)for(const[vt,$t,Tt,Lt]of kt){const Dt=e.Util.bezierBoundingBox(...vt,...$t,...Tt,...Lt);$=Math.min($,Dt[0]),xt=Math.min(xt,Dt[1]),pt=Math.max(pt,Dt[2]),St=Math.max(St,Dt[3])}return[$,xt,pt,St]},Gt=new WeakSet,Be=function(){return s(this,i)?Math.ceil(this.thickness*this.parentScale):0},Z=new WeakSet,ve=function(){let $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!s(this,i)){j(this,H,le).call(this);return}const pt=j(this,Jt,Sn).call(this),xt=j(this,Gt,Be).call(this);at(this,p,Math.max(n.AnnotationEditor.MIN_SIZE,pt[2]-pt[0])),at(this,m,Math.max(n.AnnotationEditor.MIN_SIZE,pt[3]-pt[1]));const St=Math.ceil(xt+s(this,p)*this.scaleFactor),kt=Math.ceil(xt+s(this,m)*this.scaleFactor),[vt,$t]=this.parentDimensions;this.width=St/vt,this.height=kt/$t,this.setAspectRatio(St,kt);const Tt=this.translationX,Lt=this.translationY;this.translationX=-pt[0],this.translationY=-pt[1],j(this,Wt,me).call(this),j(this,H,le).call(this),at(this,M,St),at(this,f,kt),this.setDims(St,kt);const Dt=$?xt/this.scaleFactor/2:0;this.translate(Tt-this.translationX-Dt,Lt-this.translationY-Dt)},X(ft,dt),X(ft,Rt),X(ft,Xt),ne(ft,"_defaultColor",null),ne(ft,"_defaultOpacity",1),ne(ft,"_defaultThickness",1),ne(ft,"_type","ink");let T=ft;r.InkEditor=T},(g,r,t)=>{var T,m,p,w,k,x,c,o,i,d,C,Te,M,Ce,A,Ue,F,En,N,rr,G,sr,U,xn,et,We,Y,ir;Object.defineProperty(r,"__esModule",{value:!0}),r.StampEditor=void 0,t(149),t(152);var e=t(1),n=t(164),l=t(168),v=t(198);const gt=class gt extends n.AnnotationEditor{constructor(W){super(ue(oe({},W),{name:"stampEditor"}));X(this,C);X(this,M);X(this,A);X(this,F);X(this,N);X(this,G);X(this,U);X(this,et);X(this,Y);X(this,T,null);X(this,m,null);X(this,p,null);X(this,w,null);X(this,k,null);X(this,x,null);X(this,c,null);X(this,o,null);X(this,i,!1);X(this,d,!1);at(this,w,W.bitmapUrl),at(this,k,W.bitmapFile)}static initialize(W){n.AnnotationEditor.initialize(W)}static get supportedTypes(){const W=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",W.map(u=>`image/${u}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(W){return this.supportedTypes.includes(W)}static paste(W,u){u.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:W.getAsFile()})}remove(){var W,u;s(this,m)&&(at(this,T,null),this._uiManager.imageManager.deleteId(s(this,m)),(W=s(this,x))==null||W.remove(),at(this,x,null),(u=s(this,c))==null||u.disconnect(),at(this,c,null)),super.remove()}rebuild(){if(!this.parent){s(this,m)&&j(this,A,Ue).call(this);return}super.rebuild(),this.div!==null&&(s(this,m)&&j(this,A,Ue).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(s(this,p)||s(this,T)||s(this,w)||s(this,k))}get isResizable(){return!0}render(){if(this.div)return this.div;let W,u;if(this.width&&(W=this.x,u=this.y),super.render(),this.div.hidden=!0,s(this,T)?j(this,F,En).call(this):j(this,A,Ue).call(this),this.width){const[y,a]=this.parentDimensions;this.setAt(W*y,u*a,this.width*y,this.height*a)}return this.div}static deserialize(W,u,y){if(W instanceof v.StampAnnotationElement)return null;const a=super.deserialize(W,u,y),{rect:b,bitmapUrl:E,bitmapId:I,isSvg:R,accessibilityData:H}=W;I&&y.imageManager.isValidId(I)?at(a,m,I):at(a,w,E),at(a,i,R);const[tt,q]=a.pageDimensions;return a.width=(b[2]-b[0])/tt,a.height=(b[3]-b[1])/q,H&&(a.altTextData=H),a}serialize(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.isEmpty())return null;const y={annotationType:e.AnnotationEditorType.STAMP,bitmapId:s(this,m),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:s(this,i),structTreeParentId:this._structTreeParentId};if(W)return y.bitmapUrl=j(this,et,We).call(this,!0),y.accessibilityData=this.altTextData,y;const{decorative:a,altText:b}=this.altTextData;if(!a&&b&&(y.accessibilityData={type:"Figure",alt:b}),u===null)return y;u.stamps||(u.stamps=new Map);const E=s(this,i)?(y.rect[2]-y.rect[0])*(y.rect[3]-y.rect[1]):null;if(!u.stamps.has(s(this,m)))u.stamps.set(s(this,m),{area:E,serialized:y}),y.bitmap=j(this,et,We).call(this,!1);else if(s(this,i)){const I=u.stamps.get(s(this,m));E>I.area&&(I.area=E,I.serialized.bitmap.close(),I.serialized.bitmap=j(this,et,We).call(this,!1))}return y}};T=new WeakMap,m=new WeakMap,p=new WeakMap,w=new WeakMap,k=new WeakMap,x=new WeakMap,c=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakMap,C=new WeakSet,Te=function(W){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!W){this.remove();return}at(this,T,W.bitmap),u||(at(this,m,W.id),at(this,i,W.isSvg)),j(this,F,En).call(this)},M=new WeakSet,Ce=function(){at(this,p,null),this._uiManager.enableWaiting(!1),s(this,x)&&this.div.focus()},A=new WeakSet,Ue=function(){if(s(this,m)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(s(this,m)).then(u=>j(this,C,Te).call(this,u,!0)).finally(()=>j(this,M,Ce).call(this));return}if(s(this,w)){const u=s(this,w);at(this,w,null),this._uiManager.enableWaiting(!0),at(this,p,this._uiManager.imageManager.getFromUrl(u).then(y=>j(this,C,Te).call(this,y)).finally(()=>j(this,M,Ce).call(this)));return}if(s(this,k)){const u=s(this,k);at(this,k,null),this._uiManager.enableWaiting(!0),at(this,p,this._uiManager.imageManager.getFromFile(u).then(y=>j(this,C,Te).call(this,y)).finally(()=>j(this,M,Ce).call(this)));return}const W=document.createElement("input");W.type="file",W.accept=gt.supportedTypesStr,at(this,p,new Promise(u=>{W.addEventListener("change",()=>ee(this,null,function*(){if(!W.files||W.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const y=yield this._uiManager.imageManager.getFromFile(W.files[0]);j(this,C,Te).call(this,y)}u()})),W.addEventListener("cancel",()=>{this.remove(),u()})}).finally(()=>j(this,M,Ce).call(this))),W.click()},F=new WeakSet,En=function(){const{div:W}=this;let{width:u,height:y}=s(this,T);const[a,b]=this.pageDimensions,E=.75;if(this.width)u=this.width*a,y=this.height*b;else if(u>E*a||y>E*b){const tt=Math.min(E*a/u,E*b/y);u*=tt,y*=tt}const[I,R]=this.parentDimensions;this.setDims(u*I/a,y*R/b),this._uiManager.enableWaiting(!1);const H=at(this,x,document.createElement("canvas"));W.append(H),W.hidden=!1,j(this,U,xn).call(this,u,y),j(this,Y,ir).call(this),s(this,d)||(this.parent.addUndoableEditor(this),at(this,d,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},N=new WeakSet,rr=function(W,u){var E;const[y,a]=this.parentDimensions;this.width=W/y,this.height=u/a,this.setDims(W,u),(E=this._initialOptions)!=null&&E.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,s(this,o)!==null&&clearTimeout(s(this,o)),at(this,o,setTimeout(()=>{at(this,o,null),j(this,U,xn).call(this,W,u)},200))},G=new WeakSet,sr=function(W,u){const{width:y,height:a}=s(this,T);let b=y,E=a,I=s(this,T);for(;b>2*W||E>2*u;){const R=b,H=E;b>2*W&&(b=b>=16384?Math.floor(b/2)-1:Math.ceil(b/2)),E>2*u&&(E=E>=16384?Math.floor(E/2)-1:Math.ceil(E/2));const tt=new OffscreenCanvas(b,E);tt.getContext("2d").drawImage(I,0,0,R,H,0,0,b,E),I=tt.transferToImageBitmap()}return I},U=new WeakSet,xn=function(W,u){W=Math.ceil(W),u=Math.ceil(u);const y=s(this,x);if(!y||y.width===W&&y.height===u)return;y.width=W,y.height=u;const a=s(this,i)?s(this,T):j(this,G,sr).call(this,W,u),b=y.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(a,0,0,a.width,a.height,0,0,W,u)},et=new WeakSet,We=function(W){if(W){if(s(this,i)){const a=this._uiManager.imageManager.getSvgUrl(s(this,m));if(a)return a}const u=document.createElement("canvas");return{width:u.width,height:u.height}=s(this,T),u.getContext("2d").drawImage(s(this,T),0,0),u.toDataURL()}if(s(this,i)){const[u,y]=this.pageDimensions,a=Math.round(this.width*u*l.PixelsPerInch.PDF_TO_CSS_UNITS),b=Math.round(this.height*y*l.PixelsPerInch.PDF_TO_CSS_UNITS),E=new OffscreenCanvas(a,b);return E.getContext("2d").drawImage(s(this,T),0,0,s(this,T).width,s(this,T).height,0,0,a,b),E.transferToImageBitmap()}return structuredClone(s(this,T))},Y=new WeakSet,ir=function(){at(this,c,new ResizeObserver(W=>{const u=W[0].contentRect;u.width&&u.height&&j(this,N,rr).call(this,u.width,u.height)})),s(this,c).observe(this.div)},ne(gt,"_type","stamp");let P=gt;r.StampEditor=P}],__webpack_module_cache__={};function __w_pdfjs_require__(g){var r=__webpack_module_cache__[g];if(r!==void 0)return r.exports;var t=__webpack_module_cache__[g]={exports:{}};return __webpack_modules__[g].call(t.exports,t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var g=__webpack_exports__;Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"AbortException",{enumerable:!0,get:function(){return r.AbortException}}),Object.defineProperty(g,"AnnotationEditorLayer",{enumerable:!0,get:function(){return l.AnnotationEditorLayer}}),Object.defineProperty(g,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(g,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(g,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return v.AnnotationEditorUIManager}}),Object.defineProperty(g,"AnnotationLayer",{enumerable:!0,get:function(){return P.AnnotationLayer}}),Object.defineProperty(g,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(g,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(g,"DOMSVGFactory",{enumerable:!0,get:function(){return e.DOMSVGFactory}}),Object.defineProperty(g,"FeatureTest",{enumerable:!0,get:function(){return r.FeatureTest}}),Object.defineProperty(g,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(g,"ImageKind",{enumerable:!0,get:function(){return r.ImageKind}}),Object.defineProperty(g,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(g,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(g,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(g,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(g,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(g,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(g,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(g,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(g,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(g,"PromiseCapability",{enumerable:!0,get:function(){return r.PromiseCapability}}),Object.defineProperty(g,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(g,"SVGGraphics",{enumerable:!0,get:function(){return t.SVGGraphics}}),Object.defineProperty(g,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(g,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(g,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(g,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(g,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(g,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(g,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(g,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(g,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(g,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(g,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(g,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(g,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(g,"noContextMenu",{enumerable:!0,get:function(){return e.noContextMenu}}),Object.defineProperty(g,"normalizeUnicode",{enumerable:!0,get:function(){return r.normalizeUnicode}}),Object.defineProperty(g,"renderTextLayer",{enumerable:!0,get:function(){return n.renderTextLayer}}),Object.defineProperty(g,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(g,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(g,"updateTextLayer",{enumerable:!0,get:function(){return n.updateTextLayer}}),Object.defineProperty(g,"version",{enumerable:!0,get:function(){return t.version}});var r=__w_pdfjs_require__(1),t=__w_pdfjs_require__(124),e=__w_pdfjs_require__(168),n=__w_pdfjs_require__(195),l=__w_pdfjs_require__(196),v=__w_pdfjs_require__(165),P=__w_pdfjs_require__(198),T=__w_pdfjs_require__(176),m=__w_pdfjs_require__(201)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;export{ElCheckbox as E,pdfExports as p};
